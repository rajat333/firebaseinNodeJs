<!DOCTYPE html>
<html>
<head>
  <title>argument_parser.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../doc-style.css" />
  <script src="../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../";
    var thisFile = "node-refresh-token\\node_modules\\argparse\\lib\\argument_parser.js";
    var defaultSidebar = true;
  </script>
  <script src="../../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h5">
        <a href="#options">Options:</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>argument_parser.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>
<div class="dox">
<div class="summary">
<p>class ArgumentParser</p>
</div>
<div class="body">
<p>Object for parsing command line strings into js objects.</p>
<p>Inherited from [[ActionContainer]]</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">var</span> util    = <span class="hljs-built_in">require</span>(<span class="hljs-string">'util'</span>);
<span class="hljs-keyword">var</span> format  = <span class="hljs-built_in">require</span>(<span class="hljs-string">'util'</span>).format;
<span class="hljs-keyword">var</span> Path    = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">var</span> sprintf = <span class="hljs-built_in">require</span>(<span class="hljs-string">'sprintf-js'</span>).sprintf;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<p>Constants</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">var</span> c = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./const'</span>);

<span class="hljs-keyword">var</span> $$ = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./utils'</span>);

<span class="hljs-keyword">var</span> ActionContainer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./action_container'</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<p>Errors</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">var</span> argumentErrorHelper = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./argument/error'</span>);

<span class="hljs-keyword">var</span> HelpFormatter = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./help/formatter'</span>);

<span class="hljs-keyword">var</span> Namespace = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./namespace'</span>);


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<p>new ArgumentParser(options)</p>
</div>
<div class="body">
<p>Create a new ArgumentParser object.</p>
<div class="pilwrap" id="options">
  <h5>
    <a href="#options" name="options" class="pilcrow"></a>
Options:
  </h5>
</div>
<ul>
<li><code>prog</code>  The name of the program (default: Path.basename(process.argv<a href="http://docs.python.org/dev/library/argparse.html#argumentparser-objects">1</a>))</li>
<li><code>usage</code>  A usage message (default: auto-generated from arguments)</li>
<li><code>description</code>  A description of what the program does</li>
<li><code>epilog</code>  Text following the argument descriptions</li>
<li><code>parents</code>  Parsers whose arguments should be copied into this one</li>
<li><code>formatterClass</code>  HelpFormatter class for printing help messages</li>
<li><code>prefixChars</code>  Characters that prefix optional arguments</li>
<li><code>fromfilePrefixChars</code> Characters that prefix files containing additional arguments</li>
<li><code>argumentDefault</code>  The default value for all arguments</li>
<li><code>addHelp</code>  Add a -h/-help option</li>
<li><code>conflictHandler</code>  Specifies how to handle conflicting argument names</li>
<li><code>debug</code>  Enable debug mode. Argument errors throw exception in
debug mode and process.exit in normal. Used for development and
testing (default: false)</li>
</ul>
<p>See also <a href="http://docs.python.org/dev/library/argparse.html#argumentparser-objects">original guide</a></p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ArgumentParser</span>(<span class="hljs-params">options</span>) </span>{
  <span class="hljs-keyword">if</span> (!(<span class="hljs-keyword">this</span> <span class="hljs-keyword">instanceof</span> ArgumentParser)) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ArgumentParser(options);
  }
  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
  options = options || {};

  options.description = (options.description || <span class="hljs-literal">null</span>);
  options.argumentDefault = (options.argumentDefault || <span class="hljs-literal">null</span>);
  options.prefixChars = (options.prefixChars || <span class="hljs-string">'-'</span>);
  options.conflictHandler = (options.conflictHandler || <span class="hljs-string">'error'</span>);
  ActionContainer.call(<span class="hljs-keyword">this</span>, options);

  options.addHelp = <span class="hljs-keyword">typeof</span> options.addHelp === <span class="hljs-string">'undefined'</span> || !!options.addHelp;
  options.parents = options.parents || [];
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<p>default program name</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  options.prog = (options.prog || Path.basename(process.argv[<span class="hljs-number">1</span>]));
  <span class="hljs-keyword">this</span>.prog = options.prog;
  <span class="hljs-keyword">this</span>.usage = options.usage;
  <span class="hljs-keyword">this</span>.epilog = options.epilog;
  <span class="hljs-keyword">this</span>.version = options.version;

  <span class="hljs-keyword">this</span>.debug = (options.debug === <span class="hljs-literal">true</span>);

  <span class="hljs-keyword">this</span>.formatterClass = (options.formatterClass || HelpFormatter);
  <span class="hljs-keyword">this</span>.fromfilePrefixChars = options.fromfilePrefixChars || <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">this</span>._positionals = <span class="hljs-keyword">this</span>.addArgumentGroup({ <span class="hljs-attr">title</span>: <span class="hljs-string">'Positional arguments'</span> });
  <span class="hljs-keyword">this</span>._optionals = <span class="hljs-keyword">this</span>.addArgumentGroup({ <span class="hljs-attr">title</span>: <span class="hljs-string">'Optional arguments'</span> });
  <span class="hljs-keyword">this</span>._subparsers = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<p>register types</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">FUNCTION_IDENTITY</span>(<span class="hljs-params">o</span>) </span>{
    <span class="hljs-keyword">return</span> o;
  }
  <span class="hljs-keyword">this</span>.register(<span class="hljs-string">'type'</span>, <span class="hljs-string">'auto'</span>, FUNCTION_IDENTITY);
  <span class="hljs-keyword">this</span>.register(<span class="hljs-string">'type'</span>, <span class="hljs-literal">null</span>, FUNCTION_IDENTITY);
  <span class="hljs-keyword">this</span>.register(<span class="hljs-string">'type'</span>, <span class="hljs-string">'int'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) </span>{
    <span class="hljs-keyword">var</span> result = <span class="hljs-built_in">parseInt</span>(x, <span class="hljs-number">10</span>);
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(result)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(x + <span class="hljs-string">' is not a valid integer.'</span>);
    }
    <span class="hljs-keyword">return</span> result;
  });
  <span class="hljs-keyword">this</span>.register(<span class="hljs-string">'type'</span>, <span class="hljs-string">'float'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) </span>{
    <span class="hljs-keyword">var</span> result = <span class="hljs-built_in">parseFloat</span>(x);
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(result)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(x + <span class="hljs-string">' is not a valid float.'</span>);
    }
    <span class="hljs-keyword">return</span> result;
  });
  <span class="hljs-keyword">this</span>.register(<span class="hljs-string">'type'</span>, <span class="hljs-string">'string'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-string">''</span> + x;
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<p>add help and version arguments if necessary</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> defaultPrefix = (<span class="hljs-keyword">this</span>.prefixChars.indexOf(<span class="hljs-string">'-'</span>) &gt; <span class="hljs-number">-1</span>) ? <span class="hljs-string">'-'</span> : <span class="hljs-keyword">this</span>.prefixChars[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">if</span> (options.addHelp) {
    <span class="hljs-keyword">this</span>.addArgument(
      [ defaultPrefix + <span class="hljs-string">'h'</span>, defaultPrefix + defaultPrefix + <span class="hljs-string">'help'</span> ],
      {
        <span class="hljs-attr">action</span>: <span class="hljs-string">'help'</span>,
        <span class="hljs-attr">defaultValue</span>: c.SUPPRESS,
        <span class="hljs-attr">help</span>: <span class="hljs-string">'Show this help message and exit.'</span>
      }
    );
  }
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.version !== <span class="hljs-string">'undefined'</span>) {
    <span class="hljs-keyword">this</span>.addArgument(
      [ defaultPrefix + <span class="hljs-string">'v'</span>, defaultPrefix + defaultPrefix + <span class="hljs-string">'version'</span> ],
      {
        <span class="hljs-attr">action</span>: <span class="hljs-string">'version'</span>,
        <span class="hljs-attr">version</span>: <span class="hljs-keyword">this</span>.version,
        <span class="hljs-attr">defaultValue</span>: c.SUPPRESS,
        <span class="hljs-attr">help</span>: <span class="hljs-string">"Show program's version number and exit."</span>
      }
    );
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<p>add parent arguments and defaults</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  options.parents.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">parent</span>) </span>{
    self._addContainerActions(parent);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> parent._defaults !== <span class="hljs-string">'undefined'</span>) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> defaultKey <span class="hljs-keyword">in</span> parent._defaults) {
        <span class="hljs-keyword">if</span> (parent._defaults.hasOwnProperty(defaultKey)) {
          self._defaults[defaultKey] = parent._defaults[defaultKey];
        }
      }
    }
  });
}

util.inherits(ArgumentParser, ActionContainer);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<div class="dox">
<div class="summary">
<p>ArgumentParser#addSubparsers(options) -&gt; [[ActionSubparsers]]</p>
<ul>
<li>options (object): hash of options see [[ActionSubparsers.new]]</li>
</ul>
</div>
<div class="body">
<p>See also <a href="http://docs.python.org/dev/library/argparse.html#sub-commands">subcommands</a></p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">ArgumentParser.prototype.addSubparsers = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">options</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._subparsers) {
    <span class="hljs-keyword">this</span>.error(<span class="hljs-string">'Cannot have multiple subparser arguments.'</span>);
  }

  options = options || {};
  options.debug = (<span class="hljs-keyword">this</span>.debug === <span class="hljs-literal">true</span>);
  options.optionStrings = [];
  options.parserClass = (options.parserClass || ArgumentParser);


  <span class="hljs-keyword">if</span> (!!options.title || !!options.description) {

    <span class="hljs-keyword">this</span>._subparsers = <span class="hljs-keyword">this</span>.addArgumentGroup({
      <span class="hljs-attr">title</span>: (options.title || <span class="hljs-string">'subcommands'</span>),
      <span class="hljs-attr">description</span>: options.description
    });
    <span class="hljs-keyword">delete</span> options.title;
    <span class="hljs-keyword">delete</span> options.description;

  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">this</span>._subparsers = <span class="hljs-keyword">this</span>._positionals;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<p>prog defaults to the usage message of this parser, skipping
optional arguments and with no &quot;usage:&quot; prefix</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (!options.prog) {
    <span class="hljs-keyword">var</span> formatter = <span class="hljs-keyword">this</span>._getFormatter();
    <span class="hljs-keyword">var</span> positionals = <span class="hljs-keyword">this</span>._getPositionalActions();
    <span class="hljs-keyword">var</span> groups = <span class="hljs-keyword">this</span>._mutuallyExclusiveGroups;
    formatter.addUsage(<span class="hljs-keyword">this</span>.usage, positionals, groups, <span class="hljs-string">''</span>);
    options.prog = formatter.formatHelp().trim();
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11"></a>
</div>
<p>create the parsers action and add it to the positionals list</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> ParsersClass = <span class="hljs-keyword">this</span>._popActionClass(options, <span class="hljs-string">'parsers'</span>);
  <span class="hljs-keyword">var</span> action = <span class="hljs-keyword">new</span> ParsersClass(options);
  <span class="hljs-keyword">this</span>._subparsers._addAction(action);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12"></a>
</div>
<p>return the created parsers action</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">return</span> action;
};

ArgumentParser.prototype._addAction = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">action</span>) </span>{
  <span class="hljs-keyword">if</span> (action.isOptional()) {
    <span class="hljs-keyword">this</span>._optionals._addAction(action);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">this</span>._positionals._addAction(action);
  }
  <span class="hljs-keyword">return</span> action;
};

ArgumentParser.prototype._getOptionalActions = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._actions.filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">action</span>) </span>{
    <span class="hljs-keyword">return</span> action.isOptional();
  });
};

ArgumentParser.prototype._getPositionalActions = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._actions.filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">action</span>) </span>{
    <span class="hljs-keyword">return</span> action.isPositional();
  });
};


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13"></a>
</div>
<div class="dox">
<div class="summary">
<p>ArgumentParser#parseArgs(args, namespace) -&gt; Namespace|Object</p>
<ul>
<li>args (array): input elements</li>
<li>namespace (Namespace|Object): result object</li>
</ul>
</div>
<div class="body">
<p>Parsed args and throws error if some arguments are not recognized</p>
<p>See also <a href="http://docs.python.org/dev/library/argparse.html#the-parse-args-method">original guide</a></p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">ArgumentParser.prototype.parseArgs = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">args, namespace</span>) </span>{
  <span class="hljs-keyword">var</span> argv;
  <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">this</span>.parseKnownArgs(args, namespace);

  args = result[<span class="hljs-number">0</span>];
  argv = result[<span class="hljs-number">1</span>];
  <span class="hljs-keyword">if</span> (argv &amp;&amp; argv.length &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">this</span>.error(
      format(<span class="hljs-string">'Unrecognized arguments: %s.'</span>, argv.join(<span class="hljs-string">' '</span>))
    );
  }
  <span class="hljs-keyword">return</span> args;
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14"></a>
</div>
<div class="dox">
<div class="summary">
<p>ArgumentParser#parseKnownArgs(args, namespace) -&gt; array</p>
<ul>
<li>args (array): input options</li>
<li>namespace (Namespace|Object): result object</li>
</ul>
</div>
<div class="body">
<p>Parse known arguments and return tuple of result object
and unknown args</p>
<p>See also <a href="http://docs.python.org/dev/library/argparse.html#partial-parsing">original guide</a></p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">ArgumentParser.prototype.parseKnownArgs = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">args, namespace</span>) </span>{
  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15"></a>
</div>
<p>args default to the system args</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  args = args || process.argv.slice(<span class="hljs-number">2</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-16" id="section-16"></a>
</div>
<p>default Namespace built from parser defaults</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  namespace = namespace || <span class="hljs-keyword">new</span> Namespace();

  self._actions.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">action</span>) </span>{
    <span class="hljs-keyword">if</span> (action.dest !== c.SUPPRESS) {
      <span class="hljs-keyword">if</span> (!$$.has(namespace, action.dest)) {
        <span class="hljs-keyword">if</span> (action.defaultValue !== c.SUPPRESS) {
          <span class="hljs-keyword">var</span> defaultValue = action.defaultValue;
          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> action.defaultValue === <span class="hljs-string">'string'</span>) {
            defaultValue = self._getValue(action, defaultValue);
          }
          namespace[action.dest] = defaultValue;
        }
      }
    }
  });

  <span class="hljs-built_in">Object</span>.keys(self._defaults).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">dest</span>) </span>{
    namespace[dest] = self._defaults[dest];
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17"></a>
</div>
<p>parse the arguments and exit if there are any errors</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">var</span> res = <span class="hljs-keyword">this</span>._parseKnownArgs(args, namespace);

    namespace = res[<span class="hljs-number">0</span>];
    args = res[<span class="hljs-number">1</span>];
    <span class="hljs-keyword">if</span> ($$.has(namespace, c._UNRECOGNIZED_ARGS_ATTR)) {
      args = $$.arrayUnion(args, namespace[c._UNRECOGNIZED_ARGS_ATTR]);
      <span class="hljs-keyword">delete</span> namespace[c._UNRECOGNIZED_ARGS_ATTR];
    }
    <span class="hljs-keyword">return</span> [ namespace, args ];
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-keyword">this</span>.error(e);
  }
};

ArgumentParser.prototype._parseKnownArgs = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">argStrings, namespace</span>) </span>{
  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

  <span class="hljs-keyword">var</span> extras = [];

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18"></a>
</div>
<p>replace arg strings that are file references</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.fromfilePrefixChars !== <span class="hljs-literal">null</span>) {
    argStrings = <span class="hljs-keyword">this</span>._readArgsFromFiles(argStrings);
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19"></a>
</div>
<p>map all mutually exclusive arguments to the other arguments
they can't occur with
Python has 'conflicts = action_conflicts.setdefault(mutex_action, [])'
though I can't conceive of a way in which an action could be a member
of two different mutually exclusive groups.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">actionHash</span>(<span class="hljs-params">action</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20"></a>
</div>
<p>some sort of hashable key for this action
action itself cannot be a key in actionConflicts
I think getName() (join of optionStrings) is unique enough</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">return</span> action.getName();
  }

  <span class="hljs-keyword">var</span> conflicts, key;
  <span class="hljs-keyword">var</span> actionConflicts = {};

  <span class="hljs-keyword">this</span>._mutuallyExclusiveGroups.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">mutexGroup</span>) </span>{
    mutexGroup._groupActions.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">mutexAction, i, groupActions</span>) </span>{
      key = actionHash(mutexAction);
      <span class="hljs-keyword">if</span> (!$$.has(actionConflicts, key)) {
        actionConflicts[key] = [];
      }
      conflicts = actionConflicts[key];
      conflicts.push.apply(conflicts, groupActions.slice(<span class="hljs-number">0</span>, i));
      conflicts.push.apply(conflicts, groupActions.slice(i + <span class="hljs-number">1</span>));
    });
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21"></a>
</div>
<p>find all option indices, and determine the arg_string_pattern
which has an 'O' if there is an option at an index,
an 'A' if there is an argument, or a '-' if there is a '--'</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> optionStringIndices = {};

  <span class="hljs-keyword">var</span> argStringPatternParts = [];

  argStrings.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">argString, argStringIndex</span>) </span>{
    <span class="hljs-keyword">if</span> (argString === <span class="hljs-string">'--'</span>) {
      argStringPatternParts.push(<span class="hljs-string">'-'</span>);
      <span class="hljs-keyword">while</span> (argStringIndex &lt; argStrings.length) {
        argStringPatternParts.push(<span class="hljs-string">'A'</span>);
        argStringIndex++;
      }
    } <span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22"></a>
</div>
<p>otherwise, add the arg to the arg strings
and note the index if it was an option</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">var</span> pattern;
      <span class="hljs-keyword">var</span> optionTuple = self._parseOptional(argString);
      <span class="hljs-keyword">if</span> (!optionTuple) {
        pattern = <span class="hljs-string">'A'</span>;
      } <span class="hljs-keyword">else</span> {
        optionStringIndices[argStringIndex] = optionTuple;
        pattern = <span class="hljs-string">'O'</span>;
      }
      argStringPatternParts.push(pattern);
    }
  });
  <span class="hljs-keyword">var</span> argStringsPattern = argStringPatternParts.join(<span class="hljs-string">''</span>);

  <span class="hljs-keyword">var</span> seenActions = [];
  <span class="hljs-keyword">var</span> seenNonDefaultActions = [];


  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">takeAction</span>(<span class="hljs-params">action, argumentStrings, optionString</span>) </span>{
    seenActions.push(action);
    <span class="hljs-keyword">var</span> argumentValues = self._getValues(action, argumentStrings);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-23" id="section-23"></a>
</div>
<p>error if this argument is not allowed with other previously
seen arguments, assuming that actions that use the default
value don't really count as &quot;present&quot;</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (argumentValues !== action.defaultValue) {
      seenNonDefaultActions.push(action);
      <span class="hljs-keyword">if</span> (actionConflicts[actionHash(action)]) {
        actionConflicts[actionHash(action)].forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">actionConflict</span>) </span>{
          <span class="hljs-keyword">if</span> (seenNonDefaultActions.indexOf(actionConflict) &gt;= <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">throw</span> argumentErrorHelper(
              action,
              format(<span class="hljs-string">'Not allowed with argument "%s".'</span>, actionConflict.getName())
            );
          }
        });
      }
    }

    <span class="hljs-keyword">if</span> (argumentValues !== c.SUPPRESS) {
      action.call(self, namespace, argumentValues, optionString);
    }
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">consumeOptional</span>(<span class="hljs-params">startIndex</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-24" id="section-24"></a>
</div>
<p>get the optional identified at this index</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">var</span> optionTuple = optionStringIndices[startIndex];
    <span class="hljs-keyword">var</span> action = optionTuple[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">var</span> optionString = optionTuple[<span class="hljs-number">1</span>];
    <span class="hljs-keyword">var</span> explicitArg = optionTuple[<span class="hljs-number">2</span>];

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-25" id="section-25"></a>
</div>
<p>identify additional optionals in the same arg string
(e.g. -xyz is the same as -x -y -z if no args are required)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">var</span> actionTuples = [];

    <span class="hljs-keyword">var</span> args, argCount, start, stop;

    <span class="hljs-keyword">for</span> (;;) {
      <span class="hljs-keyword">if</span> (!action) {
        extras.push(argStrings[startIndex]);
        <span class="hljs-keyword">return</span> startIndex + <span class="hljs-number">1</span>;
      }
      <span class="hljs-keyword">if</span> (explicitArg) {
        argCount = self._matchArgument(action, <span class="hljs-string">'A'</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-26" id="section-26"></a>
</div>
<p>if the action is a single-dash option and takes no
arguments, try to parse more single-dash options out
of the tail of the option string</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">var</span> chars = self.prefixChars;
        <span class="hljs-keyword">if</span> (argCount === <span class="hljs-number">0</span> &amp;&amp; chars.indexOf(optionString[<span class="hljs-number">1</span>]) &lt; <span class="hljs-number">0</span>) {
          actionTuples.push([ action, [], optionString ]);
          optionString = optionString[<span class="hljs-number">0</span>] + explicitArg[<span class="hljs-number">0</span>];
          <span class="hljs-keyword">var</span> newExplicitArg = explicitArg.slice(<span class="hljs-number">1</span>) || <span class="hljs-literal">null</span>;
          <span class="hljs-keyword">var</span> optionalsMap = self._optionStringActions;

          <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.keys(optionalsMap).indexOf(optionString) &gt;= <span class="hljs-number">0</span>) {
            action = optionalsMap[optionString];
            explicitArg = newExplicitArg;
          } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">throw</span> argumentErrorHelper(action, sprintf(<span class="hljs-string">'ignored explicit argument %r'</span>, explicitArg));
          }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (argCount === <span class="hljs-number">1</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-27" id="section-27"></a>
</div>
<p>if the action expect exactly one argument, we've
successfully matched the option; exit the loop</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">          stop = startIndex + <span class="hljs-number">1</span>;
          args = [ explicitArg ];
          actionTuples.push([ action, args, optionString ]);
          <span class="hljs-keyword">break</span>;
        } <span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-28" id="section-28"></a>
</div>
<p>error if a double-dash option did not use the
explicit argument</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">          <span class="hljs-keyword">throw</span> argumentErrorHelper(action, sprintf(<span class="hljs-string">'ignored explicit argument %r'</span>, explicitArg));
        }
      } <span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-29" id="section-29"></a>
</div>
<p>if there is no explicit argument, try to match the
optional's string arguments with the following strings
if successful, exit the loop</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
        start = startIndex + <span class="hljs-number">1</span>;
        <span class="hljs-keyword">var</span> selectedPatterns = argStringsPattern.substr(start);

        argCount = self._matchArgument(action, selectedPatterns);
        stop = start + argCount;


        args = argStrings.slice(start, stop);

        actionTuples.push([ action, args, optionString ]);
        <span class="hljs-keyword">break</span>;
      }

    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-30" id="section-30"></a>
</div>
<p>add the Optional to the list and return the index at which
the Optional's string args stopped</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (actionTuples.length &lt; <span class="hljs-number">1</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'length should be &gt; 0'</span>);
    }
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; actionTuples.length; i++) {
      takeAction.apply(self, actionTuples[i]);
    }
    <span class="hljs-keyword">return</span> stop;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-31" id="section-31"></a>
</div>
<p>the list of Positionals left to be parsed; this is modified
by consume_positionals()</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> positionals = self._getPositionalActions();

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">consumePositionals</span>(<span class="hljs-params">startIndex</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-32" id="section-32"></a>
</div>
<p>match as many Positionals as possible</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">var</span> selectedPattern = argStringsPattern.substr(startIndex);
    <span class="hljs-keyword">var</span> argCounts = self._matchArgumentsPartial(positionals, selectedPattern);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-33" id="section-33"></a>
</div>
<p>slice off the appropriate arg strings for each Positional
and add the Positional and its args to the list</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; positionals.length; i++) {
      <span class="hljs-keyword">var</span> action = positionals[i];
      <span class="hljs-keyword">var</span> argCount = argCounts[i];
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> argCount === <span class="hljs-string">'undefined'</span>) {
        <span class="hljs-keyword">continue</span>;
      }
      <span class="hljs-keyword">var</span> args = argStrings.slice(startIndex, startIndex + argCount);

      startIndex += argCount;
      takeAction(action, args);
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-34" id="section-34"></a>
</div>
<p>slice off the Positionals that we just parsed and return the
index at which the Positionals' string args stopped</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    positionals = positionals.slice(argCounts.length);
    <span class="hljs-keyword">return</span> startIndex;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-35" id="section-35"></a>
</div>
<p>consume Positionals and Optionals alternately, until we have
passed the last option string</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> startIndex = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">var</span> position;

  <span class="hljs-keyword">var</span> maxOptionStringIndex = <span class="hljs-number">-1</span>;

  <span class="hljs-built_in">Object</span>.keys(optionStringIndices).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">position</span>) </span>{
    maxOptionStringIndex = <span class="hljs-built_in">Math</span>.max(maxOptionStringIndex, <span class="hljs-built_in">parseInt</span>(position, <span class="hljs-number">10</span>));
  });

  <span class="hljs-keyword">var</span> positionalsEndIndex, nextOptionStringIndex;

  <span class="hljs-keyword">while</span> (startIndex &lt;= maxOptionStringIndex) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-36" id="section-36"></a>
</div>
<p>consume any Positionals preceding the next option</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    nextOptionStringIndex = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">for</span> (position <span class="hljs-keyword">in</span> optionStringIndices) {
      <span class="hljs-keyword">if</span> (!optionStringIndices.hasOwnProperty(position)) { <span class="hljs-keyword">continue</span>; }

      position = <span class="hljs-built_in">parseInt</span>(position, <span class="hljs-number">10</span>);
      <span class="hljs-keyword">if</span> (position &gt;= startIndex) {
        <span class="hljs-keyword">if</span> (nextOptionStringIndex !== <span class="hljs-literal">null</span>) {
          nextOptionStringIndex = <span class="hljs-built_in">Math</span>.min(nextOptionStringIndex, position);
        } <span class="hljs-keyword">else</span> {
          nextOptionStringIndex = position;
        }
      }
    }

    <span class="hljs-keyword">if</span> (startIndex !== nextOptionStringIndex) {
      positionalsEndIndex = consumePositionals(startIndex);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-37" id="section-37"></a>
</div>
<p>only try to parse the next optional if we didn't consume
the option string during the positionals parsing</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">if</span> (positionalsEndIndex &gt; startIndex) {
        startIndex = positionalsEndIndex;
        <span class="hljs-keyword">continue</span>;
      } <span class="hljs-keyword">else</span> {
        startIndex = positionalsEndIndex;
      }
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-38" id="section-38"></a>
</div>
<p>if we consumed all the positionals we could and we're not
at the index of an option string, there were extra arguments</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (!optionStringIndices[startIndex]) {
      <span class="hljs-keyword">var</span> strings = argStrings.slice(startIndex, nextOptionStringIndex);
      extras = extras.concat(strings);
      startIndex = nextOptionStringIndex;
    }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-39" id="section-39"></a>
</div>
<p>consume the next optional and any arguments for it</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    startIndex = consumeOptional(startIndex);
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-40" id="section-40"></a>
</div>
<p>consume any positionals following the last Optional</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> stopIndex = consumePositionals(startIndex);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-41" id="section-41"></a>
</div>
<p>if we didn't consume all the argument strings, there were extras</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  extras = extras.concat(argStrings.slice(stopIndex));

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-42" id="section-42"></a>
</div>
<p>if we didn't use all the Positional objects, there were too few
arg strings supplied.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (positionals.length &gt; <span class="hljs-number">0</span>) {
    self.error(<span class="hljs-string">'too few arguments'</span>);
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-43" id="section-43"></a>
</div>
<p>make sure all required actions were present</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  self._actions.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">action</span>) </span>{
    <span class="hljs-keyword">if</span> (action.required) {
      <span class="hljs-keyword">if</span> (seenActions.indexOf(action) &lt; <span class="hljs-number">0</span>) {
        self.error(format(<span class="hljs-string">'Argument "%s" is required'</span>, action.getName()));
      }
    }
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-44" id="section-44"></a>
</div>
<p>make sure all required groups have one option present</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> actionUsed = <span class="hljs-literal">false</span>;
  self._mutuallyExclusiveGroups.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">group</span>) </span>{
    <span class="hljs-keyword">if</span> (group.required) {
      actionUsed = group._groupActions.some(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">action</span>) </span>{
        <span class="hljs-keyword">return</span> seenNonDefaultActions.indexOf(action) !== <span class="hljs-number">-1</span>;
      });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-45" id="section-45"></a>
</div>
<p>if no actions were used, report the error</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">if</span> (!actionUsed) {
        <span class="hljs-keyword">var</span> names = [];
        group._groupActions.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">action</span>) </span>{
          <span class="hljs-keyword">if</span> (action.help !== c.SUPPRESS) {
            names.push(action.getName());
          }
        });
        names = names.join(<span class="hljs-string">' '</span>);
        <span class="hljs-keyword">var</span> msg = <span class="hljs-string">'one of the arguments '</span> + names + <span class="hljs-string">' is required'</span>;
        self.error(msg);
      }
    }
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-46" id="section-46"></a>
</div>
<p>return the updated namespace and the extra arguments</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">return</span> [ namespace, extras ];
};

ArgumentParser.prototype._readArgsFromFiles = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">argStrings</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-47" id="section-47"></a>
</div>
<p>expand arguments referencing files</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
  <span class="hljs-keyword">var</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
  <span class="hljs-keyword">var</span> newArgStrings = [];
  argStrings.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">argString</span>) </span>{
    <span class="hljs-keyword">if</span> (self.fromfilePrefixChars.indexOf(argString[<span class="hljs-number">0</span>]) &lt; <span class="hljs-number">0</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-48" id="section-48"></a>
</div>
<p>for regular arguments, just add them back into the list</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      newArgStrings.push(argString);
    } <span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-49" id="section-49"></a>
</div>
<p>replace arguments referencing files with the file content</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">var</span> argstrs = [];
        <span class="hljs-keyword">var</span> filename = argString.slice(<span class="hljs-number">1</span>);
        <span class="hljs-keyword">var</span> content = fs.readFileSync(filename, <span class="hljs-string">'utf8'</span>);
        content = content.trim().split(<span class="hljs-string">'\n'</span>);
        content.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">argLine</span>) </span>{
          self.convertArgLineToArgs(argLine).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">arg</span>) </span>{
            argstrs.push(arg);
          });
          argstrs = self._readArgsFromFiles(argstrs);
        });
        newArgStrings.push.apply(newArgStrings, argstrs);
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-keyword">return</span> self.error(error.message);
      }
    }
  });
  <span class="hljs-keyword">return</span> newArgStrings;
};

ArgumentParser.prototype.convertArgLineToArgs = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">argLine</span>) </span>{
  <span class="hljs-keyword">return</span> [ argLine ];
};

ArgumentParser.prototype._matchArgument = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">action, regexpArgStrings</span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-50" id="section-50"></a>
</div>
<p>match the pattern for this action to the arg strings</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> regexpNargs = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">'^'</span> + <span class="hljs-keyword">this</span>._getNargsPattern(action));
  <span class="hljs-keyword">var</span> matches = regexpArgStrings.match(regexpNargs);
  <span class="hljs-keyword">var</span> message;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-51" id="section-51"></a>
</div>
<p>throw an exception if we weren't able to find a match</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (!matches) {
    <span class="hljs-keyword">switch</span> (action.nargs) {
      <span class="hljs-comment">/*eslint-disable no-undefined*/</span>
      <span class="hljs-keyword">case</span> <span class="hljs-literal">undefined</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-literal">null</span>:
        message = <span class="hljs-string">'Expected one argument.'</span>;
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> c.OPTIONAL:
        message = <span class="hljs-string">'Expected at most one argument.'</span>;
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> c.ONE_OR_MORE:
        message = <span class="hljs-string">'Expected at least one argument.'</span>;
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">default</span>:
        message = <span class="hljs-string">'Expected %s argument(s)'</span>;
    }

    <span class="hljs-keyword">throw</span> argumentErrorHelper(
      action,
      format(message, action.nargs)
    );
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-52" id="section-52"></a>
</div>
<p>return the number of arguments matched</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">return</span> matches[<span class="hljs-number">1</span>].length;
};

ArgumentParser.prototype._matchArgumentsPartial = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">actions, regexpArgStrings</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-53" id="section-53"></a>
</div>
<p>progressively shorten the actions list by slicing off the
final actions until we find a match</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
  <span class="hljs-keyword">var</span> result = [];
  <span class="hljs-keyword">var</span> actionSlice, pattern, matches;
  <span class="hljs-keyword">var</span> i, j;

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getLength</span>(<span class="hljs-params">string</span>) </span>{
    <span class="hljs-keyword">return</span> string.length;
  }

  <span class="hljs-keyword">for</span> (i = actions.length; i &gt; <span class="hljs-number">0</span>; i--) {
    pattern = <span class="hljs-string">''</span>;
    actionSlice = actions.slice(<span class="hljs-number">0</span>, i);
    <span class="hljs-keyword">for</span> (j = <span class="hljs-number">0</span>; j &lt; actionSlice.length; j++) {
      pattern += self._getNargsPattern(actionSlice[j]);
    }

    pattern = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">'^'</span> + pattern);
    matches = regexpArgStrings.match(pattern);

    <span class="hljs-keyword">if</span> (matches &amp;&amp; matches.length &gt; <span class="hljs-number">0</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-54" id="section-54"></a>
</div>
<p>need only groups</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      matches = matches.splice(<span class="hljs-number">1</span>);
      result = result.concat(matches.map(getLength));
      <span class="hljs-keyword">break</span>;
    }
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-55" id="section-55"></a>
</div>
<p>return the list of arg string counts</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">return</span> result;
};

ArgumentParser.prototype._parseOptional = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">argString</span>) </span>{
  <span class="hljs-keyword">var</span> action, optionString, argExplicit, optionTuples;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-56" id="section-56"></a>
</div>
<p>if it's an empty string, it was meant to be a positional</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (!argString) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-57" id="section-57"></a>
</div>
<p>if it doesn't start with a prefix, it was meant to be positional</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.prefixChars.indexOf(argString[<span class="hljs-number">0</span>]) &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-58" id="section-58"></a>
</div>
<p>if the option string is present in the parser, return the action</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._optionStringActions[argString]) {
    <span class="hljs-keyword">return</span> [ <span class="hljs-keyword">this</span>._optionStringActions[argString], argString, <span class="hljs-literal">null</span> ];
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-59" id="section-59"></a>
</div>
<p>if it's just a single character, it was meant to be positional</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (argString.length === <span class="hljs-number">1</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-60" id="section-60"></a>
</div>
<p>if the option string before the &quot;=&quot; is present, return the action</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (argString.indexOf(<span class="hljs-string">'='</span>) &gt;= <span class="hljs-number">0</span>) {
    optionString = argString.split(<span class="hljs-string">'='</span>, <span class="hljs-number">1</span>)[<span class="hljs-number">0</span>];
    argExplicit = argString.slice(optionString.length + <span class="hljs-number">1</span>);

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._optionStringActions[optionString]) {
      action = <span class="hljs-keyword">this</span>._optionStringActions[optionString];
      <span class="hljs-keyword">return</span> [ action, optionString, argExplicit ];
    }
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-61" id="section-61"></a>
</div>
<p>search through all possible prefixes of the option string
and all actions in the parser for possible interpretations</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  optionTuples = <span class="hljs-keyword">this</span>._getOptionTuples(argString);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-62" id="section-62"></a>
</div>
<p>if multiple actions match, the option string was ambiguous</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (optionTuples.length &gt; <span class="hljs-number">1</span>) {
    <span class="hljs-keyword">var</span> optionStrings = optionTuples.map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">optionTuple</span>) </span>{
      <span class="hljs-keyword">return</span> optionTuple[<span class="hljs-number">1</span>];
    });
    <span class="hljs-keyword">this</span>.error(format(
          <span class="hljs-string">'Ambiguous option: "%s" could match %s.'</span>,
          argString, optionStrings.join(<span class="hljs-string">', '</span>)
    ));
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-63" id="section-63"></a>
</div>
<p>if exactly one action matched, this segmentation is good,
so return the parsed action</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (optionTuples.length === <span class="hljs-number">1</span>) {
    <span class="hljs-keyword">return</span> optionTuples[<span class="hljs-number">0</span>];
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-64" id="section-64"></a>
</div>
<p>if it was not found as an option, but it looks like a negative
number, it was meant to be positional
unless there are negative-number-like options</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (argString.match(<span class="hljs-keyword">this</span>._regexpNegativeNumber)) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._hasNegativeNumberOptionals.some(<span class="hljs-built_in">Boolean</span>)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-65" id="section-65"></a>
</div>
<p>if it contains a space, it was meant to be a positional</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (argString.search(<span class="hljs-string">' '</span>) &gt;= <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-66" id="section-66"></a>
</div>
<p>it was meant to be an optional but there is no such option
in this parser (though it might be a valid option in a subparser)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">return</span> [ <span class="hljs-literal">null</span>, argString, <span class="hljs-literal">null</span> ];
};

ArgumentParser.prototype._getOptionTuples = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">optionString</span>) </span>{
  <span class="hljs-keyword">var</span> result = [];
  <span class="hljs-keyword">var</span> chars = <span class="hljs-keyword">this</span>.prefixChars;
  <span class="hljs-keyword">var</span> optionPrefix;
  <span class="hljs-keyword">var</span> argExplicit;
  <span class="hljs-keyword">var</span> action;
  <span class="hljs-keyword">var</span> actionOptionString;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-67" id="section-67"></a>
</div>
<p>option strings starting with two prefix characters are only split at
the '='</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (chars.indexOf(optionString[<span class="hljs-number">0</span>]) &gt;= <span class="hljs-number">0</span> &amp;&amp; chars.indexOf(optionString[<span class="hljs-number">1</span>]) &gt;= <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">if</span> (optionString.indexOf(<span class="hljs-string">'='</span>) &gt;= <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">var</span> optionStringSplit = optionString.split(<span class="hljs-string">'='</span>, <span class="hljs-number">1</span>);

      optionPrefix = optionStringSplit[<span class="hljs-number">0</span>];
      argExplicit = optionStringSplit[<span class="hljs-number">1</span>];
    } <span class="hljs-keyword">else</span> {
      optionPrefix = optionString;
      argExplicit = <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">for</span> (actionOptionString <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>._optionStringActions) {
      <span class="hljs-keyword">if</span> (actionOptionString.substr(<span class="hljs-number">0</span>, optionPrefix.length) === optionPrefix) {
        action = <span class="hljs-keyword">this</span>._optionStringActions[actionOptionString];
        result.push([ action, actionOptionString, argExplicit ]);
      }
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-68" id="section-68"></a>
</div>
<p>single character options can be concatenated with their arguments
but multiple character options always have to have their argument
separate</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (chars.indexOf(optionString[<span class="hljs-number">0</span>]) &gt;= <span class="hljs-number">0</span> &amp;&amp; chars.indexOf(optionString[<span class="hljs-number">1</span>]) &lt; <span class="hljs-number">0</span>) {
    optionPrefix = optionString;
    argExplicit = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">var</span> optionPrefixShort = optionString.substr(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>);
    <span class="hljs-keyword">var</span> argExplicitShort = optionString.substr(<span class="hljs-number">2</span>);

    <span class="hljs-keyword">for</span> (actionOptionString <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>._optionStringActions) {
      <span class="hljs-keyword">if</span> (!$$.has(<span class="hljs-keyword">this</span>._optionStringActions, actionOptionString)) <span class="hljs-keyword">continue</span>;

      action = <span class="hljs-keyword">this</span>._optionStringActions[actionOptionString];
      <span class="hljs-keyword">if</span> (actionOptionString === optionPrefixShort) {
        result.push([ action, actionOptionString, argExplicitShort ]);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (actionOptionString.substr(<span class="hljs-number">0</span>, optionPrefix.length) === optionPrefix) {
        result.push([ action, actionOptionString, argExplicit ]);
      }
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-69" id="section-69"></a>
</div>
<p>shouldn't ever get here</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(format(<span class="hljs-string">'Unexpected option string: %s.'</span>, optionString));
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-70" id="section-70"></a>
</div>
<p>return the collected option tuples</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">return</span> result;
};

ArgumentParser.prototype._getNargsPattern = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">action</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-71" id="section-71"></a>
</div>
<p>in all examples below, we have to allow for '--' args
which are represented as '-' in the pattern</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> regexpNargs;

  <span class="hljs-keyword">switch</span> (action.nargs) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-72" id="section-72"></a>
</div>
<p>the default (null) is assumed to be a single argument</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">case</span> <span class="hljs-literal">undefined</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-literal">null</span>:
      regexpNargs = <span class="hljs-string">'(-*A-*)'</span>;
      <span class="hljs-keyword">break</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-73" id="section-73"></a>
</div>
<p>allow zero or more arguments</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">case</span> c.OPTIONAL:
      regexpNargs = <span class="hljs-string">'(-*A?-*)'</span>;
      <span class="hljs-keyword">break</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-74" id="section-74"></a>
</div>
<p>allow zero or more arguments</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">case</span> c.ZERO_OR_MORE:
      regexpNargs = <span class="hljs-string">'(-*[A-]*)'</span>;
      <span class="hljs-keyword">break</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-75" id="section-75"></a>
</div>
<p>allow one or more arguments</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">case</span> c.ONE_OR_MORE:
      regexpNargs = <span class="hljs-string">'(-*A[A-]*)'</span>;
      <span class="hljs-keyword">break</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-76" id="section-76"></a>
</div>
<p>allow any number of options or arguments</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">case</span> c.REMAINDER:
      regexpNargs = <span class="hljs-string">'([-AO]*)'</span>;
      <span class="hljs-keyword">break</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-77" id="section-77"></a>
</div>
<p>allow one argument followed by any number of options or arguments</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">case</span> c.PARSER:
      regexpNargs = <span class="hljs-string">'(-*A[-AO]*)'</span>;
      <span class="hljs-keyword">break</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-78" id="section-78"></a>
</div>
<p>all others should be integers</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">default</span>:
      regexpNargs = <span class="hljs-string">'(-*'</span> + $$.repeat(<span class="hljs-string">'-*A'</span>, action.nargs) + <span class="hljs-string">'-*)'</span>;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-79" id="section-79"></a>
</div>
<p>if this is an optional action, -- is not allowed</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (action.isOptional()) {
    regexpNargs = regexpNargs.replace(<span class="hljs-regexp">/-\*/g</span>, <span class="hljs-string">''</span>);
    regexpNargs = regexpNargs.replace(<span class="hljs-regexp">/-/g</span>, <span class="hljs-string">''</span>);
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-80" id="section-80"></a>
</div>
<p>return the pattern</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">return</span> regexpNargs;
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-81" id="section-81"></a>
</div>
<p>Value conversion methods</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
ArgumentParser.prototype._getValues = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">action, argStrings</span>) </span>{
  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-82" id="section-82"></a>
</div>
<p>for everything but PARSER args, strip out '--'</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (action.nargs !== c.PARSER &amp;&amp; action.nargs !== c.REMAINDER) {
    argStrings = argStrings.filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">arrayElement</span>) </span>{
      <span class="hljs-keyword">return</span> arrayElement !== <span class="hljs-string">'--'</span>;
    });
  }

  <span class="hljs-keyword">var</span> value, argString;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-83" id="section-83"></a>
</div>
<p>optional argument produces a default when not present</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (argStrings.length === <span class="hljs-number">0</span> &amp;&amp; action.nargs === c.OPTIONAL) {

    value = (action.isOptional()) ? action.constant : action.defaultValue;

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> (value) === <span class="hljs-string">'string'</span>) {
      value = <span class="hljs-keyword">this</span>._getValue(action, value);
      <span class="hljs-keyword">this</span>._checkValue(action, value);
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-84" id="section-84"></a>
</div>
<p>when nargs='*' on a positional, if there were no command-line
args, use the default if it is anything other than None</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (argStrings.length === <span class="hljs-number">0</span> &amp;&amp; action.nargs === c.ZERO_OR_MORE &amp;&amp;
    action.optionStrings.length === <span class="hljs-number">0</span>) {

    value = (action.defaultValue || argStrings);
    <span class="hljs-keyword">this</span>._checkValue(action, value);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-85" id="section-85"></a>
</div>
<p>single argument or optional argument produces a single value</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (argStrings.length === <span class="hljs-number">1</span> &amp;&amp;
        (!action.nargs || action.nargs === c.OPTIONAL)) {

    argString = argStrings[<span class="hljs-number">0</span>];
    value = <span class="hljs-keyword">this</span>._getValue(action, argString);
    <span class="hljs-keyword">this</span>._checkValue(action, value);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-86" id="section-86"></a>
</div>
<p>REMAINDER arguments convert all values, checking none</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (action.nargs === c.REMAINDER) {
    value = argStrings.map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
      <span class="hljs-keyword">return</span> self._getValue(action, v);
    });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-87" id="section-87"></a>
</div>
<p>PARSER arguments convert all values, but check only the first</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (action.nargs === c.PARSER) {
    value = argStrings.map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
      <span class="hljs-keyword">return</span> self._getValue(action, v);
    });
    <span class="hljs-keyword">this</span>._checkValue(action, value[<span class="hljs-number">0</span>]);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-88" id="section-88"></a>
</div>
<p>all other types of nargs produce a list</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  } <span class="hljs-keyword">else</span> {
    value = argStrings.map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
      <span class="hljs-keyword">return</span> self._getValue(action, v);
    });
    value.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
      self._checkValue(action, v);
    });
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-89" id="section-89"></a>
</div>
<p>return the converted value</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">return</span> value;
};

ArgumentParser.prototype._getValue = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">action, argString</span>) </span>{
  <span class="hljs-keyword">var</span> result;

  <span class="hljs-keyword">var</span> typeFunction = <span class="hljs-keyword">this</span>._registryGet(<span class="hljs-string">'type'</span>, action.type, action.type);
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> typeFunction !== <span class="hljs-string">'function'</span>) {
    <span class="hljs-keyword">var</span> message = format(<span class="hljs-string">'%s is not callable'</span>, typeFunction);
    <span class="hljs-keyword">throw</span> argumentErrorHelper(action, message);
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-90" id="section-90"></a>
</div>
<p>convert the value to the appropriate type</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">try</span> {
    result = typeFunction(argString);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-91" id="section-91"></a>
</div>
<p>ArgumentTypeErrors indicate errors
If action.type is not a registered string, it is a function
Try to deduce its name for inclusion in the error message
Failing that, include the error message it raised.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-keyword">var</span> name = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> action.type === <span class="hljs-string">'string'</span>) {
      name = action.type;
    } <span class="hljs-keyword">else</span> {
      name = action.type.name || action.type.displayName || <span class="hljs-string">'&lt;function&gt;'</span>;
    }
    <span class="hljs-keyword">var</span> msg = format(<span class="hljs-string">'Invalid %s value: %s'</span>, name, argString);
    <span class="hljs-keyword">if</span> (name === <span class="hljs-string">'&lt;function&gt;'</span>) { msg += <span class="hljs-string">'\n'</span> + e.message; }
    <span class="hljs-keyword">throw</span> argumentErrorHelper(action, msg);
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-92" id="section-92"></a>
</div>
<p>return the converted value</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">return</span> result;
};

ArgumentParser.prototype._checkValue = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">action, value</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-93" id="section-93"></a>
</div>
<p>converted value must be one of the choices (if specified)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> choices = action.choices;
  <span class="hljs-keyword">if</span> (choices) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-94" id="section-94"></a>
</div>
<p>choise for argument can by array or string</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> ((<span class="hljs-keyword">typeof</span> choices === <span class="hljs-string">'string'</span> || <span class="hljs-built_in">Array</span>.isArray(choices)) &amp;&amp;
        choices.indexOf(value) !== <span class="hljs-number">-1</span>) {
      <span class="hljs-keyword">return</span>;
    }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-95" id="section-95"></a>
</div>
<p>choise for subparsers can by only hash</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> choices === <span class="hljs-string">'object'</span> &amp;&amp; !<span class="hljs-built_in">Array</span>.isArray(choices) &amp;&amp; choices[value]) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> choices === <span class="hljs-string">'string'</span>) {
      choices = choices.split(<span class="hljs-string">''</span>).join(<span class="hljs-string">', '</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(choices)) {
      choices =  choices.join(<span class="hljs-string">', '</span>);
    } <span class="hljs-keyword">else</span> {
      choices =  <span class="hljs-built_in">Object</span>.keys(choices).join(<span class="hljs-string">', '</span>);
    }
    <span class="hljs-keyword">var</span> message = format(<span class="hljs-string">'Invalid choice: %s (choose from [%s])'</span>, value, choices);
    <span class="hljs-keyword">throw</span> argumentErrorHelper(action, message);
  }
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-96" id="section-96"></a>
</div>
<p>Help formatting methods</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-97" id="section-97"></a>
</div>
<div class="dox">
<div class="summary">
<p>ArgumentParser#formatUsage -&gt; string</p>
</div>
<div class="body">
<p>Return usage string</p>
<p>See also <a href="http://docs.python.org/dev/library/argparse.html#printing-help">original guide</a></p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">ArgumentParser.prototype.formatUsage = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> formatter = <span class="hljs-keyword">this</span>._getFormatter();
  formatter.addUsage(<span class="hljs-keyword">this</span>.usage, <span class="hljs-keyword">this</span>._actions, <span class="hljs-keyword">this</span>._mutuallyExclusiveGroups);
  <span class="hljs-keyword">return</span> formatter.formatHelp();
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-98" id="section-98"></a>
</div>
<div class="dox">
<div class="summary">
<p>ArgumentParser#formatHelp -&gt; string</p>
</div>
<div class="body">
<p>Return help</p>
<p>See also <a href="http://docs.python.org/dev/library/argparse.html#printing-help">original guide</a></p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">ArgumentParser.prototype.formatHelp = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> formatter = <span class="hljs-keyword">this</span>._getFormatter();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-99" id="section-99"></a>
</div>
<p>usage</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  formatter.addUsage(<span class="hljs-keyword">this</span>.usage, <span class="hljs-keyword">this</span>._actions, <span class="hljs-keyword">this</span>._mutuallyExclusiveGroups);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-100" id="section-100"></a>
</div>
<p>description</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  formatter.addText(<span class="hljs-keyword">this</span>.description);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-101" id="section-101"></a>
</div>
<p>positionals, optionals and user-defined groups</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">this</span>._actionGroups.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">actionGroup</span>) </span>{
    formatter.startSection(actionGroup.title);
    formatter.addText(actionGroup.description);
    formatter.addArguments(actionGroup._groupActions);
    formatter.endSection();
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-102" id="section-102"></a>
</div>
<p>epilog</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  formatter.addText(<span class="hljs-keyword">this</span>.epilog);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-103" id="section-103"></a>
</div>
<p>determine help from format above</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">return</span> formatter.formatHelp();
};

ArgumentParser.prototype._getFormatter = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> FormatterClass = <span class="hljs-keyword">this</span>.formatterClass;
  <span class="hljs-keyword">var</span> formatter = <span class="hljs-keyword">new</span> FormatterClass({ <span class="hljs-attr">prog</span>: <span class="hljs-keyword">this</span>.prog });
  <span class="hljs-keyword">return</span> formatter;
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-104" id="section-104"></a>
</div>
<p>Print functions</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-105" id="section-105"></a>
</div>
<div class="dox">
<div class="summary">
<p>ArgumentParser#printUsage() -&gt; Void</p>
</div>
<div class="body">
<p>Print usage</p>
<p>See also <a href="http://docs.python.org/dev/library/argparse.html#printing-help">original guide</a></p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">ArgumentParser.prototype.printUsage = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">this</span>._printMessage(<span class="hljs-keyword">this</span>.formatUsage());
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-106" id="section-106"></a>
</div>
<div class="dox">
<div class="summary">
<p>ArgumentParser#printHelp() -&gt; Void</p>
</div>
<div class="body">
<p>Print help</p>
<p>See also <a href="http://docs.python.org/dev/library/argparse.html#printing-help">original guide</a></p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">ArgumentParser.prototype.printHelp = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">this</span>._printMessage(<span class="hljs-keyword">this</span>.formatHelp());
};

ArgumentParser.prototype._printMessage = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, stream</span>) </span>{
  <span class="hljs-keyword">if</span> (!stream) {
    stream = process.stdout;
  }
  <span class="hljs-keyword">if</span> (message) {
    stream.write(<span class="hljs-string">''</span> + message);
  }
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-107" id="section-107"></a>
</div>
<p>Exit functions</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-108" id="section-108"></a>
</div>
<div class="dox">
<div class="summary">
<p>ArgumentParser#exit(status=0, message) -&gt; Void</p>
<ul>
<li>status (int): exit status</li>
<li>message (string): message</li>
</ul>
</div>
<div class="body">
<p>Print message in stderr/stdout and exit program</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">ArgumentParser.prototype.exit = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">status, message</span>) </span>{
  <span class="hljs-keyword">if</span> (message) {
    <span class="hljs-keyword">if</span> (status === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">this</span>._printMessage(message);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">this</span>._printMessage(message, process.stderr);
    }
  }

  process.exit(status);
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-109" id="section-109"></a>
</div>
<div class="dox">
<div class="summary">
<p>ArgumentParser#error(message) -&gt; Void</p>
<ul>
<li>err (Error|string): message</li>
</ul>
</div>
<div class="body">
<p>Error method Prints a usage message incorporating the message to stderr and
exits. If you override this in a subclass,
it should not return -- it should
either exit or throw an exception.</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">ArgumentParser.prototype.error = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>{
  <span class="hljs-keyword">var</span> message;
  <span class="hljs-keyword">if</span> (err <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.debug === <span class="hljs-literal">true</span>) {
      <span class="hljs-keyword">throw</span> err;
    }
    message = err.message;
  } <span class="hljs-keyword">else</span> {
    message = err;
  }
  <span class="hljs-keyword">var</span> msg = format(<span class="hljs-string">'%s: error: %s'</span>, <span class="hljs-keyword">this</span>.prog, message) + c.EOL;

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.debug === <span class="hljs-literal">true</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(msg);
  }

  <span class="hljs-keyword">this</span>.printUsage(process.stderr);

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.exit(<span class="hljs-number">2</span>, msg);
};

<span class="hljs-built_in">module</span>.exports = ArgumentParser;

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
