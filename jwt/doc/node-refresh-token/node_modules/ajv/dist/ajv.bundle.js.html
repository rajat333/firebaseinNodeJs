<!DOCTYPE html>
<html>
<head>
  <title>ajv.bundle.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../doc-style.css" />
  <script src="../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../";
    var thisFile = "node-refresh-token\\node_modules\\ajv\\dist\\ajv.bundle.js";
    var defaultSidebar = true;
  </script>
  <script src="../../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>ajv.bundle.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">f</span>)</span>{<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> exports===<span class="hljs-string">"object"</span>&amp;&amp;<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">module</span>!==<span class="hljs-string">"undefined"</span>){<span class="hljs-built_in">module</span>.exports=f()}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> define===<span class="hljs-string">"function"</span>&amp;&amp;define.amd){define([],f)}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">var</span> g;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">window</span>!==<span class="hljs-string">"undefined"</span>){g=<span class="hljs-built_in">window</span>}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> global!==<span class="hljs-string">"undefined"</span>){g=global}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> self!==<span class="hljs-string">"undefined"</span>){g=self}<span class="hljs-keyword">else</span>{g=<span class="hljs-keyword">this</span>}g.Ajv = f()}})(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> define,<span class="hljs-built_in">module</span>,exports;<span class="hljs-keyword">return</span> (<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">e</span>(<span class="hljs-params">t,n,r</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">s</span>(<span class="hljs-params">o,u</span>)</span>{<span class="hljs-keyword">if</span>(!n[o]){<span class="hljs-keyword">if</span>(!t[o]){<span class="hljs-keyword">var</span> a=<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">require</span>==<span class="hljs-string">"function"</span>&amp;&amp;<span class="hljs-built_in">require</span>;<span class="hljs-keyword">if</span>(!u&amp;&amp;a)<span class="hljs-keyword">return</span> a(o,!<span class="hljs-number">0</span>);<span class="hljs-keyword">if</span>(i)<span class="hljs-keyword">return</span> i(o,!<span class="hljs-number">0</span>);<span class="hljs-keyword">var</span> f=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Cannot find module '"</span>+o+<span class="hljs-string">"'"</span>);<span class="hljs-keyword">throw</span> f.code=<span class="hljs-string">"MODULE_NOT_FOUND"</span>,f}<span class="hljs-keyword">var</span> l=n[o]={<span class="hljs-attr">exports</span>:{}};t[o][<span class="hljs-number">0</span>].call(l.exports,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">var</span> n=t[o][<span class="hljs-number">1</span>][e];<span class="hljs-keyword">return</span> s(n?n:e)},l,l.exports,e,t,n,r)}<span class="hljs-keyword">return</span> n[o].exports}<span class="hljs-keyword">var</span> i=<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">require</span>==<span class="hljs-string">"function"</span>&amp;&amp;<span class="hljs-built_in">require</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> o=<span class="hljs-number">0</span>;o&lt;r.length;o++)s(r[o]);<span class="hljs-keyword">return</span> s})({<span class="hljs-number">1</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;

<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">setup</span>: setupAsync,
  <span class="hljs-attr">compile</span>: compileAsync
};


<span class="hljs-keyword">var</span> util = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./compile/util'</span>);

<span class="hljs-keyword">var</span> ASYNC = {
  <span class="hljs-string">'*'</span>: checkGenerators,
  <span class="hljs-string">'co*'</span>: checkGenerators,
  <span class="hljs-string">'es7'</span>: checkAsyncFunction
};

<span class="hljs-keyword">var</span> TRANSPILE = {
  <span class="hljs-string">'nodent'</span>: getNodent,
  <span class="hljs-string">'regenerator'</span>: getRegenerator
};

<span class="hljs-keyword">var</span> MODES = [
  { <span class="hljs-attr">async</span>: <span class="hljs-string">'co*'</span> },
  { <span class="hljs-attr">async</span>: <span class="hljs-string">'es7'</span>, <span class="hljs-attr">transpile</span>: <span class="hljs-string">'nodent'</span> },
  { <span class="hljs-attr">async</span>: <span class="hljs-string">'co*'</span>, <span class="hljs-attr">transpile</span>: <span class="hljs-string">'regenerator'</span> }
];


<span class="hljs-keyword">var</span> regenerator, nodent;


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setupAsync</span>(<span class="hljs-params">opts, required</span>) </span>{
  <span class="hljs-keyword">if</span> (required !== <span class="hljs-literal">false</span>) required = <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">var</span> <span class="hljs-keyword">async</span> = opts.async
    , transpile = opts.transpile
    , check;

  <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">typeof</span> transpile) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'string'</span>:
      <span class="hljs-keyword">var</span> get = TRANSPILE[transpile];
      <span class="hljs-keyword">if</span> (!get) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'bad transpiler: '</span> + transpile);
      <span class="hljs-keyword">return</span> (opts._transpileFunc = get(opts, required));
    <span class="hljs-keyword">case</span> <span class="hljs-string">'undefined'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'boolean'</span>:
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">async</span> == <span class="hljs-string">'string'</span>) {
        check = ASYNC[<span class="hljs-keyword">async</span>];
        <span class="hljs-keyword">if</span> (!check) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'bad async mode: '</span> + <span class="hljs-keyword">async</span>);
        <span class="hljs-keyword">return</span> (opts.transpile = check(opts, required));
      }

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;MODES.length; i++) {
        <span class="hljs-keyword">var</span> _opts = MODES[i];
        <span class="hljs-keyword">if</span> (setupAsync(_opts, <span class="hljs-literal">false</span>)) {
          util.copy(_opts, opts);
          <span class="hljs-keyword">return</span> opts.transpile;
        }
      }
      <span class="hljs-comment">/* istanbul ignore next */</span>
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'generators, nodent and regenerator are not available'</span>);
    <span class="hljs-keyword">case</span> <span class="hljs-string">'function'</span>:
      <span class="hljs-keyword">return</span> (opts._transpileFunc = opts.transpile);
    <span class="hljs-keyword">default</span>:
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'bad transpiler: '</span> + transpile);
  }
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkGenerators</span>(<span class="hljs-params">opts, required</span>) </span>{
  <span class="hljs-comment">/* jshint evil: true */</span>
  <span class="hljs-keyword">try</span> {
    (<span class="hljs-keyword">new</span> <span class="hljs-built_in">Function</span>(<span class="hljs-string">'(function*(){})()'</span>))();
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  } <span class="hljs-keyword">catch</span>(e) {
    <span class="hljs-comment">/* istanbul ignore next */</span>
    <span class="hljs-keyword">if</span> (required) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'generators not supported'</span>);
  }
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkAsyncFunction</span>(<span class="hljs-params">opts, required</span>) </span>{
  <span class="hljs-comment">/* jshint evil: true */</span>
  <span class="hljs-keyword">try</span> {
    (<span class="hljs-keyword">new</span> <span class="hljs-built_in">Function</span>(<span class="hljs-string">'(async function(){})()'</span>))();
    <span class="hljs-comment">/* istanbul ignore next */</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  } <span class="hljs-keyword">catch</span>(e) {
    <span class="hljs-keyword">if</span> (required) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'es7 async functions not supported'</span>);
  }
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRegenerator</span>(<span class="hljs-params">opts, required</span>) </span>{
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">if</span> (!regenerator) {
      <span class="hljs-keyword">var</span> name = <span class="hljs-string">'regenerator'</span>;
      regenerator = <span class="hljs-built_in">require</span>(name);
      regenerator.runtime();
    }
    <span class="hljs-keyword">if</span> (!opts.async || opts.async === <span class="hljs-literal">true</span>)
      opts.async = <span class="hljs-string">'es7'</span>;
    <span class="hljs-keyword">return</span> regeneratorTranspile;
  } <span class="hljs-keyword">catch</span>(e) {
    <span class="hljs-comment">/* istanbul ignore next */</span>
    <span class="hljs-keyword">if</span> (required) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'regenerator not available'</span>);
  }
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">regeneratorTranspile</span>(<span class="hljs-params">code</span>) </span>{
  <span class="hljs-keyword">return</span> regenerator.compile(code).code;
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getNodent</span>(<span class="hljs-params">opts, required</span>) </span>{
  <span class="hljs-comment">/* jshint evil: true */</span>
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">if</span> (!nodent) {
      <span class="hljs-keyword">var</span> name = <span class="hljs-string">'nodent'</span>;
      nodent = <span class="hljs-built_in">require</span>(name)({ <span class="hljs-attr">log</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">dontInstallRequireHook</span>: <span class="hljs-literal">true</span> });
    }
    <span class="hljs-keyword">if</span> (opts.async != <span class="hljs-string">'es7'</span>) {
      <span class="hljs-keyword">if</span> (opts.async &amp;&amp; opts.async !== <span class="hljs-literal">true</span>) <span class="hljs-built_in">console</span>.warn(<span class="hljs-string">'nodent transpiles only es7 async functions'</span>);
      opts.async = <span class="hljs-string">'es7'</span>;
    }
    <span class="hljs-keyword">return</span> nodentTranspile;
  } <span class="hljs-keyword">catch</span>(e) {
    <span class="hljs-comment">/* istanbul ignore next */</span>
    <span class="hljs-keyword">if</span> (required) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'nodent not available'</span>);
  }
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">nodentTranspile</span>(<span class="hljs-params">code</span>) </span>{
  <span class="hljs-keyword">return</span> nodent.compile(code, <span class="hljs-string">''</span>, { <span class="hljs-attr">promises</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">sourcemap</span>: <span class="hljs-literal">false</span> }).code;
}


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<div class="dox">
<div class="summary">
<p>Creates validating function for passed schema with asynchronous loading of missing schemas.
<code>loadSchema</code> option should be a function that accepts schema uri and node-style callback.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">schema</span>
<span class="dox_type">Object</span>
<span>schema object
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>node-style callback, it is always called with 2 parameters: error (or null) and validating function.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileAsync</span>(<span class="hljs-params">schema, callback</span>) </span>{
  <span class="hljs-comment">/* eslint no-shadow: 0 */</span>
  <span class="hljs-comment">/* jshint validthis: true */</span>
  <span class="hljs-keyword">var</span> schemaObj;
  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
  <span class="hljs-keyword">try</span> {
    schemaObj = <span class="hljs-keyword">this</span>._addSchema(schema);
  } <span class="hljs-keyword">catch</span>(e) {
    setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ callback(e); });
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-keyword">if</span> (schemaObj.validate) {
    setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ callback(<span class="hljs-literal">null</span>, schemaObj.validate); });
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>._opts.loadSchema != <span class="hljs-string">'function'</span>)
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'options.loadSchema should be a function'</span>);
    _compileAsync(schema, callback, <span class="hljs-literal">true</span>);
  }


  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_compileAsync</span>(<span class="hljs-params">schema, callback, firstCall</span>) </span>{
    <span class="hljs-keyword">var</span> validate;
    <span class="hljs-keyword">try</span> { validate = self.compile(schema); }
    <span class="hljs-keyword">catch</span>(e) {
      <span class="hljs-keyword">if</span> (e.missingSchema) loadMissingSchema(e);
      <span class="hljs-keyword">else</span> deferCallback(e);
      <span class="hljs-keyword">return</span>;
    }
    deferCallback(<span class="hljs-literal">null</span>, validate);

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadMissingSchema</span>(<span class="hljs-params">e</span>) </span>{
      <span class="hljs-keyword">var</span> ref = e.missingSchema;
      <span class="hljs-keyword">if</span> (self._refs[ref] || self._schemas[ref])
        <span class="hljs-keyword">return</span> callback(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Schema '</span> + ref + <span class="hljs-string">' is loaded but '</span> + e.missingRef + <span class="hljs-string">' cannot be resolved'</span>));
      <span class="hljs-keyword">var</span> _callbacks = self._loadingSchemas[ref];
      <span class="hljs-keyword">if</span> (_callbacks) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> _callbacks == <span class="hljs-string">'function'</span>)
          self._loadingSchemas[ref] = [_callbacks, schemaLoaded];
        <span class="hljs-keyword">else</span>
          _callbacks[_callbacks.length] = schemaLoaded;
      } <span class="hljs-keyword">else</span> {
        self._loadingSchemas[ref] = schemaLoaded;
        self._opts.loadSchema(ref, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err, sch</span>) </span>{
          <span class="hljs-keyword">var</span> _callbacks = self._loadingSchemas[ref];
          <span class="hljs-keyword">delete</span> self._loadingSchemas[ref];
          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> _callbacks == <span class="hljs-string">'function'</span>) {
            _callbacks(err, sch);
          } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;_callbacks.length; i++)
              _callbacks[i](err, sch);
          }
        });
      }

      <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">schemaLoaded</span>(<span class="hljs-params">err, sch</span>) </span>{
        <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">return</span> callback(err);
        <span class="hljs-keyword">if</span> (!(self._refs[ref] || self._schemas[ref])) {
          <span class="hljs-keyword">try</span> {
            self.addSchema(sch, ref);
          } <span class="hljs-keyword">catch</span>(e) {
            callback(e);
            <span class="hljs-keyword">return</span>;
          }
        }
        _compileAsync(schema, callback);
      }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deferCallback</span>(<span class="hljs-params">err, validate</span>) </span>{
      <span class="hljs-keyword">if</span> (firstCall) setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ callback(err, validate); });
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> callback(err, validate);
    }
  }
}

},{<span class="hljs-string">"./compile/util"</span>:<span class="hljs-number">11</span>}],<span class="hljs-number">2</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;


<span class="hljs-keyword">var</span> Cache = <span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Cache</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">this</span>._cache = {};
};


Cache.prototype.put = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Cache_put</span>(<span class="hljs-params">key, value</span>) </span>{
  <span class="hljs-keyword">this</span>._cache[key] = value;
};


Cache.prototype.get = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Cache_get</span>(<span class="hljs-params">key</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._cache[key];
};


Cache.prototype.del = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Cache_del</span>(<span class="hljs-params">key</span>) </span>{
  <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._cache[key];
};


Cache.prototype.clear = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Cache_clear</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">this</span>._cache = {};
};

},{}],<span class="hljs-number">3</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<p>all requires must be explicit because browserify won't work with dynamic requires</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-string">'$ref'</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'../dotjs/ref'</span>),
  <span class="hljs-attr">allOf</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'../dotjs/allOf'</span>),
  <span class="hljs-attr">anyOf</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'../dotjs/anyOf'</span>),
  <span class="hljs-attr">dependencies</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'../dotjs/dependencies'</span>),
  <span class="hljs-string">'enum'</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'../dotjs/enum'</span>),
  <span class="hljs-attr">format</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'../dotjs/format'</span>),
  <span class="hljs-attr">items</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'../dotjs/items'</span>),
  <span class="hljs-attr">maximum</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'../dotjs/_limit'</span>),
  <span class="hljs-attr">minimum</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'../dotjs/_limit'</span>),
  <span class="hljs-attr">maxItems</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'../dotjs/_limitItems'</span>),
  <span class="hljs-attr">minItems</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'../dotjs/_limitItems'</span>),
  <span class="hljs-attr">maxLength</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'../dotjs/_limitLength'</span>),
  <span class="hljs-attr">minLength</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'../dotjs/_limitLength'</span>),
  <span class="hljs-attr">maxProperties</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'../dotjs/_limitProperties'</span>),
  <span class="hljs-attr">minProperties</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'../dotjs/_limitProperties'</span>),
  <span class="hljs-attr">multipleOf</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'../dotjs/multipleOf'</span>),
  <span class="hljs-attr">not</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'../dotjs/not'</span>),
  <span class="hljs-attr">oneOf</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'../dotjs/oneOf'</span>),
  <span class="hljs-attr">pattern</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'../dotjs/pattern'</span>),
  <span class="hljs-attr">properties</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'../dotjs/properties'</span>),
  <span class="hljs-attr">required</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'../dotjs/required'</span>),
  <span class="hljs-attr">uniqueItems</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'../dotjs/uniqueItems'</span>),
  <span class="hljs-attr">validate</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'../dotjs/validate'</span>)
};

},{<span class="hljs-string">"../dotjs/_limit"</span>:<span class="hljs-number">14</span>,<span class="hljs-string">"../dotjs/_limitItems"</span>:<span class="hljs-number">15</span>,<span class="hljs-string">"../dotjs/_limitLength"</span>:<span class="hljs-number">16</span>,<span class="hljs-string">"../dotjs/_limitProperties"</span>:<span class="hljs-number">17</span>,<span class="hljs-string">"../dotjs/allOf"</span>:<span class="hljs-number">18</span>,<span class="hljs-string">"../dotjs/anyOf"</span>:<span class="hljs-number">19</span>,<span class="hljs-string">"../dotjs/dependencies"</span>:<span class="hljs-number">22</span>,<span class="hljs-string">"../dotjs/enum"</span>:<span class="hljs-number">23</span>,<span class="hljs-string">"../dotjs/format"</span>:<span class="hljs-number">24</span>,<span class="hljs-string">"../dotjs/items"</span>:<span class="hljs-number">25</span>,<span class="hljs-string">"../dotjs/multipleOf"</span>:<span class="hljs-number">26</span>,<span class="hljs-string">"../dotjs/not"</span>:<span class="hljs-number">27</span>,<span class="hljs-string">"../dotjs/oneOf"</span>:<span class="hljs-number">28</span>,<span class="hljs-string">"../dotjs/pattern"</span>:<span class="hljs-number">29</span>,<span class="hljs-string">"../dotjs/properties"</span>:<span class="hljs-number">31</span>,<span class="hljs-string">"../dotjs/ref"</span>:<span class="hljs-number">32</span>,<span class="hljs-string">"../dotjs/required"</span>:<span class="hljs-number">33</span>,<span class="hljs-string">"../dotjs/uniqueItems"</span>:<span class="hljs-number">35</span>,<span class="hljs-string">"../dotjs/validate"</span>:<span class="hljs-number">36</span>}],<span class="hljs-number">4</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;

<span class="hljs-comment">/*eslint complexity: 0*/</span>

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">equal</span>(<span class="hljs-params">a, b</span>) </span>{
  <span class="hljs-keyword">if</span> (a === b) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

  <span class="hljs-keyword">var</span> arrA = <span class="hljs-built_in">Array</span>.isArray(a)
    , arrB = <span class="hljs-built_in">Array</span>.isArray(b)
    , i;

  <span class="hljs-keyword">if</span> (arrA &amp;&amp; arrB) {
    <span class="hljs-keyword">if</span> (a.length != b.length) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; a.length; i++)
      <span class="hljs-keyword">if</span> (!equal(a[i], b[i])) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }

  <span class="hljs-keyword">if</span> (arrA != arrB) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

  <span class="hljs-keyword">if</span> (a &amp;&amp; b &amp;&amp; <span class="hljs-keyword">typeof</span> a === <span class="hljs-string">'object'</span> &amp;&amp; <span class="hljs-keyword">typeof</span> b === <span class="hljs-string">'object'</span>) {
    <span class="hljs-keyword">var</span> keys = <span class="hljs-built_in">Object</span>.keys(a);
    <span class="hljs-keyword">if</span> (keys.length !== <span class="hljs-built_in">Object</span>.keys(b).length) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

    <span class="hljs-keyword">var</span> dateA = a <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Date</span>
      , dateB = b <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Date</span>;
    <span class="hljs-keyword">if</span> (dateA &amp;&amp; dateB) <span class="hljs-keyword">return</span> a.getTime() == b.getTime();
    <span class="hljs-keyword">if</span> (dateA != dateB) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

    <span class="hljs-keyword">var</span> regexpA = a <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">RegExp</span>
      , regexpB = b <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">RegExp</span>;
    <span class="hljs-keyword">if</span> (regexpA &amp;&amp; regexpB) <span class="hljs-keyword">return</span> a.toString() == b.toString();
    <span class="hljs-keyword">if</span> (regexpA != regexpB) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; keys.length; i++)
      <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">Object</span>.prototype.hasOwnProperty.call(b, keys[i])) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; keys.length; i++)
      <span class="hljs-keyword">if</span>(!equal(a[keys[i]], b[keys[i]])) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }

  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
};

},{}],<span class="hljs-number">5</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">var</span> util = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./util'</span>);

<span class="hljs-keyword">var</span> DATE = <span class="hljs-regexp">/^\d\d\d\d-(\d\d)-(\d\d)$/</span>;
<span class="hljs-keyword">var</span> DAYS = [<span class="hljs-number">0</span>,<span class="hljs-number">31</span>,<span class="hljs-number">29</span>,<span class="hljs-number">31</span>,<span class="hljs-number">30</span>,<span class="hljs-number">31</span>,<span class="hljs-number">30</span>,<span class="hljs-number">31</span>,<span class="hljs-number">31</span>,<span class="hljs-number">30</span>,<span class="hljs-number">31</span>,<span class="hljs-number">30</span>,<span class="hljs-number">31</span>];
<span class="hljs-keyword">var</span> TIME = <span class="hljs-regexp">/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i</span>;
<span class="hljs-keyword">var</span> HOSTNAME = <span class="hljs-regexp">/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i</span>;
<span class="hljs-keyword">var</span> URI = <span class="hljs-regexp">/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&amp;'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&amp;'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&amp;'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&amp;'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&amp;'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&amp;'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&amp;'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&amp;'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&amp;'()*+,;=:@\/?]|%[0-9a-f]{2})*)?(?:\#(?:[a-z0-9\-._~!$&amp;'()*+,;=:@\/?]|%[0-9a-f]{2})*)?$/i</span>;
<span class="hljs-keyword">var</span> UUID = <span class="hljs-regexp">/^(?:urn\:uuid\:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i</span>;
<span class="hljs-keyword">var</span> JSON_POINTER = <span class="hljs-regexp">/^(?:\/(?:[^~\/]|~0|~1)*)*$|^\#(?:\/(?:[a-z0-9_\-\.!$&amp;'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i</span>;
<span class="hljs-keyword">var</span> RELATIVE_JSON_POINTER = <span class="hljs-regexp">/^(?:0|[1-9][0-9]*)(?:\#|(?:\/(?:[^~\/]|~0|~1)*)*)$/</span>;


<span class="hljs-built_in">module</span>.exports = formats;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">formats</span>(<span class="hljs-params">mode</span>) </span>{
  mode = mode == <span class="hljs-string">'full'</span> ? <span class="hljs-string">'full'</span> : <span class="hljs-string">'fast'</span>;
  <span class="hljs-keyword">var</span> formatDefs = util.copy(formats[mode]);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> fName <span class="hljs-keyword">in</span> formats.compare) {
    formatDefs[fName] = {
      <span class="hljs-attr">validate</span>: formatDefs[fName],
      <span class="hljs-attr">compare</span>: formats.compare[fName]
    };
  }
  <span class="hljs-keyword">return</span> formatDefs;
}


formats.fast = {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<p>date: http://tools.ietf.org/html/rfc3339#section-5.6</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  date: <span class="hljs-regexp">/^\d\d\d\d-[0-1]\d-[0-3]\d$/</span>,
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<p>date-time: http://tools.ietf.org/html/rfc3339#section-5.6</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  time: <span class="hljs-regexp">/^[0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i</span>,
  <span class="hljs-string">'date-time'</span>: <span class="hljs-regexp">/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s][0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i</span>,
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<p>uri: https://github.com/mafintosh/is-my-json-valid/blob/master/formats.js</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  uri: <span class="hljs-regexp">/^(?:[a-z][a-z0-9+-.]*)?(?:\:|\/)\/?[^\s]*$/i</span>,
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<p>email (sources from jsen validator):
http://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address#answer-8829363
http://www.w3.org/TR/html5/forms.html#valid-e-mail-address (search for 'willful violation')</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  email: <span class="hljs-regexp">/^[a-z0-9.!#$%&amp;'*+\/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i</span>,
  <span class="hljs-attr">hostname</span>: HOSTNAME,
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<p>optimized https://www.safaribooksonline.com/library/view/regular-expressions-cookbook/9780596802837/ch07s16.html</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  ipv4: <span class="hljs-regexp">/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/</span>,
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<p>optimized http://stackoverflow.com/questions/53497/regular-expression-that-matches-valid-ipv6-addresses</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  ipv6: <span class="hljs-regexp">/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i</span>,
  <span class="hljs-attr">regex</span>: regex,
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<p>uuid: http://tools.ietf.org/html/rfc4122</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  uuid: UUID,
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11"></a>
</div>
<p>JSON-pointer: https://tools.ietf.org/html/rfc6901
uri fragment: https://tools.ietf.org/html/rfc3986#appendix-A</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-string">'json-pointer'</span>: JSON_POINTER,
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12"></a>
</div>
<p>relative JSON-pointer: http://tools.ietf.org/html/draft-luff-relative-json-pointer-00</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-string">'relative-json-pointer'</span>: RELATIVE_JSON_POINTER
};


formats.full = {
  <span class="hljs-attr">date</span>: date,
  <span class="hljs-attr">time</span>: time,
  <span class="hljs-string">'date-time'</span>: date_time,
  <span class="hljs-attr">uri</span>: uri,
  <span class="hljs-attr">email</span>: <span class="hljs-regexp">/^[a-z0-9!#$%&amp;'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&amp;''*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i</span>,
  <span class="hljs-attr">hostname</span>: hostname,
  <span class="hljs-attr">ipv4</span>: <span class="hljs-regexp">/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/</span>,
  <span class="hljs-attr">ipv6</span>: <span class="hljs-regexp">/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i</span>,
  <span class="hljs-attr">regex</span>: regex,
  <span class="hljs-attr">uuid</span>: UUID,
  <span class="hljs-string">'json-pointer'</span>: JSON_POINTER,
  <span class="hljs-string">'relative-json-pointer'</span>: RELATIVE_JSON_POINTER
};


formats.compare = {
  <span class="hljs-attr">date</span>: compareDate,
  <span class="hljs-attr">time</span>: compareTime,
  <span class="hljs-string">'date-time'</span>: compareDateTime
};


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">date</span>(<span class="hljs-params">str</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13"></a>
</div>
<p>full-date from http://tools.ietf.org/html/rfc3339#section-5.6</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> matches = str.match(DATE);
  <span class="hljs-keyword">if</span> (!matches) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

  <span class="hljs-keyword">var</span> month = +matches[<span class="hljs-number">1</span>];
  <span class="hljs-keyword">var</span> day = +matches[<span class="hljs-number">2</span>];
  <span class="hljs-keyword">return</span> month &gt;= <span class="hljs-number">1</span> &amp;&amp; month &lt;= <span class="hljs-number">12</span> &amp;&amp; day &gt;= <span class="hljs-number">1</span> &amp;&amp; day &lt;= DAYS[month];
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">time</span>(<span class="hljs-params">str, full</span>) </span>{
  <span class="hljs-keyword">var</span> matches = str.match(TIME);
  <span class="hljs-keyword">if</span> (!matches) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

  <span class="hljs-keyword">var</span> hour = matches[<span class="hljs-number">1</span>];
  <span class="hljs-keyword">var</span> minute = matches[<span class="hljs-number">2</span>];
  <span class="hljs-keyword">var</span> second = matches[<span class="hljs-number">3</span>];
  <span class="hljs-keyword">var</span> timeZone = matches[<span class="hljs-number">5</span>];
  <span class="hljs-keyword">return</span> hour &lt;= <span class="hljs-number">23</span> &amp;&amp; minute &lt;= <span class="hljs-number">59</span> &amp;&amp; second &lt;= <span class="hljs-number">59</span> &amp;&amp; (!full || timeZone);
}


<span class="hljs-keyword">var</span> DATE_TIME_SEPARATOR = <span class="hljs-regexp">/t|\s/i</span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">date_time</span>(<span class="hljs-params">str</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14"></a>
</div>
<p>http://tools.ietf.org/html/rfc3339#section-5.6</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> dateTime = str.split(DATE_TIME_SEPARATOR);
  <span class="hljs-keyword">return</span> dateTime.length == <span class="hljs-number">2</span> &amp;&amp; date(dateTime[<span class="hljs-number">0</span>]) &amp;&amp; time(dateTime[<span class="hljs-number">1</span>], <span class="hljs-literal">true</span>);
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hostname</span>(<span class="hljs-params">str</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15"></a>
</div>
<p>https://tools.ietf.org/html/rfc1034#section-3.5
https://tools.ietf.org/html/rfc1123#section-2</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">return</span> str.length &lt;= <span class="hljs-number">255</span> &amp;&amp; HOSTNAME.test(str);
}


<span class="hljs-keyword">var</span> NOT_URI_FRAGMENT = <span class="hljs-regexp">/\/|\:/</span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">uri</span>(<span class="hljs-params">str</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-16" id="section-16"></a>
</div>
<p>http://jmrware.com/articles/2009/uri_regexp/URI_regex.html + optional protocol + required &quot;.&quot;</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">return</span> NOT_URI_FRAGMENT.test(str) &amp;&amp; URI.test(str);
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">regex</span>(<span class="hljs-params">str</span>) </span>{
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(str);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  } <span class="hljs-keyword">catch</span>(e) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compareDate</span>(<span class="hljs-params">d1, d2</span>) </span>{
  <span class="hljs-keyword">if</span> (!(d1 &amp;&amp; d2)) <span class="hljs-keyword">return</span>;
  <span class="hljs-keyword">if</span> (d1 &gt; d2) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
  <span class="hljs-keyword">if</span> (d1 &lt; d2) <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
  <span class="hljs-keyword">if</span> (d1 === d2) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compareTime</span>(<span class="hljs-params">t1, t2</span>) </span>{
  <span class="hljs-keyword">if</span> (!(t1 &amp;&amp; t2)) <span class="hljs-keyword">return</span>;
  t1 = t1.match(TIME);
  t2 = t2.match(TIME);
  <span class="hljs-keyword">if</span> (!(t1 &amp;&amp; t2)) <span class="hljs-keyword">return</span>;
  t1 = t1[<span class="hljs-number">1</span>] + t1[<span class="hljs-number">2</span>] + t1[<span class="hljs-number">3</span>] + (t1[<span class="hljs-number">4</span>]||<span class="hljs-string">''</span>);
  t2 = t2[<span class="hljs-number">1</span>] + t2[<span class="hljs-number">2</span>] + t2[<span class="hljs-number">3</span>] + (t2[<span class="hljs-number">4</span>]||<span class="hljs-string">''</span>);
  <span class="hljs-keyword">if</span> (t1 &gt; t2) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
  <span class="hljs-keyword">if</span> (t1 &lt; t2) <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
  <span class="hljs-keyword">if</span> (t1 === t2) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compareDateTime</span>(<span class="hljs-params">dt1, dt2</span>) </span>{
  <span class="hljs-keyword">if</span> (!(dt1 &amp;&amp; dt2)) <span class="hljs-keyword">return</span>;
  dt1 = dt1.split(DATE_TIME_SEPARATOR);
  dt2 = dt2.split(DATE_TIME_SEPARATOR);
  <span class="hljs-keyword">var</span> res = compareDate(dt1[<span class="hljs-number">0</span>], dt2[<span class="hljs-number">0</span>]);
  <span class="hljs-keyword">if</span> (res === <span class="hljs-literal">undefined</span>) <span class="hljs-keyword">return</span>;
  <span class="hljs-keyword">return</span> res || compareTime(dt1[<span class="hljs-number">1</span>], dt2[<span class="hljs-number">1</span>]);
}

},{<span class="hljs-string">"./util"</span>:<span class="hljs-number">11</span>}],<span class="hljs-number">6</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">var</span> resolve = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./resolve'</span>)
  , util = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./util'</span>)
  , stableStringify = <span class="hljs-built_in">require</span>(<span class="hljs-string">'json-stable-stringify'</span>)
  , <span class="hljs-keyword">async</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../async'</span>);

<span class="hljs-keyword">var</span> beautify;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadBeautify</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-keyword">if</span> (beautify === <span class="hljs-literal">undefined</span>) {
    <span class="hljs-keyword">var</span> name = <span class="hljs-string">'js-beautify'</span>;
    <span class="hljs-keyword">try</span> { beautify = <span class="hljs-built_in">require</span>(name).js_beautify; }
    <span class="hljs-keyword">catch</span>(e) { beautify = <span class="hljs-literal">false</span>; }
  }
}

<span class="hljs-keyword">var</span> validateGenerator = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../dotjs/validate'</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17"></a>
</div>
<div class="dox">
<div class="summary">
<p>Functions below are used inside compiled validations function</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> co = <span class="hljs-built_in">require</span>(<span class="hljs-string">'co'</span>);
<span class="hljs-keyword">var</span> ucs2length = util.ucs2length;
<span class="hljs-keyword">var</span> equal = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./equal'</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18"></a>
</div>
<p>this error is thrown by async schemas to return validation errors via exception</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">var</span> ValidationError = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./validation_error'</span>);

<span class="hljs-built_in">module</span>.exports = compile;


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19"></a>
</div>
<div class="dox">
<div class="summary">
<p>Compiles schema to validation function</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">schema</span>
<span class="dox_type">Object</span>
<span>schema object
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">root</span>
<span class="dox_type">Object</span>
<span>object with information about the root schema for this schema
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">localRefs</span>
<span class="dox_type">Object</span>
<span>the hash of local references inside the schema (created by resolve.id), used for inline resolution
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">baseId</span>
<span class="dox_type">String</span>
<span>base ID for IDs in the schema
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Function</span>
<span>validation function
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compile</span>(<span class="hljs-params">schema, root, localRefs, baseId</span>) </span>{
  <span class="hljs-comment">/* jshint validthis: true, evil: true */</span>
  <span class="hljs-comment">/* eslint no-shadow: 0 */</span>
  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>
    , opts = <span class="hljs-keyword">this</span>._opts
    , refVal = [ <span class="hljs-literal">undefined</span> ]
    , refs = {}
    , patterns = []
    , patternsHash = {}
    , defaults = []
    , defaultsHash = {}
    , customRules = []
    , keepSourceCode = opts.sourceCode !== <span class="hljs-literal">false</span>;

  root = root || { <span class="hljs-attr">schema</span>: schema, <span class="hljs-attr">refVal</span>: refVal, <span class="hljs-attr">refs</span>: refs };

  <span class="hljs-keyword">var</span> c = checkCompiling.call(<span class="hljs-keyword">this</span>, schema, root, baseId);
  <span class="hljs-keyword">var</span> compilation = <span class="hljs-keyword">this</span>._compilations[c.index];
  <span class="hljs-keyword">if</span> (c.compiling) <span class="hljs-keyword">return</span> (compilation.callValidate = callValidate);

  <span class="hljs-keyword">var</span> formats = <span class="hljs-keyword">this</span>._formats;
  <span class="hljs-keyword">var</span> RULES = <span class="hljs-keyword">this</span>.RULES;

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">var</span> v = localCompile(schema, root, localRefs, baseId);
    compilation.validate = v;
    <span class="hljs-keyword">var</span> cv = compilation.callValidate;
    <span class="hljs-keyword">if</span> (cv) {
      cv.schema = v.schema;
      cv.errors = <span class="hljs-literal">null</span>;
      cv.refs = v.refs;
      cv.refVal = v.refVal;
      cv.root = v.root;
      cv.$<span class="hljs-keyword">async</span> = v.$<span class="hljs-keyword">async</span>;
      <span class="hljs-keyword">if</span> (keepSourceCode) cv.sourceCode = v.sourceCode;
    }
    <span class="hljs-keyword">return</span> v;
  } <span class="hljs-keyword">finally</span> {
    endCompiling.call(<span class="hljs-keyword">this</span>, schema, root, baseId);
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">callValidate</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> validate = compilation.validate;
    <span class="hljs-keyword">var</span> result = validate.apply(<span class="hljs-literal">null</span>, <span class="hljs-built_in">arguments</span>);
    callValidate.errors = validate.errors;
    <span class="hljs-keyword">return</span> result;
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">localCompile</span>(<span class="hljs-params">_schema, _root, localRefs, baseId</span>) </span>{
    <span class="hljs-keyword">var</span> isRoot = !_root || (_root &amp;&amp; _root.schema == _schema);
    <span class="hljs-keyword">if</span> (_root.schema != root.schema)
      <span class="hljs-keyword">return</span> compile.call(self, _schema, _root, localRefs, baseId);

    <span class="hljs-keyword">var</span> $<span class="hljs-keyword">async</span> = _schema.$<span class="hljs-keyword">async</span> === <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">if</span> ($<span class="hljs-keyword">async</span> &amp;&amp; !opts.transpile) <span class="hljs-keyword">async</span>.setup(opts);

    <span class="hljs-keyword">var</span> sourceCode = validateGenerator({
      <span class="hljs-attr">isTop</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">schema</span>: _schema,
      <span class="hljs-attr">isRoot</span>: isRoot,
      <span class="hljs-attr">baseId</span>: baseId,
      <span class="hljs-attr">root</span>: _root,
      <span class="hljs-attr">schemaPath</span>: <span class="hljs-string">''</span>,
      <span class="hljs-attr">errSchemaPath</span>: <span class="hljs-string">'#'</span>,
      <span class="hljs-attr">errorPath</span>: <span class="hljs-string">'""'</span>,
      <span class="hljs-attr">RULES</span>: RULES,
      <span class="hljs-attr">validate</span>: validateGenerator,
      <span class="hljs-attr">util</span>: util,
      <span class="hljs-attr">resolve</span>: resolve,
      <span class="hljs-attr">resolveRef</span>: resolveRef,
      <span class="hljs-attr">usePattern</span>: usePattern,
      <span class="hljs-attr">useDefault</span>: useDefault,
      <span class="hljs-attr">useCustomRule</span>: useCustomRule,
      <span class="hljs-attr">opts</span>: opts,
      <span class="hljs-attr">formats</span>: formats,
      <span class="hljs-attr">self</span>: self
    });

    sourceCode = vars(refVal, refValCode) + vars(patterns, patternCode)
                   + vars(defaults, defaultCode) + vars(customRules, customRuleCode)
                   + sourceCode;

    <span class="hljs-keyword">if</span> (opts.beautify) {
      loadBeautify();
      <span class="hljs-comment">/* istanbul ignore else */</span>
      <span class="hljs-keyword">if</span> (beautify) sourceCode = beautify(sourceCode, opts.beautify);
      <span class="hljs-keyword">else</span> <span class="hljs-built_in">console</span>.error(<span class="hljs-string">'"npm install js-beautify" to use beautify option'</span>);
    }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20"></a>
</div>
<p>console.log('\n\n\n *** \n', sourceCode);</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">var</span> validate, validateCode
      , transpile = opts._transpileFunc;
    <span class="hljs-keyword">try</span> {
      validateCode = $<span class="hljs-keyword">async</span> &amp;&amp; transpile
                      ? transpile(sourceCode)
                      : sourceCode;

      <span class="hljs-keyword">var</span> makeValidate = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Function</span>(
        <span class="hljs-string">'self'</span>,
        <span class="hljs-string">'RULES'</span>,
        <span class="hljs-string">'formats'</span>,
        <span class="hljs-string">'root'</span>,
        <span class="hljs-string">'refVal'</span>,
        <span class="hljs-string">'defaults'</span>,
        <span class="hljs-string">'customRules'</span>,
        <span class="hljs-string">'co'</span>,
        <span class="hljs-string">'equal'</span>,
        <span class="hljs-string">'ucs2length'</span>,
        <span class="hljs-string">'ValidationError'</span>,
        validateCode
      );

      validate = makeValidate(
        self,
        RULES,
        formats,
        root,
        refVal,
        defaults,
        customRules,
        co,
        equal,
        ucs2length,
        ValidationError
      );

      refVal[<span class="hljs-number">0</span>] = validate;
    } <span class="hljs-keyword">catch</span>(e) {
      <span class="hljs-built_in">console</span>.error(<span class="hljs-string">'Error compiling schema, function code:'</span>, validateCode);
      <span class="hljs-keyword">throw</span> e;
    }

    validate.schema = _schema;
    validate.errors = <span class="hljs-literal">null</span>;
    validate.refs = refs;
    validate.refVal = refVal;
    validate.root = isRoot ? validate : _root;
    <span class="hljs-keyword">if</span> ($<span class="hljs-keyword">async</span>) validate.$<span class="hljs-keyword">async</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">if</span> (keepSourceCode) validate.sourceCode = sourceCode;
    <span class="hljs-keyword">if</span> (opts.sourceCode === <span class="hljs-literal">true</span>) {
      validate.source = {
        <span class="hljs-attr">patterns</span>: patterns,
        <span class="hljs-attr">defaults</span>: defaults
      };
    }

    <span class="hljs-keyword">return</span> validate;
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resolveRef</span>(<span class="hljs-params">baseId, ref, isRoot</span>) </span>{
    ref = resolve.url(baseId, ref);
    <span class="hljs-keyword">var</span> refIndex = refs[ref];
    <span class="hljs-keyword">var</span> _refVal, refCode;
    <span class="hljs-keyword">if</span> (refIndex !== <span class="hljs-literal">undefined</span>) {
      _refVal = refVal[refIndex];
      refCode = <span class="hljs-string">'refVal['</span> + refIndex + <span class="hljs-string">']'</span>;
      <span class="hljs-keyword">return</span> resolvedRef(_refVal, refCode);
    }
    <span class="hljs-keyword">if</span> (!isRoot &amp;&amp; root.refs) {
      <span class="hljs-keyword">var</span> rootRefId = root.refs[ref];
      <span class="hljs-keyword">if</span> (rootRefId !== <span class="hljs-literal">undefined</span>) {
        _refVal = root.refVal[rootRefId];
        refCode = addLocalRef(ref, _refVal);
        <span class="hljs-keyword">return</span> resolvedRef(_refVal, refCode);
      }
    }

    refCode = addLocalRef(ref);
    <span class="hljs-keyword">var</span> v = resolve.call(self, localCompile, root, ref);
    <span class="hljs-keyword">if</span> (!v) {
      <span class="hljs-keyword">var</span> localSchema = localRefs &amp;&amp; localRefs[ref];
      <span class="hljs-keyword">if</span> (localSchema) {
        v = resolve.inlineRef(localSchema, opts.inlineRefs)
            ? localSchema
            : compile.call(self, localSchema, root, localRefs, baseId);
      }
    }

    <span class="hljs-keyword">if</span> (v) {
      replaceLocalRef(ref, v);
      <span class="hljs-keyword">return</span> resolvedRef(v, refCode);
    }
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addLocalRef</span>(<span class="hljs-params">ref, v</span>) </span>{
    <span class="hljs-keyword">var</span> refId = refVal.length;
    refVal[refId] = v;
    refs[ref] = refId;
    <span class="hljs-keyword">return</span> <span class="hljs-string">'refVal'</span> + refId;
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">replaceLocalRef</span>(<span class="hljs-params">ref, v</span>) </span>{
    <span class="hljs-keyword">var</span> refId = refs[ref];
    refVal[refId] = v;
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resolvedRef</span>(<span class="hljs-params">refVal, code</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> refVal == <span class="hljs-string">'object'</span>
            ? { <span class="hljs-attr">code</span>: code, <span class="hljs-attr">schema</span>: refVal, <span class="hljs-attr">inline</span>: <span class="hljs-literal">true</span> }
            : { <span class="hljs-attr">code</span>: code, <span class="hljs-attr">$async</span>: refVal &amp;&amp; refVal.$<span class="hljs-keyword">async</span> };
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">usePattern</span>(<span class="hljs-params">regexStr</span>) </span>{
    <span class="hljs-keyword">var</span> index = patternsHash[regexStr];
    <span class="hljs-keyword">if</span> (index === <span class="hljs-literal">undefined</span>) {
      index = patternsHash[regexStr] = patterns.length;
      patterns[index] = regexStr;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-string">'pattern'</span> + index;
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">useDefault</span>(<span class="hljs-params">value</span>) </span>{
    <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">typeof</span> value) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'boolean'</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-string">'number'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">''</span> + value;
      <span class="hljs-keyword">case</span> <span class="hljs-string">'string'</span>:
        <span class="hljs-keyword">return</span> util.toQuotedString(value);
      <span class="hljs-keyword">case</span> <span class="hljs-string">'object'</span>:
        <span class="hljs-keyword">if</span> (value === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">'null'</span>;
        <span class="hljs-keyword">var</span> valueStr = stableStringify(value);
        <span class="hljs-keyword">var</span> index = defaultsHash[valueStr];
        <span class="hljs-keyword">if</span> (index === <span class="hljs-literal">undefined</span>) {
          index = defaultsHash[valueStr] = defaults.length;
          defaults[index] = value;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-string">'default'</span> + index;
    }
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">useCustomRule</span>(<span class="hljs-params">rule, schema, parentSchema, it</span>) </span>{
    <span class="hljs-keyword">var</span> validateSchema = rule.definition.validateSchema;
    <span class="hljs-keyword">if</span> (validateSchema &amp;&amp; self._opts.validateSchema !== <span class="hljs-literal">false</span>) {
      <span class="hljs-keyword">var</span> valid = validateSchema(schema);
      <span class="hljs-keyword">if</span> (!valid) {
        <span class="hljs-keyword">var</span> message = <span class="hljs-string">'keyword schema is invalid: '</span> + self.errorsText(validateSchema.errors);
        <span class="hljs-keyword">if</span> (self._opts.validateSchema == <span class="hljs-string">'log'</span>) <span class="hljs-built_in">console</span>.error(message);
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(message);
      }
    }

    <span class="hljs-keyword">var</span> compile = rule.definition.compile
      , inline = rule.definition.inline
      , macro = rule.definition.macro;

    <span class="hljs-keyword">var</span> validate;
    <span class="hljs-keyword">if</span> (compile) {
      validate = compile.call(self, schema, parentSchema, it);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (macro) {
      validate = macro.call(self, schema, parentSchema, it);
      <span class="hljs-keyword">if</span> (opts.validateSchema !== <span class="hljs-literal">false</span>) self.validateSchema(validate, <span class="hljs-literal">true</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (inline) {
      validate = inline.call(self, it, rule.keyword, schema, parentSchema);
    } <span class="hljs-keyword">else</span> {
      validate = rule.definition.validate;
    }

    <span class="hljs-keyword">var</span> index = customRules.length;
    customRules[index] = validate;

    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">code</span>: <span class="hljs-string">'customRule'</span> + index,
      <span class="hljs-attr">validate</span>: validate
    };
  }
}


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21"></a>
</div>
<div class="dox">
<div class="summary">
<p>Checks if the schema is currently compiled</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">schema</span>
<span class="dox_type">Object</span>
<span>schema to compile
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">root</span>
<span class="dox_type">Object</span>
<span>root object
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">baseId</span>
<span class="dox_type">String</span>
<span>base schema ID
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Object</span>
<span>object with properties &quot;index&quot; (compilation index) and &quot;compiling&quot; (boolean)
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkCompiling</span>(<span class="hljs-params">schema, root, baseId</span>) </span>{
  <span class="hljs-comment">/* jshint validthis: true */</span>
  <span class="hljs-keyword">var</span> index = compIndex.call(<span class="hljs-keyword">this</span>, schema, root, baseId);
  <span class="hljs-keyword">if</span> (index &gt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> { <span class="hljs-attr">index</span>: index, <span class="hljs-attr">compiling</span>: <span class="hljs-literal">true</span> };
  index = <span class="hljs-keyword">this</span>._compilations.length;
  <span class="hljs-keyword">this</span>._compilations[index] = {
    <span class="hljs-attr">schema</span>: schema,
    <span class="hljs-attr">root</span>: root,
    <span class="hljs-attr">baseId</span>: baseId
  };
  <span class="hljs-keyword">return</span> { <span class="hljs-attr">index</span>: index, <span class="hljs-attr">compiling</span>: <span class="hljs-literal">false</span> };
}


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22"></a>
</div>
<div class="dox">
<div class="summary">
<p>Removes the schema from the currently compiled list</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">schema</span>
<span class="dox_type">Object</span>
<span>schema to compile
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">root</span>
<span class="dox_type">Object</span>
<span>root object
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">baseId</span>
<span class="dox_type">String</span>
<span>base schema ID
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">endCompiling</span>(<span class="hljs-params">schema, root, baseId</span>) </span>{
  <span class="hljs-comment">/* jshint validthis: true */</span>
  <span class="hljs-keyword">var</span> i = compIndex.call(<span class="hljs-keyword">this</span>, schema, root, baseId);
  <span class="hljs-keyword">if</span> (i &gt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">this</span>._compilations.splice(i, <span class="hljs-number">1</span>);
}


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-23" id="section-23"></a>
</div>
<div class="dox">
<div class="summary">
<p>Index of schema compilation in the currently compiled list</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">schema</span>
<span class="dox_type">Object</span>
<span>schema to compile
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">root</span>
<span class="dox_type">Object</span>
<span>root object
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">baseId</span>
<span class="dox_type">String</span>
<span>base schema ID
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Integer</span>
<span>compilation index
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compIndex</span>(<span class="hljs-params">schema, root, baseId</span>) </span>{
  <span class="hljs-comment">/* jshint validthis: true */</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-keyword">this</span>._compilations.length; i++) {
    <span class="hljs-keyword">var</span> c = <span class="hljs-keyword">this</span>._compilations[i];
    <span class="hljs-keyword">if</span> (c.schema == schema &amp;&amp; c.root == root &amp;&amp; c.baseId == baseId) <span class="hljs-keyword">return</span> i;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">patternCode</span>(<span class="hljs-params">i, patterns</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">'var pattern'</span> + i + <span class="hljs-string">' = new RegExp('</span> + util.toQuotedString(patterns[i]) + <span class="hljs-string">');'</span>;
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">defaultCode</span>(<span class="hljs-params">i</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">'var default'</span> + i + <span class="hljs-string">' = defaults['</span> + i + <span class="hljs-string">'];'</span>;
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">refValCode</span>(<span class="hljs-params">i, refVal</span>) </span>{
  <span class="hljs-keyword">return</span> refVal[i] ? <span class="hljs-string">'var refVal'</span> + i + <span class="hljs-string">' = refVal['</span> + i + <span class="hljs-string">'];'</span> : <span class="hljs-string">''</span>;
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">customRuleCode</span>(<span class="hljs-params">i</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">'var customRule'</span> + i + <span class="hljs-string">' = customRules['</span> + i + <span class="hljs-string">'];'</span>;
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">vars</span>(<span class="hljs-params">arr, statement</span>) </span>{
  <span class="hljs-keyword">if</span> (!arr.length) <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
  <span class="hljs-keyword">var</span> code = <span class="hljs-string">''</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;arr.length; i++)
    code += statement(i, arr);
  <span class="hljs-keyword">return</span> code;
}

},{<span class="hljs-string">"../async"</span>:<span class="hljs-number">1</span>,<span class="hljs-string">"../dotjs/validate"</span>:<span class="hljs-number">36</span>,<span class="hljs-string">"./equal"</span>:<span class="hljs-number">4</span>,<span class="hljs-string">"./resolve"</span>:<span class="hljs-number">7</span>,<span class="hljs-string">"./util"</span>:<span class="hljs-number">11</span>,<span class="hljs-string">"./validation_error"</span>:<span class="hljs-number">12</span>,<span class="hljs-string">"co"</span>:<span class="hljs-number">41</span>,<span class="hljs-string">"json-stable-stringify"</span>:<span class="hljs-number">42</span>}],<span class="hljs-number">7</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">var</span> url = <span class="hljs-built_in">require</span>(<span class="hljs-string">'url'</span>)
  , equal = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./equal'</span>)
  , util = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./util'</span>)
  , SchemaObject = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./schema_obj'</span>);

<span class="hljs-built_in">module</span>.exports = resolve;

resolve.normalizeId = normalizeId;
resolve.fullPath = getFullPath;
resolve.url = resolveUrl;
resolve.ids = resolveIds;
resolve.inlineRef = inlineRef;
resolve.schema = resolveSchema;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-24" id="section-24"></a>
</div>
<div class="dox">
<div class="summary">
<p>[resolve and compile the references ($ref)]</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">compile</span>
<span class="dox_type">Function</span>
<span>reference to schema compilation funciton (localCompile)
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">root</span>
<span class="dox_type">Object</span>
<span>object with information about the root schema for the current schema
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">ref</span>
<span class="dox_type">String</span>
<span>reference to resolve
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Object</span>
<span class="dox_type">Function</span>
<span>schema object (if the schema can be inlined) or validation function
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resolve</span>(<span class="hljs-params">compile, root, ref</span>) </span>{
  <span class="hljs-comment">/* jshint validthis: true */</span>
  <span class="hljs-keyword">var</span> refVal = <span class="hljs-keyword">this</span>._refs[ref];
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> refVal == <span class="hljs-string">'string'</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._refs[refVal]) refVal = <span class="hljs-keyword">this</span>._refs[refVal];
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> resolve.call(<span class="hljs-keyword">this</span>, compile, root, refVal);
  }

  refVal = refVal || <span class="hljs-keyword">this</span>._schemas[ref];
  <span class="hljs-keyword">if</span> (refVal <span class="hljs-keyword">instanceof</span> SchemaObject) {
    <span class="hljs-keyword">return</span> inlineRef(refVal.schema, <span class="hljs-keyword">this</span>._opts.inlineRefs)
            ? refVal.schema
            : refVal.validate || <span class="hljs-keyword">this</span>._compile(refVal);
  }

  <span class="hljs-keyword">var</span> res = resolveSchema.call(<span class="hljs-keyword">this</span>, root, ref);
  <span class="hljs-keyword">var</span> schema, v, baseId;
  <span class="hljs-keyword">if</span> (res) {
    schema = res.schema;
    root = res.root;
    baseId = res.baseId;
  }

  <span class="hljs-keyword">if</span> (schema <span class="hljs-keyword">instanceof</span> SchemaObject) {
    v = schema.validate || compile.call(<span class="hljs-keyword">this</span>, schema.schema, root, <span class="hljs-literal">undefined</span>, baseId);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (schema) {
    v = inlineRef(schema, <span class="hljs-keyword">this</span>._opts.inlineRefs)
        ? schema
        : compile.call(<span class="hljs-keyword">this</span>, schema, root, <span class="hljs-literal">undefined</span>, baseId);
  }

  <span class="hljs-keyword">return</span> v;
}


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-25" id="section-25"></a>
</div>
<div class="dox">
<div class="summary">
<p>Resolve schema, its root and baseId</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">root</span>
<span class="dox_type">Object</span>
<span>root object with properties schema, refVal, refs
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">ref</span>
<span class="dox_type">String</span>
<span>reference to resolve
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Object</span>
<span>object with properties schema, root, baseId
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resolveSchema</span>(<span class="hljs-params">root, ref</span>) </span>{
  <span class="hljs-comment">/* jshint validthis: true */</span>
  <span class="hljs-keyword">var</span> p = url.parse(ref, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>)
    , refPath = _getFullPath(p)
    , baseId = getFullPath(root.schema.id);
  <span class="hljs-keyword">if</span> (refPath !== baseId) {
    <span class="hljs-keyword">var</span> id = normalizeId(refPath);
    <span class="hljs-keyword">var</span> refVal = <span class="hljs-keyword">this</span>._refs[id];
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> refVal == <span class="hljs-string">'string'</span>) {
      <span class="hljs-keyword">return</span> resolveRecursive.call(<span class="hljs-keyword">this</span>, root, refVal, p);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (refVal <span class="hljs-keyword">instanceof</span> SchemaObject) {
      <span class="hljs-keyword">if</span> (!refVal.validate) <span class="hljs-keyword">this</span>._compile(refVal);
      root = refVal;
    } <span class="hljs-keyword">else</span> {
      refVal = <span class="hljs-keyword">this</span>._schemas[id];
      <span class="hljs-keyword">if</span> (refVal <span class="hljs-keyword">instanceof</span> SchemaObject) {
        <span class="hljs-keyword">if</span> (!refVal.validate) <span class="hljs-keyword">this</span>._compile(refVal);
        <span class="hljs-keyword">if</span> (id == normalizeId(ref))
          <span class="hljs-keyword">return</span> { <span class="hljs-attr">schema</span>: refVal, <span class="hljs-attr">root</span>: root, <span class="hljs-attr">baseId</span>: baseId };
        root = refVal;
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span>;
      }
    }
    <span class="hljs-keyword">if</span> (!root.schema) <span class="hljs-keyword">return</span>;
    baseId = getFullPath(root.schema.id);
  }
  <span class="hljs-keyword">return</span> getJsonPointer.call(<span class="hljs-keyword">this</span>, p, baseId, root.schema, root);
}


<span class="hljs-comment">/* @this Ajv */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resolveRecursive</span>(<span class="hljs-params">root, ref, parsedRef</span>) </span>{
  <span class="hljs-comment">/* jshint validthis: true */</span>
  <span class="hljs-keyword">var</span> res = resolveSchema.call(<span class="hljs-keyword">this</span>, root, ref);
  <span class="hljs-keyword">if</span> (res) {
    <span class="hljs-keyword">var</span> schema = res.schema;
    <span class="hljs-keyword">var</span> baseId = res.baseId;
    root = res.root;
    <span class="hljs-keyword">if</span> (schema.id) baseId = resolveUrl(baseId, schema.id);
    <span class="hljs-keyword">return</span> getJsonPointer.call(<span class="hljs-keyword">this</span>, parsedRef, baseId, schema, root);
  }
}


<span class="hljs-keyword">var</span> PREVENT_SCOPE_CHANGE = util.toHash([<span class="hljs-string">'properties'</span>, <span class="hljs-string">'patternProperties'</span>, <span class="hljs-string">'enum'</span>, <span class="hljs-string">'dependencies'</span>, <span class="hljs-string">'definitions'</span>]);
<span class="hljs-comment">/* @this Ajv */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getJsonPointer</span>(<span class="hljs-params">parsedRef, baseId, schema, root</span>) </span>{
  <span class="hljs-comment">/* jshint validthis: true */</span>
  parsedRef.hash = parsedRef.hash || <span class="hljs-string">''</span>;
  <span class="hljs-keyword">if</span> (parsedRef.hash.slice(<span class="hljs-number">0</span>,<span class="hljs-number">2</span>) != <span class="hljs-string">'#/'</span>) <span class="hljs-keyword">return</span>;
  <span class="hljs-keyword">var</span> parts = parsedRef.hash.split(<span class="hljs-string">'/'</span>);

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt; parts.length; i++) {
    <span class="hljs-keyword">var</span> part = parts[i];
    <span class="hljs-keyword">if</span> (part) {
      part = util.unescapeFragment(part);
      schema = schema[part];
      <span class="hljs-keyword">if</span> (!schema) <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">if</span> (schema.id &amp;&amp; !PREVENT_SCOPE_CHANGE[part]) baseId = resolveUrl(baseId, schema.id);
      <span class="hljs-keyword">if</span> (schema.$ref) {
        <span class="hljs-keyword">var</span> $ref = resolveUrl(baseId, schema.$ref);
        <span class="hljs-keyword">var</span> res = resolveSchema.call(<span class="hljs-keyword">this</span>, root, $ref);
        <span class="hljs-keyword">if</span> (res) {
          schema = res.schema;
          root = res.root;
          baseId = res.baseId;
        }
      }
    }
  }
  <span class="hljs-keyword">if</span> (schema &amp;&amp; schema != root.schema)
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">schema</span>: schema, <span class="hljs-attr">root</span>: root, <span class="hljs-attr">baseId</span>: baseId };
}


<span class="hljs-keyword">var</span> SIMPLE_INLINED = util.toHash([
  <span class="hljs-string">'type'</span>, <span class="hljs-string">'format'</span>, <span class="hljs-string">'pattern'</span>,
  <span class="hljs-string">'maxLength'</span>, <span class="hljs-string">'minLength'</span>,
  <span class="hljs-string">'maxProperties'</span>, <span class="hljs-string">'minProperties'</span>,
  <span class="hljs-string">'maxItems'</span>, <span class="hljs-string">'minItems'</span>,
  <span class="hljs-string">'maximum'</span>, <span class="hljs-string">'minimum'</span>,
  <span class="hljs-string">'uniqueItems'</span>, <span class="hljs-string">'multipleOf'</span>,
  <span class="hljs-string">'required'</span>, <span class="hljs-string">'enum'</span>
]);
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">inlineRef</span>(<span class="hljs-params">schema, limit</span>) </span>{
  <span class="hljs-keyword">if</span> (limit === <span class="hljs-literal">false</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">if</span> (limit === <span class="hljs-literal">undefined</span> || limit === <span class="hljs-literal">true</span>) <span class="hljs-keyword">return</span> checkNoRef(schema);
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (limit) <span class="hljs-keyword">return</span> countKeys(schema) &lt;= limit;
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkNoRef</span>(<span class="hljs-params">schema</span>) </span>{
  <span class="hljs-keyword">var</span> item;
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(schema)) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;schema.length; i++) {
      item = schema[i];
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> item == <span class="hljs-string">'object'</span> &amp;&amp; !checkNoRef(item)) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> schema) {
      <span class="hljs-keyword">if</span> (key == <span class="hljs-string">'$ref'</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      item = schema[key];
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> item == <span class="hljs-string">'object'</span> &amp;&amp; !checkNoRef(item)) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">countKeys</span>(<span class="hljs-params">schema</span>) </span>{
  <span class="hljs-keyword">var</span> count = <span class="hljs-number">0</span>, item;
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(schema)) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;schema.length; i++) {
      item = schema[i];
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> item == <span class="hljs-string">'object'</span>) count += countKeys(item);
      <span class="hljs-keyword">if</span> (count == <span class="hljs-literal">Infinity</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">Infinity</span>;
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> schema) {
      <span class="hljs-keyword">if</span> (key == <span class="hljs-string">'$ref'</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">Infinity</span>;
      <span class="hljs-keyword">if</span> (SIMPLE_INLINED[key]) {
        count++;
      } <span class="hljs-keyword">else</span> {
        item = schema[key];
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> item == <span class="hljs-string">'object'</span>) count += countKeys(item) + <span class="hljs-number">1</span>;
        <span class="hljs-keyword">if</span> (count == <span class="hljs-literal">Infinity</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">Infinity</span>;
      }
    }
  }
  <span class="hljs-keyword">return</span> count;
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getFullPath</span>(<span class="hljs-params">id, normalize</span>) </span>{
  <span class="hljs-keyword">if</span> (normalize !== <span class="hljs-literal">false</span>) id = normalizeId(id);
  <span class="hljs-keyword">var</span> p = url.parse(id, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>);
  <span class="hljs-keyword">return</span> _getFullPath(p);
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getFullPath</span>(<span class="hljs-params">p</span>) </span>{
  <span class="hljs-keyword">var</span> protocolSeparator = p.protocol || p.href.slice(<span class="hljs-number">0</span>,<span class="hljs-number">2</span>) == <span class="hljs-string">'//'</span> ? <span class="hljs-string">'//'</span> : <span class="hljs-string">''</span>;
  <span class="hljs-keyword">return</span> (p.protocol||<span class="hljs-string">''</span>) + protocolSeparator + (p.host||<span class="hljs-string">''</span>) + (p.path||<span class="hljs-string">''</span>)  + <span class="hljs-string">'#'</span>;
}


<span class="hljs-keyword">var</span> TRAILING_SLASH_HASH = <span class="hljs-regexp">/#\/?$/</span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeId</span>(<span class="hljs-params">id</span>) </span>{
  <span class="hljs-keyword">return</span> id ? id.replace(TRAILING_SLASH_HASH, <span class="hljs-string">''</span>) : <span class="hljs-string">''</span>;
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resolveUrl</span>(<span class="hljs-params">baseId, id</span>) </span>{
  id = normalizeId(id);
  <span class="hljs-keyword">return</span> url.resolve(baseId, id);
}


<span class="hljs-comment">/* @this Ajv */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resolveIds</span>(<span class="hljs-params">schema</span>) </span>{
  <span class="hljs-comment">/* eslint no-shadow: 0 */</span>
  <span class="hljs-comment">/* jshint validthis: true */</span>
  <span class="hljs-keyword">var</span> id = normalizeId(schema.id);
  <span class="hljs-keyword">var</span> localRefs = {};
  _resolveIds.call(<span class="hljs-keyword">this</span>, schema, getFullPath(id, <span class="hljs-literal">false</span>), id);
  <span class="hljs-keyword">return</span> localRefs;

  <span class="hljs-comment">/* @this Ajv */</span>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_resolveIds</span>(<span class="hljs-params">schema, fullPath, baseId</span>) </span>{
    <span class="hljs-comment">/* jshint validthis: true */</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(schema)) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;schema.length; i++)
        _resolveIds.call(<span class="hljs-keyword">this</span>, schema[i], fullPath+<span class="hljs-string">'/'</span>+i, baseId);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (schema &amp;&amp; <span class="hljs-keyword">typeof</span> schema == <span class="hljs-string">'object'</span>) {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> schema.id == <span class="hljs-string">'string'</span>) {
        <span class="hljs-keyword">var</span> id = baseId = baseId
                          ? url.resolve(baseId, schema.id)
                          : schema.id;
        id = normalizeId(id);

        <span class="hljs-keyword">var</span> refVal = <span class="hljs-keyword">this</span>._refs[id];
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> refVal == <span class="hljs-string">'string'</span>) refVal = <span class="hljs-keyword">this</span>._refs[refVal];
        <span class="hljs-keyword">if</span> (refVal &amp;&amp; refVal.schema) {
          <span class="hljs-keyword">if</span> (!equal(schema, refVal.schema))
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'id "'</span> + id + <span class="hljs-string">'" resolves to more than one schema'</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (id != normalizeId(fullPath)) {
          <span class="hljs-keyword">if</span> (id[<span class="hljs-number">0</span>] == <span class="hljs-string">'#'</span>) {
            <span class="hljs-keyword">if</span> (localRefs[id] &amp;&amp; !equal(schema, localRefs[id]))
              <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'id "'</span> + id + <span class="hljs-string">'" resolves to more than one schema'</span>);
            localRefs[id] = schema;
          } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">this</span>._refs[id] = fullPath;
          }
        }
      }
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> schema)
        _resolveIds.call(<span class="hljs-keyword">this</span>, schema[key], fullPath+<span class="hljs-string">'/'</span>+util.escapeFragment(key), baseId);
    }
  }
}

},{<span class="hljs-string">"./equal"</span>:<span class="hljs-number">4</span>,<span class="hljs-string">"./schema_obj"</span>:<span class="hljs-number">9</span>,<span class="hljs-string">"./util"</span>:<span class="hljs-number">11</span>,<span class="hljs-string">"url"</span>:<span class="hljs-number">50</span>}],<span class="hljs-number">8</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">var</span> ruleModules = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./_rules'</span>)
  , toHash = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./util'</span>).toHash;

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rules</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> RULES = [
    { <span class="hljs-attr">type</span>: <span class="hljs-string">'number'</span>,
      <span class="hljs-attr">rules</span>: [ <span class="hljs-string">'maximum'</span>, <span class="hljs-string">'minimum'</span>, <span class="hljs-string">'multipleOf'</span>] },
    { <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>,
      <span class="hljs-attr">rules</span>: [ <span class="hljs-string">'maxLength'</span>, <span class="hljs-string">'minLength'</span>, <span class="hljs-string">'pattern'</span>, <span class="hljs-string">'format'</span> ] },
    { <span class="hljs-attr">type</span>: <span class="hljs-string">'array'</span>,
      <span class="hljs-attr">rules</span>: [ <span class="hljs-string">'maxItems'</span>, <span class="hljs-string">'minItems'</span>, <span class="hljs-string">'uniqueItems'</span>, <span class="hljs-string">'items'</span> ] },
    { <span class="hljs-attr">type</span>: <span class="hljs-string">'object'</span>,
      <span class="hljs-attr">rules</span>: [ <span class="hljs-string">'maxProperties'</span>, <span class="hljs-string">'minProperties'</span>, <span class="hljs-string">'required'</span>, <span class="hljs-string">'dependencies'</span>, <span class="hljs-string">'properties'</span> ] },
    { <span class="hljs-attr">rules</span>: [ <span class="hljs-string">'$ref'</span>, <span class="hljs-string">'enum'</span>, <span class="hljs-string">'not'</span>, <span class="hljs-string">'anyOf'</span>, <span class="hljs-string">'oneOf'</span>, <span class="hljs-string">'allOf'</span> ] }
  ];

  <span class="hljs-keyword">var</span> ALL = [ <span class="hljs-string">'type'</span>, <span class="hljs-string">'additionalProperties'</span>, <span class="hljs-string">'patternProperties'</span> ];
  <span class="hljs-keyword">var</span> KEYWORDS = [ <span class="hljs-string">'additionalItems'</span>, <span class="hljs-string">'$schema'</span>, <span class="hljs-string">'id'</span>, <span class="hljs-string">'title'</span>, <span class="hljs-string">'description'</span>, <span class="hljs-string">'default'</span> ];
  <span class="hljs-keyword">var</span> TYPES = [ <span class="hljs-string">'number'</span>, <span class="hljs-string">'integer'</span>, <span class="hljs-string">'string'</span>, <span class="hljs-string">'array'</span>, <span class="hljs-string">'object'</span>, <span class="hljs-string">'boolean'</span>, <span class="hljs-string">'null'</span> ];
  RULES.all = toHash(ALL);

  RULES.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">group</span>) </span>{
    group.rules = group.rules.map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">keyword</span>) </span>{
      ALL.push(keyword);
      <span class="hljs-keyword">var</span> rule = RULES.all[keyword] = {
        <span class="hljs-attr">keyword</span>: keyword,
        <span class="hljs-attr">code</span>: ruleModules[keyword]
      };
      <span class="hljs-keyword">return</span> rule;
    });
  });

  RULES.keywords = toHash(ALL.concat(KEYWORDS));
  RULES.types = toHash(TYPES);
  RULES.custom = {};

  <span class="hljs-keyword">return</span> RULES;
};

},{<span class="hljs-string">"./_rules"</span>:<span class="hljs-number">3</span>,<span class="hljs-string">"./util"</span>:<span class="hljs-number">11</span>}],<span class="hljs-number">9</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">var</span> util = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./util'</span>);

<span class="hljs-built_in">module</span>.exports = SchemaObject;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">SchemaObject</span>(<span class="hljs-params">obj</span>) </span>{
  util.copy(obj, <span class="hljs-keyword">this</span>);
}

},{<span class="hljs-string">"./util"</span>:<span class="hljs-number">11</span>}],<span class="hljs-number">10</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-26" id="section-26"></a>
</div>
<p>https://mathiasbynens.be/notes/javascript-encoding
https://github.com/bestiejs/punycode.js - punycode.ucs2.decode</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ucs2length</span>(<span class="hljs-params">str</span>) </span>{
  <span class="hljs-keyword">var</span> length = <span class="hljs-number">0</span>
    , len = str.length
    , pos = <span class="hljs-number">0</span>
    , value;
  <span class="hljs-keyword">while</span> (pos &lt; len) {
    length++;
    value = str.charCodeAt(pos++);
    <span class="hljs-keyword">if</span> (value &gt;= <span class="hljs-number">0xD800</span> &amp;&amp; value &lt;= <span class="hljs-number">0xDBFF</span> &amp;&amp; pos &lt; len) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-27" id="section-27"></a>
</div>
<p>high surrogate, and there is a next character</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      value = str.charCodeAt(pos);
      <span class="hljs-keyword">if</span> ((value &amp; <span class="hljs-number">0xFC00</span>) == <span class="hljs-number">0xDC00</span>) pos++; <span class="hljs-comment">// low surrogate</span>
    }
  }
  <span class="hljs-keyword">return</span> length;
};

},{}],<span class="hljs-number">11</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;


<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">copy</span>: copy,
  <span class="hljs-attr">checkDataType</span>: checkDataType,
  <span class="hljs-attr">checkDataTypes</span>: checkDataTypes,
  <span class="hljs-attr">coerceToTypes</span>: coerceToTypes,
  <span class="hljs-attr">toHash</span>: toHash,
  <span class="hljs-attr">getProperty</span>: getProperty,
  <span class="hljs-attr">escapeQuotes</span>: escapeQuotes,
  <span class="hljs-attr">ucs2length</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'./ucs2length'</span>),
  <span class="hljs-attr">varOccurences</span>: varOccurences,
  <span class="hljs-attr">varReplace</span>: varReplace,
  <span class="hljs-attr">cleanUpCode</span>: cleanUpCode,
  <span class="hljs-attr">cleanUpVarErrors</span>: cleanUpVarErrors,
  <span class="hljs-attr">schemaHasRules</span>: schemaHasRules,
  <span class="hljs-attr">schemaHasRulesExcept</span>: schemaHasRulesExcept,
  <span class="hljs-attr">stableStringify</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'json-stable-stringify'</span>),
  <span class="hljs-attr">toQuotedString</span>: toQuotedString,
  <span class="hljs-attr">getPathExpr</span>: getPathExpr,
  <span class="hljs-attr">getPath</span>: getPath,
  <span class="hljs-attr">getData</span>: getData,
  <span class="hljs-attr">unescapeFragment</span>: unescapeFragment,
  <span class="hljs-attr">escapeFragment</span>: escapeFragment,
  <span class="hljs-attr">escapeJsonPointer</span>: escapeJsonPointer
};


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">copy</span>(<span class="hljs-params">o, to</span>) </span>{
  to = to || {};
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> o) to[key] = o[key];
  <span class="hljs-keyword">return</span> to;
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkDataType</span>(<span class="hljs-params">dataType, data, negate</span>) </span>{
  <span class="hljs-keyword">var</span> EQUAL = negate ? <span class="hljs-string">' !== '</span> : <span class="hljs-string">' === '</span>
    , AND = negate ? <span class="hljs-string">' || '</span> : <span class="hljs-string">' &amp;&amp; '</span>
    , OK = negate ? <span class="hljs-string">'!'</span> : <span class="hljs-string">''</span>
    , NOT = negate ? <span class="hljs-string">''</span> : <span class="hljs-string">'!'</span>;
  <span class="hljs-keyword">switch</span> (dataType) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'null'</span>: <span class="hljs-keyword">return</span> data + EQUAL + <span class="hljs-string">'null'</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'array'</span>: <span class="hljs-keyword">return</span> OK + <span class="hljs-string">'Array.isArray('</span> + data + <span class="hljs-string">')'</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'object'</span>: <span class="hljs-keyword">return</span> <span class="hljs-string">'('</span> + OK + data + AND +
                          <span class="hljs-string">'typeof '</span> + data + EQUAL + <span class="hljs-string">'"object"'</span> + AND +
                          NOT + <span class="hljs-string">'Array.isArray('</span> + data + <span class="hljs-string">'))'</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'integer'</span>: <span class="hljs-keyword">return</span> <span class="hljs-string">'(typeof '</span> + data + EQUAL + <span class="hljs-string">'"number"'</span> + AND +
                           NOT + <span class="hljs-string">'('</span> + data + <span class="hljs-string">' % 1)'</span> +
                           AND + data + EQUAL + data + <span class="hljs-string">')'</span>;
    <span class="hljs-keyword">default</span>: <span class="hljs-keyword">return</span> <span class="hljs-string">'typeof '</span> + data + EQUAL + <span class="hljs-string">'"'</span> + dataType + <span class="hljs-string">'"'</span>;
  }
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkDataTypes</span>(<span class="hljs-params">dataTypes, data</span>) </span>{
  <span class="hljs-keyword">switch</span> (dataTypes.length) {
    <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: <span class="hljs-keyword">return</span> checkDataType(dataTypes[<span class="hljs-number">0</span>], data, <span class="hljs-literal">true</span>);
    <span class="hljs-keyword">default</span>:
      <span class="hljs-keyword">var</span> code = <span class="hljs-string">''</span>;
      <span class="hljs-keyword">var</span> types = toHash(dataTypes);
      <span class="hljs-keyword">if</span> (types.array &amp;&amp; types.object) {
        code = types.null ? <span class="hljs-string">'('</span>: <span class="hljs-string">'(!'</span> + data + <span class="hljs-string">' || '</span>;
        code += <span class="hljs-string">'typeof '</span> + data + <span class="hljs-string">' !== "object")'</span>;
        <span class="hljs-keyword">delete</span> types.null;
        <span class="hljs-keyword">delete</span> types.array;
        <span class="hljs-keyword">delete</span> types.object;
      }
      <span class="hljs-keyword">if</span> (types.number) <span class="hljs-keyword">delete</span> types.integer;
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> t <span class="hljs-keyword">in</span> types)
        code += (code ? <span class="hljs-string">' &amp;&amp; '</span> : <span class="hljs-string">''</span> ) + checkDataType(t, data, <span class="hljs-literal">true</span>);

      <span class="hljs-keyword">return</span> code;
  }
}


<span class="hljs-keyword">var</span> COERCE_TO_TYPES = toHash([ <span class="hljs-string">'string'</span>, <span class="hljs-string">'number'</span>, <span class="hljs-string">'integer'</span>, <span class="hljs-string">'boolean'</span>, <span class="hljs-string">'null'</span> ]);
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">coerceToTypes</span>(<span class="hljs-params">optionCoerceTypes, dataTypes</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(dataTypes)) {
    <span class="hljs-keyword">var</span> types = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;dataTypes.length; i++) {
      <span class="hljs-keyword">var</span> t = dataTypes[i];
      <span class="hljs-keyword">if</span> (COERCE_TO_TYPES[t]) types[types.length] = t;
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (optionCoerceTypes === <span class="hljs-string">'array'</span> &amp;&amp; t === <span class="hljs-string">'array'</span>) types[types.length] = t;
    }
    <span class="hljs-keyword">if</span> (types.length) <span class="hljs-keyword">return</span> types;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (COERCE_TO_TYPES[dataTypes]) {
    <span class="hljs-keyword">return</span> [dataTypes];
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (optionCoerceTypes === <span class="hljs-string">'array'</span> &amp;&amp; dataTypes === <span class="hljs-string">'array'</span>) {
    <span class="hljs-keyword">return</span> [<span class="hljs-string">'array'</span>];
  }
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toHash</span>(<span class="hljs-params">arr</span>) </span>{
  <span class="hljs-keyword">var</span> hash = {};
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;arr.length; i++) hash[arr[i]] = <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">return</span> hash;
}


<span class="hljs-keyword">var</span> IDENTIFIER = <span class="hljs-regexp">/^[a-z$_][a-z$_0-9]*$/i</span>;
<span class="hljs-keyword">var</span> SINGLE_QUOTE = <span class="hljs-regexp">/'|\\/g</span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getProperty</span>(<span class="hljs-params">key</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> key == <span class="hljs-string">'number'</span>
          ? <span class="hljs-string">'['</span> + key + <span class="hljs-string">']'</span>
          : IDENTIFIER.test(key)
            ? <span class="hljs-string">'.'</span> + key
            : <span class="hljs-string">"['"</span> + escapeQuotes(key) + <span class="hljs-string">"']"</span>;
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">escapeQuotes</span>(<span class="hljs-params">str</span>) </span>{
  <span class="hljs-keyword">return</span> str.replace(SINGLE_QUOTE, <span class="hljs-string">'\\$&amp;'</span>)
            .replace(<span class="hljs-regexp">/\n/g</span>, <span class="hljs-string">'\\n'</span>)
            .replace(<span class="hljs-regexp">/\r/g</span>, <span class="hljs-string">'\\r'</span>)
            .replace(<span class="hljs-regexp">/\f/g</span>, <span class="hljs-string">'\\f'</span>)
            .replace(<span class="hljs-regexp">/\t/g</span>, <span class="hljs-string">'\\t'</span>);
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">varOccurences</span>(<span class="hljs-params">str, dataVar</span>) </span>{
  dataVar += <span class="hljs-string">'[^0-9]'</span>;
  <span class="hljs-keyword">var</span> matches = str.match(<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(dataVar, <span class="hljs-string">'g'</span>));
  <span class="hljs-keyword">return</span> matches ? matches.length : <span class="hljs-number">0</span>;
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">varReplace</span>(<span class="hljs-params">str, dataVar, expr</span>) </span>{
  dataVar += <span class="hljs-string">'([^0-9])'</span>;
  expr = expr.replace(<span class="hljs-regexp">/\$/g</span>, <span class="hljs-string">'$$$$'</span>);
  <span class="hljs-keyword">return</span> str.replace(<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(dataVar, <span class="hljs-string">'g'</span>), expr + <span class="hljs-string">'$1'</span>);
}


<span class="hljs-keyword">var</span> EMPTY_ELSE = <span class="hljs-regexp">/else\s*{\s*}/g</span>
  , EMPTY_IF_NO_ELSE = <span class="hljs-regexp">/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g</span>
  , EMPTY_IF_WITH_ELSE = <span class="hljs-regexp">/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g</span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cleanUpCode</span>(<span class="hljs-params">out</span>) </span>{
  <span class="hljs-keyword">return</span> out.replace(EMPTY_ELSE, <span class="hljs-string">''</span>)
            .replace(EMPTY_IF_NO_ELSE, <span class="hljs-string">''</span>)
            .replace(EMPTY_IF_WITH_ELSE, <span class="hljs-string">'if (!($1))'</span>);
}


<span class="hljs-keyword">var</span> ERRORS_REGEXP = <span class="hljs-regexp">/[^v\.]errors/g</span>
  , REMOVE_ERRORS = <span class="hljs-regexp">/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g</span>
  , REMOVE_ERRORS_ASYNC = <span class="hljs-regexp">/var errors = 0;|var vErrors = null;/g</span>
  , RETURN_VALID = <span class="hljs-string">'return errors === 0;'</span>
  , RETURN_TRUE = <span class="hljs-string">'validate.errors = null; return true;'</span>
  , RETURN_ASYNC = <span class="hljs-regexp">/if \(errors === 0\) return true;\s*else throw new ValidationError\(vErrors\);/</span>
  , RETURN_TRUE_ASYNC = <span class="hljs-string">'return true;'</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cleanUpVarErrors</span>(<span class="hljs-params">out, async</span>) </span>{
  <span class="hljs-keyword">var</span> matches = out.match(ERRORS_REGEXP);
  <span class="hljs-keyword">if</span> (!matches || matches.length !== <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> out;
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">async</span>
          ? out.replace(REMOVE_ERRORS_ASYNC, <span class="hljs-string">''</span>)
               .replace(RETURN_ASYNC, RETURN_TRUE_ASYNC)
          : out.replace(REMOVE_ERRORS, <span class="hljs-string">''</span>)
               .replace(RETURN_VALID, RETURN_TRUE);
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">schemaHasRules</span>(<span class="hljs-params">schema, rules</span>) </span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> schema) <span class="hljs-keyword">if</span> (rules[key]) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">schemaHasRulesExcept</span>(<span class="hljs-params">schema, rules, exceptKeyword</span>) </span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> schema) <span class="hljs-keyword">if</span> (key != exceptKeyword &amp;&amp; rules[key]) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toQuotedString</span>(<span class="hljs-params">str</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">'\''</span> + escapeQuotes(str) + <span class="hljs-string">'\''</span>;
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getPathExpr</span>(<span class="hljs-params">currentPath, expr, jsonPointers, isNumber</span>) </span>{
  <span class="hljs-keyword">var</span> path = jsonPointers <span class="hljs-comment">// false by default</span>
              ? <span class="hljs-string">'\'/\' + '</span> + expr + (isNumber ? <span class="hljs-string">''</span> : <span class="hljs-string">'.replace(/~/g, \'~0\').replace(/\\//g, \'~1\')'</span>)
              : (isNumber ? <span class="hljs-string">'\'[\' + '</span> + expr + <span class="hljs-string">' + \']\''</span> : <span class="hljs-string">'\'[\\\'\' + '</span> + expr + <span class="hljs-string">' + \'\\\']\''</span>);
  <span class="hljs-keyword">return</span> joinPaths(currentPath, path);
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getPath</span>(<span class="hljs-params">currentPath, prop, jsonPointers</span>) </span>{
  <span class="hljs-keyword">var</span> path = jsonPointers <span class="hljs-comment">// false by default</span>
              ? toQuotedString(<span class="hljs-string">'/'</span> + escapeJsonPointer(prop))
              : toQuotedString(getProperty(prop));
  <span class="hljs-keyword">return</span> joinPaths(currentPath, path);
}


<span class="hljs-keyword">var</span> JSON_POINTER = <span class="hljs-regexp">/^\/(?:[^~]|~0|~1)*$/</span>;
<span class="hljs-keyword">var</span> RELATIVE_JSON_POINTER = <span class="hljs-regexp">/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/</span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getData</span>(<span class="hljs-params">$data, lvl, paths</span>) </span>{
  <span class="hljs-keyword">var</span> up, jsonPointer, data, matches;
  <span class="hljs-keyword">if</span> ($data === <span class="hljs-string">''</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">'rootData'</span>;
  <span class="hljs-keyword">if</span> ($data[<span class="hljs-number">0</span>] == <span class="hljs-string">'/'</span>) {
    <span class="hljs-keyword">if</span> (!JSON_POINTER.test($data)) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Invalid JSON-pointer: '</span> + $data);
    jsonPointer = $data;
    data = <span class="hljs-string">'rootData'</span>;
  } <span class="hljs-keyword">else</span> {
    matches = $data.match(RELATIVE_JSON_POINTER);
    <span class="hljs-keyword">if</span> (!matches) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Invalid JSON-pointer: '</span> + $data);
    up = +matches[<span class="hljs-number">1</span>];
    jsonPointer = matches[<span class="hljs-number">2</span>];
    <span class="hljs-keyword">if</span> (jsonPointer == <span class="hljs-string">'#'</span>) {
      <span class="hljs-keyword">if</span> (up &gt;= lvl) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Cannot access property/index '</span> + up + <span class="hljs-string">' levels up, current level is '</span> + lvl);
      <span class="hljs-keyword">return</span> paths[lvl - up];
    }

    <span class="hljs-keyword">if</span> (up &gt; lvl) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Cannot access data '</span> + up + <span class="hljs-string">' levels up, current level is '</span> + lvl);
    data = <span class="hljs-string">'data'</span> + ((lvl - up) || <span class="hljs-string">''</span>);
    <span class="hljs-keyword">if</span> (!jsonPointer) <span class="hljs-keyword">return</span> data;
  }

  <span class="hljs-keyword">var</span> expr = data;
  <span class="hljs-keyword">var</span> segments = jsonPointer.split(<span class="hljs-string">'/'</span>);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;segments.length; i++) {
    <span class="hljs-keyword">var</span> segment = segments[i];
    <span class="hljs-keyword">if</span> (segment) {
      data += getProperty(unescapeJsonPointer(segment));
      expr += <span class="hljs-string">' &amp;&amp; '</span> + data;
    }
  }
  <span class="hljs-keyword">return</span> expr;
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">joinPaths</span> (<span class="hljs-params">a, b</span>) </span>{
  <span class="hljs-keyword">if</span> (a == <span class="hljs-string">'""'</span>) <span class="hljs-keyword">return</span> b;
  <span class="hljs-keyword">return</span> (a + <span class="hljs-string">' + '</span> + b).replace(<span class="hljs-regexp">/' \+ '/g</span>, <span class="hljs-string">''</span>);
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unescapeFragment</span>(<span class="hljs-params">str</span>) </span>{
  <span class="hljs-keyword">return</span> unescapeJsonPointer(<span class="hljs-built_in">decodeURIComponent</span>(str));
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">escapeFragment</span>(<span class="hljs-params">str</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">encodeURIComponent</span>(escapeJsonPointer(str));
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">escapeJsonPointer</span>(<span class="hljs-params">str</span>) </span>{
  <span class="hljs-keyword">return</span> str.replace(<span class="hljs-regexp">/~/g</span>, <span class="hljs-string">'~0'</span>).replace(<span class="hljs-regexp">/\//g</span>, <span class="hljs-string">'~1'</span>);
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unescapeJsonPointer</span>(<span class="hljs-params">str</span>) </span>{
  <span class="hljs-keyword">return</span> str.replace(<span class="hljs-regexp">/~1/g</span>, <span class="hljs-string">'/'</span>).replace(<span class="hljs-regexp">/~0/g</span>, <span class="hljs-string">'~'</span>);
}

},{<span class="hljs-string">"./ucs2length"</span>:<span class="hljs-number">10</span>,<span class="hljs-string">"json-stable-stringify"</span>:<span class="hljs-number">42</span>}],<span class="hljs-number">12</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;

<span class="hljs-built_in">module</span>.exports = ValidationError;


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ValidationError</span>(<span class="hljs-params">errors</span>) </span>{
  <span class="hljs-keyword">this</span>.message = <span class="hljs-string">'validation failed'</span>;
  <span class="hljs-keyword">this</span>.errors = errors;
  <span class="hljs-keyword">this</span>.ajv = <span class="hljs-keyword">this</span>.validation = <span class="hljs-literal">true</span>;
}


ValidationError.prototype = <span class="hljs-built_in">Object</span>.create(<span class="hljs-built_in">Error</span>.prototype);
ValidationError.prototype.constructor = ValidationError;

},{}],<span class="hljs-number">13</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generate__formatLimit</span>(<span class="hljs-params">it, $keyword</span>) </span>{
  <span class="hljs-keyword">var</span> out = <span class="hljs-string">' '</span>;
  <span class="hljs-keyword">var</span> $lvl = it.level;
  <span class="hljs-keyword">var</span> $dataLvl = it.dataLevel;
  <span class="hljs-keyword">var</span> $schema = it.schema[$keyword];
  <span class="hljs-keyword">var</span> $schemaPath = it.schemaPath + it.util.getProperty($keyword);
  <span class="hljs-keyword">var</span> $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/'</span> + $keyword;
  <span class="hljs-keyword">var</span> $breakOnError = !it.opts.allErrors;
  <span class="hljs-keyword">var</span> $errorKeyword;
  <span class="hljs-keyword">var</span> $data = <span class="hljs-string">'data'</span> + ($dataLvl || <span class="hljs-string">''</span>);
  <span class="hljs-keyword">var</span> $valid = <span class="hljs-string">'valid'</span> + $lvl;
  out += <span class="hljs-string">'var '</span> + ($valid) + <span class="hljs-string">' = undefined;'</span>;
  <span class="hljs-keyword">if</span> (it.opts.format === <span class="hljs-literal">false</span>) {
    out += <span class="hljs-string">' '</span> + ($valid) + <span class="hljs-string">' = true; '</span>;
    <span class="hljs-keyword">return</span> out;
  }
  <span class="hljs-keyword">var</span> $schemaFormat = it.schema.format,
    $isDataFormat = it.opts.v5 &amp;&amp; $schemaFormat.$data,
    $closingBraces = <span class="hljs-string">''</span>;
  <span class="hljs-keyword">if</span> ($isDataFormat) {
    <span class="hljs-keyword">var</span> $schemaValueFormat = it.util.getData($schemaFormat.$data, $dataLvl, it.dataPathArr),
      $format = <span class="hljs-string">'format'</span> + $lvl,
      $compare = <span class="hljs-string">'compare'</span> + $lvl;
    out += <span class="hljs-string">' var '</span> + ($format) + <span class="hljs-string">' = formats['</span> + ($schemaValueFormat) + <span class="hljs-string">'] , '</span> + ($compare) + <span class="hljs-string">' = '</span> + ($format) + <span class="hljs-string">' &amp;&amp; '</span> + ($format) + <span class="hljs-string">'.compare;'</span>;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">var</span> $format = it.formats[$schemaFormat];
    <span class="hljs-keyword">if</span> (!($format &amp;&amp; $format.compare)) {
      out += <span class="hljs-string">'  '</span> + ($valid) + <span class="hljs-string">' = true; '</span>;
      <span class="hljs-keyword">return</span> out;
    }
    <span class="hljs-keyword">var</span> $compare = <span class="hljs-string">'formats'</span> + it.util.getProperty($schemaFormat) + <span class="hljs-string">'.compare'</span>;
  }
  <span class="hljs-keyword">var</span> $isMax = $keyword == <span class="hljs-string">'formatMaximum'</span>,
    $exclusiveKeyword = <span class="hljs-string">'formatExclusive'</span> + ($isMax ? <span class="hljs-string">'Maximum'</span> : <span class="hljs-string">'Minimum'</span>),
    $schemaExcl = it.schema[$exclusiveKeyword],
    $isDataExcl = it.opts.v5 &amp;&amp; $schemaExcl &amp;&amp; $schemaExcl.$data,
    $op = $isMax ? <span class="hljs-string">'&lt;'</span> : <span class="hljs-string">'&gt;'</span>,
    $result = <span class="hljs-string">'result'</span> + $lvl;
  <span class="hljs-keyword">var</span> $isData = it.opts.v5 &amp;&amp; $schema &amp;&amp; $schema.$data,
    $schemaValue;
  <span class="hljs-keyword">if</span> ($isData) {
    out += <span class="hljs-string">' var schema'</span> + ($lvl) + <span class="hljs-string">' = '</span> + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + <span class="hljs-string">'; '</span>;
    $schemaValue = <span class="hljs-string">'schema'</span> + $lvl;
  } <span class="hljs-keyword">else</span> {
    $schemaValue = $schema;
  }
  <span class="hljs-keyword">if</span> ($isDataExcl) {
    <span class="hljs-keyword">var</span> $schemaValueExcl = it.util.getData($schemaExcl.$data, $dataLvl, it.dataPathArr),
      $exclusive = <span class="hljs-string">'exclusive'</span> + $lvl,
      $opExpr = <span class="hljs-string">'op'</span> + $lvl,
      $opStr = <span class="hljs-string">'\' + '</span> + $opExpr + <span class="hljs-string">' + \''</span>;
    out += <span class="hljs-string">' var schemaExcl'</span> + ($lvl) + <span class="hljs-string">' = '</span> + ($schemaValueExcl) + <span class="hljs-string">'; '</span>;
    $schemaValueExcl = <span class="hljs-string">'schemaExcl'</span> + $lvl;
    out += <span class="hljs-string">' if (typeof '</span> + ($schemaValueExcl) + <span class="hljs-string">' != \'boolean\' &amp;&amp; '</span> + ($schemaValueExcl) + <span class="hljs-string">' !== undefined) { '</span> + ($valid) + <span class="hljs-string">' = false; '</span>;
    <span class="hljs-keyword">var</span> $errorKeyword = $exclusiveKeyword;
    <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
    $$outStack.push(out);
    out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
    <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
      out += <span class="hljs-string">' { keyword: \''</span> + ($errorKeyword || <span class="hljs-string">'_formatExclusiveLimit'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: {} '</span>;
      <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
        out += <span class="hljs-string">' , message: \''</span> + ($exclusiveKeyword) + <span class="hljs-string">' should be boolean\' '</span>;
      }
      <span class="hljs-keyword">if</span> (it.opts.verbose) {
        out += <span class="hljs-string">' , schema: validate.schema'</span> + ($schemaPath) + <span class="hljs-string">' , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
      }
      out += <span class="hljs-string">' } '</span>;
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' {} '</span>;
    }
    <span class="hljs-keyword">var</span> __err = out;
    out = $$outStack.pop();
    <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
      <span class="hljs-keyword">if</span> (it.async) {
        out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
      }
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
    }
    out += <span class="hljs-string">' }  '</span>;
    <span class="hljs-keyword">if</span> ($breakOnError) {
      $closingBraces += <span class="hljs-string">'}'</span>;
      out += <span class="hljs-string">' else { '</span>;
    }
    <span class="hljs-keyword">if</span> ($isData) {
      out += <span class="hljs-string">' if ('</span> + ($schemaValue) + <span class="hljs-string">' === undefined) '</span> + ($valid) + <span class="hljs-string">' = true; else if (typeof '</span> + ($schemaValue) + <span class="hljs-string">' != \'string\') '</span> + ($valid) + <span class="hljs-string">' = false; else { '</span>;
      $closingBraces += <span class="hljs-string">'}'</span>;
    }
    <span class="hljs-keyword">if</span> ($isDataFormat) {
      out += <span class="hljs-string">' if (!'</span> + ($compare) + <span class="hljs-string">') '</span> + ($valid) + <span class="hljs-string">' = true; else { '</span>;
      $closingBraces += <span class="hljs-string">'}'</span>;
    }
    out += <span class="hljs-string">' var '</span> + ($result) + <span class="hljs-string">' = '</span> + ($compare) + <span class="hljs-string">'('</span> + ($data) + <span class="hljs-string">',  '</span>;
    <span class="hljs-keyword">if</span> ($isData) {
      out += <span class="hljs-string">''</span> + ($schemaValue);
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">''</span> + (it.util.toQuotedString($schema));
    }
    out += <span class="hljs-string">' ); if ('</span> + ($result) + <span class="hljs-string">' === undefined) '</span> + ($valid) + <span class="hljs-string">' = false; var '</span> + ($exclusive) + <span class="hljs-string">' = '</span> + ($schemaValueExcl) + <span class="hljs-string">' === true; if ('</span> + ($valid) + <span class="hljs-string">' === undefined) { '</span> + ($valid) + <span class="hljs-string">' = '</span> + ($exclusive) + <span class="hljs-string">' ? '</span> + ($result) + <span class="hljs-string">' '</span> + ($op) + <span class="hljs-string">' 0 : '</span> + ($result) + <span class="hljs-string">' '</span> + ($op) + <span class="hljs-string">'= 0; } if (!'</span> + ($valid) + <span class="hljs-string">') var op'</span> + ($lvl) + <span class="hljs-string">' = '</span> + ($exclusive) + <span class="hljs-string">' ? \''</span> + ($op) + <span class="hljs-string">'\' : \''</span> + ($op) + <span class="hljs-string">'=\';'</span>;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">var</span> $exclusive = $schemaExcl === <span class="hljs-literal">true</span>,
      $opStr = $op;
    <span class="hljs-keyword">if</span> (!$exclusive) $opStr += <span class="hljs-string">'='</span>;
    <span class="hljs-keyword">var</span> $opExpr = <span class="hljs-string">'\''</span> + $opStr + <span class="hljs-string">'\''</span>;
    <span class="hljs-keyword">if</span> ($isData) {
      out += <span class="hljs-string">' if ('</span> + ($schemaValue) + <span class="hljs-string">' === undefined) '</span> + ($valid) + <span class="hljs-string">' = true; else if (typeof '</span> + ($schemaValue) + <span class="hljs-string">' != \'string\') '</span> + ($valid) + <span class="hljs-string">' = false; else { '</span>;
      $closingBraces += <span class="hljs-string">'}'</span>;
    }
    <span class="hljs-keyword">if</span> ($isDataFormat) {
      out += <span class="hljs-string">' if (!'</span> + ($compare) + <span class="hljs-string">') '</span> + ($valid) + <span class="hljs-string">' = true; else { '</span>;
      $closingBraces += <span class="hljs-string">'}'</span>;
    }
    out += <span class="hljs-string">' var '</span> + ($result) + <span class="hljs-string">' = '</span> + ($compare) + <span class="hljs-string">'('</span> + ($data) + <span class="hljs-string">',  '</span>;
    <span class="hljs-keyword">if</span> ($isData) {
      out += <span class="hljs-string">''</span> + ($schemaValue);
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">''</span> + (it.util.toQuotedString($schema));
    }
    out += <span class="hljs-string">' ); if ('</span> + ($result) + <span class="hljs-string">' === undefined) '</span> + ($valid) + <span class="hljs-string">' = false; if ('</span> + ($valid) + <span class="hljs-string">' === undefined) '</span> + ($valid) + <span class="hljs-string">' = '</span> + ($result) + <span class="hljs-string">' '</span> + ($op);
    <span class="hljs-keyword">if</span> (!$exclusive) {
      out += <span class="hljs-string">'='</span>;
    }
    out += <span class="hljs-string">' 0;'</span>;
  }
  out += <span class="hljs-string">''</span> + ($closingBraces) + <span class="hljs-string">'if (!'</span> + ($valid) + <span class="hljs-string">') { '</span>;
  <span class="hljs-keyword">var</span> $errorKeyword = $keyword;
  <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
  $$outStack.push(out);
  out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
  <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
    out += <span class="hljs-string">' { keyword: \''</span> + ($errorKeyword || <span class="hljs-string">'_formatLimit'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { comparison: '</span> + ($opExpr) + <span class="hljs-string">', limit:  '</span>;
    <span class="hljs-keyword">if</span> ($isData) {
      out += <span class="hljs-string">''</span> + ($schemaValue);
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">''</span> + (it.util.toQuotedString($schema));
    }
    out += <span class="hljs-string">' , exclusive: '</span> + ($exclusive) + <span class="hljs-string">' } '</span>;
    <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
      out += <span class="hljs-string">' , message: \'should be '</span> + ($opStr) + <span class="hljs-string">' "'</span>;
      <span class="hljs-keyword">if</span> ($isData) {
        out += <span class="hljs-string">'\' + '</span> + ($schemaValue) + <span class="hljs-string">' + \''</span>;
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">''</span> + (it.util.escapeQuotes($schema));
      }
      out += <span class="hljs-string">'"\' '</span>;
    }
    <span class="hljs-keyword">if</span> (it.opts.verbose) {
      out += <span class="hljs-string">' , schema:  '</span>;
      <span class="hljs-keyword">if</span> ($isData) {
        out += <span class="hljs-string">'validate.schema'</span> + ($schemaPath);
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">''</span> + (it.util.toQuotedString($schema));
      }
      out += <span class="hljs-string">'         , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
    }
    out += <span class="hljs-string">' } '</span>;
  } <span class="hljs-keyword">else</span> {
    out += <span class="hljs-string">' {} '</span>;
  }
  <span class="hljs-keyword">var</span> __err = out;
  out = $$outStack.pop();
  <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
    <span class="hljs-keyword">if</span> (it.async) {
      out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
    }
  } <span class="hljs-keyword">else</span> {
    out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
  }
  out += <span class="hljs-string">'}'</span>;
  <span class="hljs-keyword">return</span> out;
}

},{}],<span class="hljs-number">14</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generate__limit</span>(<span class="hljs-params">it, $keyword</span>) </span>{
  <span class="hljs-keyword">var</span> out = <span class="hljs-string">' '</span>;
  <span class="hljs-keyword">var</span> $lvl = it.level;
  <span class="hljs-keyword">var</span> $dataLvl = it.dataLevel;
  <span class="hljs-keyword">var</span> $schema = it.schema[$keyword];
  <span class="hljs-keyword">var</span> $schemaPath = it.schemaPath + it.util.getProperty($keyword);
  <span class="hljs-keyword">var</span> $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/'</span> + $keyword;
  <span class="hljs-keyword">var</span> $breakOnError = !it.opts.allErrors;
  <span class="hljs-keyword">var</span> $errorKeyword;
  <span class="hljs-keyword">var</span> $data = <span class="hljs-string">'data'</span> + ($dataLvl || <span class="hljs-string">''</span>);
  <span class="hljs-keyword">var</span> $isData = it.opts.v5 &amp;&amp; $schema &amp;&amp; $schema.$data,
    $schemaValue;
  <span class="hljs-keyword">if</span> ($isData) {
    out += <span class="hljs-string">' var schema'</span> + ($lvl) + <span class="hljs-string">' = '</span> + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + <span class="hljs-string">'; '</span>;
    $schemaValue = <span class="hljs-string">'schema'</span> + $lvl;
  } <span class="hljs-keyword">else</span> {
    $schemaValue = $schema;
  }
  <span class="hljs-keyword">var</span> $isMax = $keyword == <span class="hljs-string">'maximum'</span>,
    $exclusiveKeyword = $isMax ? <span class="hljs-string">'exclusiveMaximum'</span> : <span class="hljs-string">'exclusiveMinimum'</span>,
    $schemaExcl = it.schema[$exclusiveKeyword],
    $isDataExcl = it.opts.v5 &amp;&amp; $schemaExcl &amp;&amp; $schemaExcl.$data,
    $op = $isMax ? <span class="hljs-string">'&lt;'</span> : <span class="hljs-string">'&gt;'</span>,
    $notOp = $isMax ? <span class="hljs-string">'&gt;'</span> : <span class="hljs-string">'&lt;'</span>;
  <span class="hljs-keyword">if</span> ($isDataExcl) {
    <span class="hljs-keyword">var</span> $schemaValueExcl = it.util.getData($schemaExcl.$data, $dataLvl, it.dataPathArr),
      $exclusive = <span class="hljs-string">'exclusive'</span> + $lvl,
      $opExpr = <span class="hljs-string">'op'</span> + $lvl,
      $opStr = <span class="hljs-string">'\' + '</span> + $opExpr + <span class="hljs-string">' + \''</span>;
    out += <span class="hljs-string">' var schemaExcl'</span> + ($lvl) + <span class="hljs-string">' = '</span> + ($schemaValueExcl) + <span class="hljs-string">'; '</span>;
    $schemaValueExcl = <span class="hljs-string">'schemaExcl'</span> + $lvl;
    out += <span class="hljs-string">' var exclusive'</span> + ($lvl) + <span class="hljs-string">'; if (typeof '</span> + ($schemaValueExcl) + <span class="hljs-string">' != \'boolean\' &amp;&amp; typeof '</span> + ($schemaValueExcl) + <span class="hljs-string">' != \'undefined\') { '</span>;
    <span class="hljs-keyword">var</span> $errorKeyword = $exclusiveKeyword;
    <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
    $$outStack.push(out);
    out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
    <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
      out += <span class="hljs-string">' { keyword: \''</span> + ($errorKeyword || <span class="hljs-string">'_exclusiveLimit'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: {} '</span>;
      <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
        out += <span class="hljs-string">' , message: \''</span> + ($exclusiveKeyword) + <span class="hljs-string">' should be boolean\' '</span>;
      }
      <span class="hljs-keyword">if</span> (it.opts.verbose) {
        out += <span class="hljs-string">' , schema: validate.schema'</span> + ($schemaPath) + <span class="hljs-string">' , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
      }
      out += <span class="hljs-string">' } '</span>;
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' {} '</span>;
    }
    <span class="hljs-keyword">var</span> __err = out;
    out = $$outStack.pop();
    <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
      <span class="hljs-keyword">if</span> (it.async) {
        out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
      }
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
    }
    out += <span class="hljs-string">' } else if( '</span>;
    <span class="hljs-keyword">if</span> ($isData) {
      out += <span class="hljs-string">' ('</span> + ($schemaValue) + <span class="hljs-string">' !== undefined &amp;&amp; typeof '</span> + ($schemaValue) + <span class="hljs-string">' != \'number\') || '</span>;
    }
    out += <span class="hljs-string">' ((exclusive'</span> + ($lvl) + <span class="hljs-string">' = '</span> + ($schemaValueExcl) + <span class="hljs-string">' === true) ? '</span> + ($data) + <span class="hljs-string">' '</span> + ($notOp) + <span class="hljs-string">'= '</span> + ($schemaValue) + <span class="hljs-string">' : '</span> + ($data) + <span class="hljs-string">' '</span> + ($notOp) + <span class="hljs-string">' '</span> + ($schemaValue) + <span class="hljs-string">') || '</span> + ($data) + <span class="hljs-string">' !== '</span> + ($data) + <span class="hljs-string">') { var op'</span> + ($lvl) + <span class="hljs-string">' = exclusive'</span> + ($lvl) + <span class="hljs-string">' ? \''</span> + ($op) + <span class="hljs-string">'\' : \''</span> + ($op) + <span class="hljs-string">'=\';'</span>;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">var</span> $exclusive = $schemaExcl === <span class="hljs-literal">true</span>,
      $opStr = $op;
    <span class="hljs-keyword">if</span> (!$exclusive) $opStr += <span class="hljs-string">'='</span>;
    <span class="hljs-keyword">var</span> $opExpr = <span class="hljs-string">'\''</span> + $opStr + <span class="hljs-string">'\''</span>;
    out += <span class="hljs-string">' if ( '</span>;
    <span class="hljs-keyword">if</span> ($isData) {
      out += <span class="hljs-string">' ('</span> + ($schemaValue) + <span class="hljs-string">' !== undefined &amp;&amp; typeof '</span> + ($schemaValue) + <span class="hljs-string">' != \'number\') || '</span>;
    }
    out += <span class="hljs-string">' '</span> + ($data) + <span class="hljs-string">' '</span> + ($notOp);
    <span class="hljs-keyword">if</span> ($exclusive) {
      out += <span class="hljs-string">'='</span>;
    }
    out += <span class="hljs-string">' '</span> + ($schemaValue) + <span class="hljs-string">' || '</span> + ($data) + <span class="hljs-string">' !== '</span> + ($data) + <span class="hljs-string">') {'</span>;
  }
  <span class="hljs-keyword">var</span> $errorKeyword = $keyword;
  <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
  $$outStack.push(out);
  out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
  <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
    out += <span class="hljs-string">' { keyword: \''</span> + ($errorKeyword || <span class="hljs-string">'_limit'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { comparison: '</span> + ($opExpr) + <span class="hljs-string">', limit: '</span> + ($schemaValue) + <span class="hljs-string">', exclusive: '</span> + ($exclusive) + <span class="hljs-string">' } '</span>;
    <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
      out += <span class="hljs-string">' , message: \'should be '</span> + ($opStr) + <span class="hljs-string">' '</span>;
      <span class="hljs-keyword">if</span> ($isData) {
        out += <span class="hljs-string">'\' + '</span> + ($schemaValue);
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">''</span> + ($schema) + <span class="hljs-string">'\''</span>;
      }
    }
    <span class="hljs-keyword">if</span> (it.opts.verbose) {
      out += <span class="hljs-string">' , schema:  '</span>;
      <span class="hljs-keyword">if</span> ($isData) {
        out += <span class="hljs-string">'validate.schema'</span> + ($schemaPath);
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">''</span> + ($schema);
      }
      out += <span class="hljs-string">'         , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
    }
    out += <span class="hljs-string">' } '</span>;
  } <span class="hljs-keyword">else</span> {
    out += <span class="hljs-string">' {} '</span>;
  }
  <span class="hljs-keyword">var</span> __err = out;
  out = $$outStack.pop();
  <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
    <span class="hljs-keyword">if</span> (it.async) {
      out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
    }
  } <span class="hljs-keyword">else</span> {
    out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
  }
  out += <span class="hljs-string">' } '</span>;
  <span class="hljs-keyword">if</span> ($breakOnError) {
    out += <span class="hljs-string">' else { '</span>;
  }
  <span class="hljs-keyword">return</span> out;
}

},{}],<span class="hljs-number">15</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generate__limitItems</span>(<span class="hljs-params">it, $keyword</span>) </span>{
  <span class="hljs-keyword">var</span> out = <span class="hljs-string">' '</span>;
  <span class="hljs-keyword">var</span> $lvl = it.level;
  <span class="hljs-keyword">var</span> $dataLvl = it.dataLevel;
  <span class="hljs-keyword">var</span> $schema = it.schema[$keyword];
  <span class="hljs-keyword">var</span> $schemaPath = it.schemaPath + it.util.getProperty($keyword);
  <span class="hljs-keyword">var</span> $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/'</span> + $keyword;
  <span class="hljs-keyword">var</span> $breakOnError = !it.opts.allErrors;
  <span class="hljs-keyword">var</span> $errorKeyword;
  <span class="hljs-keyword">var</span> $data = <span class="hljs-string">'data'</span> + ($dataLvl || <span class="hljs-string">''</span>);
  <span class="hljs-keyword">var</span> $isData = it.opts.v5 &amp;&amp; $schema &amp;&amp; $schema.$data,
    $schemaValue;
  <span class="hljs-keyword">if</span> ($isData) {
    out += <span class="hljs-string">' var schema'</span> + ($lvl) + <span class="hljs-string">' = '</span> + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + <span class="hljs-string">'; '</span>;
    $schemaValue = <span class="hljs-string">'schema'</span> + $lvl;
  } <span class="hljs-keyword">else</span> {
    $schemaValue = $schema;
  }
  <span class="hljs-keyword">var</span> $op = $keyword == <span class="hljs-string">'maxItems'</span> ? <span class="hljs-string">'&gt;'</span> : <span class="hljs-string">'&lt;'</span>;
  out += <span class="hljs-string">'if ( '</span>;
  <span class="hljs-keyword">if</span> ($isData) {
    out += <span class="hljs-string">' ('</span> + ($schemaValue) + <span class="hljs-string">' !== undefined &amp;&amp; typeof '</span> + ($schemaValue) + <span class="hljs-string">' != \'number\') || '</span>;
  }
  out += <span class="hljs-string">' '</span> + ($data) + <span class="hljs-string">'.length '</span> + ($op) + <span class="hljs-string">' '</span> + ($schemaValue) + <span class="hljs-string">') { '</span>;
  <span class="hljs-keyword">var</span> $errorKeyword = $keyword;
  <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
  $$outStack.push(out);
  out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
  <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
    out += <span class="hljs-string">' { keyword: \''</span> + ($errorKeyword || <span class="hljs-string">'_limitItems'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { limit: '</span> + ($schemaValue) + <span class="hljs-string">' } '</span>;
    <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
      out += <span class="hljs-string">' , message: \'should NOT have '</span>;
      <span class="hljs-keyword">if</span> ($keyword == <span class="hljs-string">'maxItems'</span>) {
        out += <span class="hljs-string">'more'</span>;
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">'less'</span>;
      }
      out += <span class="hljs-string">' than '</span>;
      <span class="hljs-keyword">if</span> ($isData) {
        out += <span class="hljs-string">'\' + '</span> + ($schemaValue) + <span class="hljs-string">' + \''</span>;
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">''</span> + ($schema);
      }
      out += <span class="hljs-string">' items\' '</span>;
    }
    <span class="hljs-keyword">if</span> (it.opts.verbose) {
      out += <span class="hljs-string">' , schema:  '</span>;
      <span class="hljs-keyword">if</span> ($isData) {
        out += <span class="hljs-string">'validate.schema'</span> + ($schemaPath);
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">''</span> + ($schema);
      }
      out += <span class="hljs-string">'         , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
    }
    out += <span class="hljs-string">' } '</span>;
  } <span class="hljs-keyword">else</span> {
    out += <span class="hljs-string">' {} '</span>;
  }
  <span class="hljs-keyword">var</span> __err = out;
  out = $$outStack.pop();
  <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
    <span class="hljs-keyword">if</span> (it.async) {
      out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
    }
  } <span class="hljs-keyword">else</span> {
    out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
  }
  out += <span class="hljs-string">'} '</span>;
  <span class="hljs-keyword">if</span> ($breakOnError) {
    out += <span class="hljs-string">' else { '</span>;
  }
  <span class="hljs-keyword">return</span> out;
}

},{}],<span class="hljs-number">16</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generate__limitLength</span>(<span class="hljs-params">it, $keyword</span>) </span>{
  <span class="hljs-keyword">var</span> out = <span class="hljs-string">' '</span>;
  <span class="hljs-keyword">var</span> $lvl = it.level;
  <span class="hljs-keyword">var</span> $dataLvl = it.dataLevel;
  <span class="hljs-keyword">var</span> $schema = it.schema[$keyword];
  <span class="hljs-keyword">var</span> $schemaPath = it.schemaPath + it.util.getProperty($keyword);
  <span class="hljs-keyword">var</span> $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/'</span> + $keyword;
  <span class="hljs-keyword">var</span> $breakOnError = !it.opts.allErrors;
  <span class="hljs-keyword">var</span> $errorKeyword;
  <span class="hljs-keyword">var</span> $data = <span class="hljs-string">'data'</span> + ($dataLvl || <span class="hljs-string">''</span>);
  <span class="hljs-keyword">var</span> $isData = it.opts.v5 &amp;&amp; $schema &amp;&amp; $schema.$data,
    $schemaValue;
  <span class="hljs-keyword">if</span> ($isData) {
    out += <span class="hljs-string">' var schema'</span> + ($lvl) + <span class="hljs-string">' = '</span> + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + <span class="hljs-string">'; '</span>;
    $schemaValue = <span class="hljs-string">'schema'</span> + $lvl;
  } <span class="hljs-keyword">else</span> {
    $schemaValue = $schema;
  }
  <span class="hljs-keyword">var</span> $op = $keyword == <span class="hljs-string">'maxLength'</span> ? <span class="hljs-string">'&gt;'</span> : <span class="hljs-string">'&lt;'</span>;
  out += <span class="hljs-string">'if ( '</span>;
  <span class="hljs-keyword">if</span> ($isData) {
    out += <span class="hljs-string">' ('</span> + ($schemaValue) + <span class="hljs-string">' !== undefined &amp;&amp; typeof '</span> + ($schemaValue) + <span class="hljs-string">' != \'number\') || '</span>;
  }
  <span class="hljs-keyword">if</span> (it.opts.unicode === <span class="hljs-literal">false</span>) {
    out += <span class="hljs-string">' '</span> + ($data) + <span class="hljs-string">'.length '</span>;
  } <span class="hljs-keyword">else</span> {
    out += <span class="hljs-string">' ucs2length('</span> + ($data) + <span class="hljs-string">') '</span>;
  }
  out += <span class="hljs-string">' '</span> + ($op) + <span class="hljs-string">' '</span> + ($schemaValue) + <span class="hljs-string">') { '</span>;
  <span class="hljs-keyword">var</span> $errorKeyword = $keyword;
  <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
  $$outStack.push(out);
  out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
  <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
    out += <span class="hljs-string">' { keyword: \''</span> + ($errorKeyword || <span class="hljs-string">'_limitLength'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { limit: '</span> + ($schemaValue) + <span class="hljs-string">' } '</span>;
    <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
      out += <span class="hljs-string">' , message: \'should NOT be '</span>;
      <span class="hljs-keyword">if</span> ($keyword == <span class="hljs-string">'maxLength'</span>) {
        out += <span class="hljs-string">'longer'</span>;
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">'shorter'</span>;
      }
      out += <span class="hljs-string">' than '</span>;
      <span class="hljs-keyword">if</span> ($isData) {
        out += <span class="hljs-string">'\' + '</span> + ($schemaValue) + <span class="hljs-string">' + \''</span>;
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">''</span> + ($schema);
      }
      out += <span class="hljs-string">' characters\' '</span>;
    }
    <span class="hljs-keyword">if</span> (it.opts.verbose) {
      out += <span class="hljs-string">' , schema:  '</span>;
      <span class="hljs-keyword">if</span> ($isData) {
        out += <span class="hljs-string">'validate.schema'</span> + ($schemaPath);
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">''</span> + ($schema);
      }
      out += <span class="hljs-string">'         , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
    }
    out += <span class="hljs-string">' } '</span>;
  } <span class="hljs-keyword">else</span> {
    out += <span class="hljs-string">' {} '</span>;
  }
  <span class="hljs-keyword">var</span> __err = out;
  out = $$outStack.pop();
  <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
    <span class="hljs-keyword">if</span> (it.async) {
      out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
    }
  } <span class="hljs-keyword">else</span> {
    out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
  }
  out += <span class="hljs-string">'} '</span>;
  <span class="hljs-keyword">if</span> ($breakOnError) {
    out += <span class="hljs-string">' else { '</span>;
  }
  <span class="hljs-keyword">return</span> out;
}

},{}],<span class="hljs-number">17</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generate__limitProperties</span>(<span class="hljs-params">it, $keyword</span>) </span>{
  <span class="hljs-keyword">var</span> out = <span class="hljs-string">' '</span>;
  <span class="hljs-keyword">var</span> $lvl = it.level;
  <span class="hljs-keyword">var</span> $dataLvl = it.dataLevel;
  <span class="hljs-keyword">var</span> $schema = it.schema[$keyword];
  <span class="hljs-keyword">var</span> $schemaPath = it.schemaPath + it.util.getProperty($keyword);
  <span class="hljs-keyword">var</span> $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/'</span> + $keyword;
  <span class="hljs-keyword">var</span> $breakOnError = !it.opts.allErrors;
  <span class="hljs-keyword">var</span> $errorKeyword;
  <span class="hljs-keyword">var</span> $data = <span class="hljs-string">'data'</span> + ($dataLvl || <span class="hljs-string">''</span>);
  <span class="hljs-keyword">var</span> $isData = it.opts.v5 &amp;&amp; $schema &amp;&amp; $schema.$data,
    $schemaValue;
  <span class="hljs-keyword">if</span> ($isData) {
    out += <span class="hljs-string">' var schema'</span> + ($lvl) + <span class="hljs-string">' = '</span> + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + <span class="hljs-string">'; '</span>;
    $schemaValue = <span class="hljs-string">'schema'</span> + $lvl;
  } <span class="hljs-keyword">else</span> {
    $schemaValue = $schema;
  }
  <span class="hljs-keyword">var</span> $op = $keyword == <span class="hljs-string">'maxProperties'</span> ? <span class="hljs-string">'&gt;'</span> : <span class="hljs-string">'&lt;'</span>;
  out += <span class="hljs-string">'if ( '</span>;
  <span class="hljs-keyword">if</span> ($isData) {
    out += <span class="hljs-string">' ('</span> + ($schemaValue) + <span class="hljs-string">' !== undefined &amp;&amp; typeof '</span> + ($schemaValue) + <span class="hljs-string">' != \'number\') || '</span>;
  }
  out += <span class="hljs-string">' Object.keys('</span> + ($data) + <span class="hljs-string">').length '</span> + ($op) + <span class="hljs-string">' '</span> + ($schemaValue) + <span class="hljs-string">') { '</span>;
  <span class="hljs-keyword">var</span> $errorKeyword = $keyword;
  <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
  $$outStack.push(out);
  out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
  <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
    out += <span class="hljs-string">' { keyword: \''</span> + ($errorKeyword || <span class="hljs-string">'_limitProperties'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { limit: '</span> + ($schemaValue) + <span class="hljs-string">' } '</span>;
    <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
      out += <span class="hljs-string">' , message: \'should NOT have '</span>;
      <span class="hljs-keyword">if</span> ($keyword == <span class="hljs-string">'maxProperties'</span>) {
        out += <span class="hljs-string">'more'</span>;
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">'less'</span>;
      }
      out += <span class="hljs-string">' than '</span>;
      <span class="hljs-keyword">if</span> ($isData) {
        out += <span class="hljs-string">'\' + '</span> + ($schemaValue) + <span class="hljs-string">' + \''</span>;
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">''</span> + ($schema);
      }
      out += <span class="hljs-string">' properties\' '</span>;
    }
    <span class="hljs-keyword">if</span> (it.opts.verbose) {
      out += <span class="hljs-string">' , schema:  '</span>;
      <span class="hljs-keyword">if</span> ($isData) {
        out += <span class="hljs-string">'validate.schema'</span> + ($schemaPath);
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">''</span> + ($schema);
      }
      out += <span class="hljs-string">'         , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
    }
    out += <span class="hljs-string">' } '</span>;
  } <span class="hljs-keyword">else</span> {
    out += <span class="hljs-string">' {} '</span>;
  }
  <span class="hljs-keyword">var</span> __err = out;
  out = $$outStack.pop();
  <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
    <span class="hljs-keyword">if</span> (it.async) {
      out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
    }
  } <span class="hljs-keyword">else</span> {
    out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
  }
  out += <span class="hljs-string">'} '</span>;
  <span class="hljs-keyword">if</span> ($breakOnError) {
    out += <span class="hljs-string">' else { '</span>;
  }
  <span class="hljs-keyword">return</span> out;
}

},{}],<span class="hljs-number">18</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generate_allOf</span>(<span class="hljs-params">it, $keyword</span>) </span>{
  <span class="hljs-keyword">var</span> out = <span class="hljs-string">' '</span>;
  <span class="hljs-keyword">var</span> $schema = it.schema[$keyword];
  <span class="hljs-keyword">var</span> $schemaPath = it.schemaPath + it.util.getProperty($keyword);
  <span class="hljs-keyword">var</span> $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/'</span> + $keyword;
  <span class="hljs-keyword">var</span> $breakOnError = !it.opts.allErrors;
  <span class="hljs-keyword">var</span> $it = it.util.copy(it);
  <span class="hljs-keyword">var</span> $closingBraces = <span class="hljs-string">''</span>;
  $it.level++;
  <span class="hljs-keyword">var</span> $nextValid = <span class="hljs-string">'valid'</span> + $it.level;
  <span class="hljs-keyword">var</span> $currentBaseId = $it.baseId,
    $allSchemasEmpty = <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">var</span> arr1 = $schema;
  <span class="hljs-keyword">if</span> (arr1) {
    <span class="hljs-keyword">var</span> $sch, $i = <span class="hljs-number">-1</span>,
      l1 = arr1.length - <span class="hljs-number">1</span>;
    <span class="hljs-keyword">while</span> ($i &lt; l1) {
      $sch = arr1[$i += <span class="hljs-number">1</span>];
      <span class="hljs-keyword">if</span> (it.util.schemaHasRules($sch, it.RULES.all)) {
        $allSchemasEmpty = <span class="hljs-literal">false</span>;
        $it.schema = $sch;
        $it.schemaPath = $schemaPath + <span class="hljs-string">'['</span> + $i + <span class="hljs-string">']'</span>;
        $it.errSchemaPath = $errSchemaPath + <span class="hljs-string">'/'</span> + $i;
        out += <span class="hljs-string">'  '</span> + (it.validate($it)) + <span class="hljs-string">' '</span>;
        $it.baseId = $currentBaseId;
        <span class="hljs-keyword">if</span> ($breakOnError) {
          out += <span class="hljs-string">' if ('</span> + ($nextValid) + <span class="hljs-string">') { '</span>;
          $closingBraces += <span class="hljs-string">'}'</span>;
        }
      }
    }
  }
  <span class="hljs-keyword">if</span> ($breakOnError) {
    <span class="hljs-keyword">if</span> ($allSchemasEmpty) {
      out += <span class="hljs-string">' if (true) { '</span>;
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' '</span> + ($closingBraces.slice(<span class="hljs-number">0</span>, <span class="hljs-number">-1</span>)) + <span class="hljs-string">' '</span>;
    }
  }
  out = it.util.cleanUpCode(out);
  <span class="hljs-keyword">return</span> out;
}

},{}],<span class="hljs-number">19</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generate_anyOf</span>(<span class="hljs-params">it, $keyword</span>) </span>{
  <span class="hljs-keyword">var</span> out = <span class="hljs-string">' '</span>;
  <span class="hljs-keyword">var</span> $lvl = it.level;
  <span class="hljs-keyword">var</span> $dataLvl = it.dataLevel;
  <span class="hljs-keyword">var</span> $schema = it.schema[$keyword];
  <span class="hljs-keyword">var</span> $schemaPath = it.schemaPath + it.util.getProperty($keyword);
  <span class="hljs-keyword">var</span> $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/'</span> + $keyword;
  <span class="hljs-keyword">var</span> $breakOnError = !it.opts.allErrors;
  <span class="hljs-keyword">var</span> $data = <span class="hljs-string">'data'</span> + ($dataLvl || <span class="hljs-string">''</span>);
  <span class="hljs-keyword">var</span> $valid = <span class="hljs-string">'valid'</span> + $lvl;
  <span class="hljs-keyword">var</span> $errs = <span class="hljs-string">'errs__'</span> + $lvl;
  <span class="hljs-keyword">var</span> $it = it.util.copy(it);
  <span class="hljs-keyword">var</span> $closingBraces = <span class="hljs-string">''</span>;
  $it.level++;
  <span class="hljs-keyword">var</span> $nextValid = <span class="hljs-string">'valid'</span> + $it.level;
  <span class="hljs-keyword">var</span> $noEmptySchema = $schema.every(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$sch</span>) </span>{
    <span class="hljs-keyword">return</span> it.util.schemaHasRules($sch, it.RULES.all);
  });
  <span class="hljs-keyword">if</span> ($noEmptySchema) {
    <span class="hljs-keyword">var</span> $currentBaseId = $it.baseId;
    out += <span class="hljs-string">' var '</span> + ($errs) + <span class="hljs-string">' = errors; var '</span> + ($valid) + <span class="hljs-string">' = false;  '</span>;
    <span class="hljs-keyword">var</span> $wasComposite = it.compositeRule;
    it.compositeRule = $it.compositeRule = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">var</span> arr1 = $schema;
    <span class="hljs-keyword">if</span> (arr1) {
      <span class="hljs-keyword">var</span> $sch, $i = <span class="hljs-number">-1</span>,
        l1 = arr1.length - <span class="hljs-number">1</span>;
      <span class="hljs-keyword">while</span> ($i &lt; l1) {
        $sch = arr1[$i += <span class="hljs-number">1</span>];
        $it.schema = $sch;
        $it.schemaPath = $schemaPath + <span class="hljs-string">'['</span> + $i + <span class="hljs-string">']'</span>;
        $it.errSchemaPath = $errSchemaPath + <span class="hljs-string">'/'</span> + $i;
        out += <span class="hljs-string">'  '</span> + (it.validate($it)) + <span class="hljs-string">' '</span>;
        $it.baseId = $currentBaseId;
        out += <span class="hljs-string">' '</span> + ($valid) + <span class="hljs-string">' = '</span> + ($valid) + <span class="hljs-string">' || '</span> + ($nextValid) + <span class="hljs-string">'; if (!'</span> + ($valid) + <span class="hljs-string">') { '</span>;
        $closingBraces += <span class="hljs-string">'}'</span>;
      }
    }
    it.compositeRule = $it.compositeRule = $wasComposite;
    out += <span class="hljs-string">' '</span> + ($closingBraces) + <span class="hljs-string">' if (!'</span> + ($valid) + <span class="hljs-string">') {  var err =   '</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
    <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
      out += <span class="hljs-string">' { keyword: \''</span> + (<span class="hljs-string">'anyOf'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: {} '</span>;
      <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
        out += <span class="hljs-string">' , message: \'should match some schema in anyOf\' '</span>;
      }
      <span class="hljs-keyword">if</span> (it.opts.verbose) {
        out += <span class="hljs-string">' , schema: validate.schema'</span> + ($schemaPath) + <span class="hljs-string">' , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
      }
      out += <span class="hljs-string">' } '</span>;
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' {} '</span>;
    }
    out += <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else {  errors = '</span> + ($errs) + <span class="hljs-string">'; if (vErrors !== null) { if ('</span> + ($errs) + <span class="hljs-string">') vErrors.length = '</span> + ($errs) + <span class="hljs-string">'; else vErrors = null; } '</span>;
    <span class="hljs-keyword">if</span> (it.opts.allErrors) {
      out += <span class="hljs-string">' } '</span>;
    }
    out = it.util.cleanUpCode(out);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">if</span> ($breakOnError) {
      out += <span class="hljs-string">' if (true) { '</span>;
    }
  }
  <span class="hljs-keyword">return</span> out;
}

},{}],<span class="hljs-number">20</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generate_constant</span>(<span class="hljs-params">it, $keyword</span>) </span>{
  <span class="hljs-keyword">var</span> out = <span class="hljs-string">' '</span>;
  <span class="hljs-keyword">var</span> $lvl = it.level;
  <span class="hljs-keyword">var</span> $dataLvl = it.dataLevel;
  <span class="hljs-keyword">var</span> $schema = it.schema[$keyword];
  <span class="hljs-keyword">var</span> $schemaPath = it.schemaPath + it.util.getProperty($keyword);
  <span class="hljs-keyword">var</span> $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/'</span> + $keyword;
  <span class="hljs-keyword">var</span> $breakOnError = !it.opts.allErrors;
  <span class="hljs-keyword">var</span> $data = <span class="hljs-string">'data'</span> + ($dataLvl || <span class="hljs-string">''</span>);
  <span class="hljs-keyword">var</span> $valid = <span class="hljs-string">'valid'</span> + $lvl;
  <span class="hljs-keyword">var</span> $isData = it.opts.v5 &amp;&amp; $schema &amp;&amp; $schema.$data,
    $schemaValue;
  <span class="hljs-keyword">if</span> ($isData) {
    out += <span class="hljs-string">' var schema'</span> + ($lvl) + <span class="hljs-string">' = '</span> + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + <span class="hljs-string">'; '</span>;
    $schemaValue = <span class="hljs-string">'schema'</span> + $lvl;
  } <span class="hljs-keyword">else</span> {
    $schemaValue = $schema;
  }
  <span class="hljs-keyword">if</span> (!$isData) {
    out += <span class="hljs-string">' var schema'</span> + ($lvl) + <span class="hljs-string">' = validate.schema'</span> + ($schemaPath) + <span class="hljs-string">';'</span>;
  }
  out += <span class="hljs-string">'var '</span> + ($valid) + <span class="hljs-string">' = equal('</span> + ($data) + <span class="hljs-string">', schema'</span> + ($lvl) + <span class="hljs-string">'); if (!'</span> + ($valid) + <span class="hljs-string">') {   '</span>;
  <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
  $$outStack.push(out);
  out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
  <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
    out += <span class="hljs-string">' { keyword: \''</span> + (<span class="hljs-string">'constant'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: {} '</span>;
    <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
      out += <span class="hljs-string">' , message: \'should be equal to constant\' '</span>;
    }
    <span class="hljs-keyword">if</span> (it.opts.verbose) {
      out += <span class="hljs-string">' , schema: validate.schema'</span> + ($schemaPath) + <span class="hljs-string">' , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
    }
    out += <span class="hljs-string">' } '</span>;
  } <span class="hljs-keyword">else</span> {
    out += <span class="hljs-string">' {} '</span>;
  }
  <span class="hljs-keyword">var</span> __err = out;
  out = $$outStack.pop();
  <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
    <span class="hljs-keyword">if</span> (it.async) {
      out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
    }
  } <span class="hljs-keyword">else</span> {
    out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
  }
  out += <span class="hljs-string">' }'</span>;
  <span class="hljs-keyword">return</span> out;
}

},{}],<span class="hljs-number">21</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generate_custom</span>(<span class="hljs-params">it, $keyword</span>) </span>{
  <span class="hljs-keyword">var</span> out = <span class="hljs-string">' '</span>;
  <span class="hljs-keyword">var</span> $lvl = it.level;
  <span class="hljs-keyword">var</span> $dataLvl = it.dataLevel;
  <span class="hljs-keyword">var</span> $schema = it.schema[$keyword];
  <span class="hljs-keyword">var</span> $schemaPath = it.schemaPath + it.util.getProperty($keyword);
  <span class="hljs-keyword">var</span> $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/'</span> + $keyword;
  <span class="hljs-keyword">var</span> $breakOnError = !it.opts.allErrors;
  <span class="hljs-keyword">var</span> $errorKeyword;
  <span class="hljs-keyword">var</span> $data = <span class="hljs-string">'data'</span> + ($dataLvl || <span class="hljs-string">''</span>);
  <span class="hljs-keyword">var</span> $valid = <span class="hljs-string">'valid'</span> + $lvl;
  <span class="hljs-keyword">var</span> $errs = <span class="hljs-string">'errs__'</span> + $lvl;
  <span class="hljs-keyword">var</span> $isData = it.opts.v5 &amp;&amp; $schema &amp;&amp; $schema.$data,
    $schemaValue;
  <span class="hljs-keyword">if</span> ($isData) {
    out += <span class="hljs-string">' var schema'</span> + ($lvl) + <span class="hljs-string">' = '</span> + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + <span class="hljs-string">'; '</span>;
    $schemaValue = <span class="hljs-string">'schema'</span> + $lvl;
  } <span class="hljs-keyword">else</span> {
    $schemaValue = $schema;
  }
  <span class="hljs-keyword">var</span> $rule = <span class="hljs-keyword">this</span>,
    $definition = <span class="hljs-string">'definition'</span> + $lvl,
    $rDef = $rule.definition;
  <span class="hljs-keyword">var</span> $compile, $inline, $macro, $ruleValidate, $validateCode;
  <span class="hljs-keyword">if</span> ($isData &amp;&amp; $rDef.$data) {
    $validateCode = <span class="hljs-string">'keywordValidate'</span> + $lvl;
    <span class="hljs-keyword">var</span> $validateSchema = $rDef.validateSchema;
    out += <span class="hljs-string">' var '</span> + ($definition) + <span class="hljs-string">' = RULES.custom[\''</span> + ($keyword) + <span class="hljs-string">'\'].definition; var '</span> + ($validateCode) + <span class="hljs-string">' = '</span> + ($definition) + <span class="hljs-string">'.validate;'</span>;
  } <span class="hljs-keyword">else</span> {
    $ruleValidate = it.useCustomRule($rule, $schema, it.schema, it);
    $schemaValue = <span class="hljs-string">'validate.schema'</span> + $schemaPath;
    $validateCode = $ruleValidate.code;
    $compile = $rDef.compile;
    $inline = $rDef.inline;
    $macro = $rDef.macro;
  }
  <span class="hljs-keyword">var</span> $ruleErrs = $validateCode + <span class="hljs-string">'.errors'</span>,
    $i = <span class="hljs-string">'i'</span> + $lvl,
    $ruleErr = <span class="hljs-string">'ruleErr'</span> + $lvl,
    $asyncKeyword = $rDef.async;
  <span class="hljs-keyword">if</span> ($asyncKeyword &amp;&amp; !it.async) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'async keyword in sync schema'</span>);
  <span class="hljs-keyword">if</span> (!($inline || $macro)) {
    out += <span class="hljs-string">''</span> + ($ruleErrs) + <span class="hljs-string">' = null;'</span>;
  }
  out += <span class="hljs-string">'var '</span> + ($errs) + <span class="hljs-string">' = errors;var '</span> + ($valid) + <span class="hljs-string">';'</span>;
  <span class="hljs-keyword">if</span> ($validateSchema) {
    out += <span class="hljs-string">' '</span> + ($valid) + <span class="hljs-string">' = '</span> + ($definition) + <span class="hljs-string">'.validateSchema('</span> + ($schemaValue) + <span class="hljs-string">'); if ('</span> + ($valid) + <span class="hljs-string">') {'</span>;
  }
  <span class="hljs-keyword">if</span> ($inline) {
    <span class="hljs-keyword">if</span> ($rDef.statements) {
      out += <span class="hljs-string">' '</span> + ($ruleValidate.validate) + <span class="hljs-string">' '</span>;
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' '</span> + ($valid) + <span class="hljs-string">' = '</span> + ($ruleValidate.validate) + <span class="hljs-string">'; '</span>;
    }
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ($macro) {
    <span class="hljs-keyword">var</span> $it = it.util.copy(it);
    $it.level++;
    <span class="hljs-keyword">var</span> $nextValid = <span class="hljs-string">'valid'</span> + $it.level;
    $it.schema = $ruleValidate.validate;
    $it.schemaPath = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">var</span> $wasComposite = it.compositeRule;
    it.compositeRule = $it.compositeRule = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">var</span> $code = it.validate($it).replace(<span class="hljs-regexp">/validate\.schema/g</span>, $validateCode);
    it.compositeRule = $it.compositeRule = $wasComposite;
    out += <span class="hljs-string">' '</span> + ($code);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
    $$outStack.push(out);
    out = <span class="hljs-string">''</span>;
    out += <span class="hljs-string">'  '</span> + ($validateCode) + <span class="hljs-string">'.call( '</span>;
    <span class="hljs-keyword">if</span> (it.opts.passContext) {
      out += <span class="hljs-string">'this'</span>;
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">'self'</span>;
    }
    <span class="hljs-keyword">if</span> ($compile || $rDef.schema === <span class="hljs-literal">false</span>) {
      out += <span class="hljs-string">' , '</span> + ($data) + <span class="hljs-string">' '</span>;
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' , '</span> + ($schemaValue) + <span class="hljs-string">' , '</span> + ($data) + <span class="hljs-string">' , validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' '</span>;
    }
    out += <span class="hljs-string">' , (dataPath || \'\')'</span>;
    <span class="hljs-keyword">if</span> (it.errorPath != <span class="hljs-string">'""'</span>) {
      out += <span class="hljs-string">' + '</span> + (it.errorPath);
    }
    <span class="hljs-keyword">var</span> $parentData = $dataLvl ? <span class="hljs-string">'data'</span> + (($dataLvl - <span class="hljs-number">1</span>) || <span class="hljs-string">''</span>) : <span class="hljs-string">'parentData'</span>,
      $parentDataProperty = $dataLvl ? it.dataPathArr[$dataLvl] : <span class="hljs-string">'parentDataProperty'</span>;
    out += <span class="hljs-string">' , '</span> + ($parentData) + <span class="hljs-string">' , '</span> + ($parentDataProperty) + <span class="hljs-string">' , rootData )  '</span>;
    <span class="hljs-keyword">var</span> def_callRuleValidate = out;
    out = $$outStack.pop();
    <span class="hljs-keyword">if</span> ($rDef.errors === <span class="hljs-literal">false</span>) {
      out += <span class="hljs-string">' '</span> + ($valid) + <span class="hljs-string">' = '</span>;
      <span class="hljs-keyword">if</span> ($asyncKeyword) {
        out += <span class="hljs-string">''</span> + (it.yieldAwait);
      }
      out += <span class="hljs-string">''</span> + (def_callRuleValidate) + <span class="hljs-string">'; '</span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">if</span> ($asyncKeyword) {
        $ruleErrs = <span class="hljs-string">'customErrors'</span> + $lvl;
        out += <span class="hljs-string">' var '</span> + ($ruleErrs) + <span class="hljs-string">' = null; try { '</span> + ($valid) + <span class="hljs-string">' = '</span> + (it.yieldAwait) + (def_callRuleValidate) + <span class="hljs-string">'; } catch (e) { '</span> + ($valid) + <span class="hljs-string">' = false; if (e instanceof ValidationError) '</span> + ($ruleErrs) + <span class="hljs-string">' = e.errors; else throw e; } '</span>;
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">' '</span> + ($ruleErrs) + <span class="hljs-string">' = null; '</span> + ($valid) + <span class="hljs-string">' = '</span> + (def_callRuleValidate) + <span class="hljs-string">'; '</span>;
      }
    }
  }
  <span class="hljs-keyword">if</span> ($rDef.modifying) {
    out += <span class="hljs-string">' '</span> + ($data) + <span class="hljs-string">' = '</span> + ($parentData) + <span class="hljs-string">'['</span> + ($parentDataProperty) + <span class="hljs-string">'];'</span>;
  }
  <span class="hljs-keyword">if</span> ($validateSchema) {
    out += <span class="hljs-string">' }'</span>;
  }
  <span class="hljs-keyword">if</span> ($rDef.valid) {
    <span class="hljs-keyword">if</span> ($breakOnError) {
      out += <span class="hljs-string">' if (true) { '</span>;
    }
  } <span class="hljs-keyword">else</span> {
    out += <span class="hljs-string">' if ( '</span>;
    <span class="hljs-keyword">if</span> ($rDef.valid === <span class="hljs-literal">undefined</span>) {
      out += <span class="hljs-string">' !'</span>;
      <span class="hljs-keyword">if</span> ($macro) {
        out += <span class="hljs-string">''</span> + ($nextValid);
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">''</span> + ($valid);
      }
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' '</span> + (!$rDef.valid) + <span class="hljs-string">' '</span>;
    }
    out += <span class="hljs-string">') { '</span>;
    $errorKeyword = $rule.keyword;
    <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
    $$outStack.push(out);
    out = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
    $$outStack.push(out);
    out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
    <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
      out += <span class="hljs-string">' { keyword: \''</span> + ($errorKeyword || <span class="hljs-string">'custom'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { keyword: \''</span> + ($rule.keyword) + <span class="hljs-string">'\' } '</span>;
      <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
        out += <span class="hljs-string">' , message: \'should pass "'</span> + ($rule.keyword) + <span class="hljs-string">'" keyword validation\' '</span>;
      }
      <span class="hljs-keyword">if</span> (it.opts.verbose) {
        out += <span class="hljs-string">' , schema: validate.schema'</span> + ($schemaPath) + <span class="hljs-string">' , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
      }
      out += <span class="hljs-string">' } '</span>;
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' {} '</span>;
    }
    <span class="hljs-keyword">var</span> __err = out;
    out = $$outStack.pop();
    <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
      <span class="hljs-keyword">if</span> (it.async) {
        out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
      }
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
    }
    <span class="hljs-keyword">var</span> def_customError = out;
    out = $$outStack.pop();
    <span class="hljs-keyword">if</span> ($inline) {
      <span class="hljs-keyword">if</span> ($rDef.errors) {
        <span class="hljs-keyword">if</span> ($rDef.errors != <span class="hljs-string">'full'</span>) {
          out += <span class="hljs-string">'  for (var '</span> + ($i) + <span class="hljs-string">'='</span> + ($errs) + <span class="hljs-string">'; '</span> + ($i) + <span class="hljs-string">'&lt;errors; '</span> + ($i) + <span class="hljs-string">'++) { var '</span> + ($ruleErr) + <span class="hljs-string">' = vErrors['</span> + ($i) + <span class="hljs-string">']; if ('</span> + ($ruleErr) + <span class="hljs-string">'.dataPath === undefined) '</span> + ($ruleErr) + <span class="hljs-string">'.dataPath = (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">'; if ('</span> + ($ruleErr) + <span class="hljs-string">'.schemaPath === undefined) { '</span> + ($ruleErr) + <span class="hljs-string">'.schemaPath = "'</span> + ($errSchemaPath) + <span class="hljs-string">'"; } '</span>;
          <span class="hljs-keyword">if</span> (it.opts.verbose) {
            out += <span class="hljs-string">' '</span> + ($ruleErr) + <span class="hljs-string">'.schema = '</span> + ($schemaValue) + <span class="hljs-string">'; '</span> + ($ruleErr) + <span class="hljs-string">'.data = '</span> + ($data) + <span class="hljs-string">'; '</span>;
          }
          out += <span class="hljs-string">' } '</span>;
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">if</span> ($rDef.errors === <span class="hljs-literal">false</span>) {
          out += <span class="hljs-string">' '</span> + (def_customError) + <span class="hljs-string">' '</span>;
        } <span class="hljs-keyword">else</span> {
          out += <span class="hljs-string">' if ('</span> + ($errs) + <span class="hljs-string">' == errors) { '</span> + (def_customError) + <span class="hljs-string">' } else {  for (var '</span> + ($i) + <span class="hljs-string">'='</span> + ($errs) + <span class="hljs-string">'; '</span> + ($i) + <span class="hljs-string">'&lt;errors; '</span> + ($i) + <span class="hljs-string">'++) { var '</span> + ($ruleErr) + <span class="hljs-string">' = vErrors['</span> + ($i) + <span class="hljs-string">']; if ('</span> + ($ruleErr) + <span class="hljs-string">'.dataPath === undefined) '</span> + ($ruleErr) + <span class="hljs-string">'.dataPath = (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">'; if ('</span> + ($ruleErr) + <span class="hljs-string">'.schemaPath === undefined) { '</span> + ($ruleErr) + <span class="hljs-string">'.schemaPath = "'</span> + ($errSchemaPath) + <span class="hljs-string">'"; } '</span>;
          <span class="hljs-keyword">if</span> (it.opts.verbose) {
            out += <span class="hljs-string">' '</span> + ($ruleErr) + <span class="hljs-string">'.schema = '</span> + ($schemaValue) + <span class="hljs-string">'; '</span> + ($ruleErr) + <span class="hljs-string">'.data = '</span> + ($data) + <span class="hljs-string">'; '</span>;
          }
          out += <span class="hljs-string">' } } '</span>;
        }
      }
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ($macro) {
      out += <span class="hljs-string">'   var err =   '</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
      <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
        out += <span class="hljs-string">' { keyword: \''</span> + ($errorKeyword || <span class="hljs-string">'custom'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { keyword: \''</span> + ($rule.keyword) + <span class="hljs-string">'\' } '</span>;
        <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
          out += <span class="hljs-string">' , message: \'should pass "'</span> + ($rule.keyword) + <span class="hljs-string">'" keyword validation\' '</span>;
        }
        <span class="hljs-keyword">if</span> (it.opts.verbose) {
          out += <span class="hljs-string">' , schema: validate.schema'</span> + ($schemaPath) + <span class="hljs-string">' , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
        }
        out += <span class="hljs-string">' } '</span>;
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">' {} '</span>;
      }
      out += <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
      <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
        <span class="hljs-keyword">if</span> (it.async) {
          out += <span class="hljs-string">' throw new ValidationError(vErrors); '</span>;
        } <span class="hljs-keyword">else</span> {
          out += <span class="hljs-string">' validate.errors = vErrors; return false; '</span>;
        }
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">if</span> ($rDef.errors === <span class="hljs-literal">false</span>) {
        out += <span class="hljs-string">' '</span> + (def_customError) + <span class="hljs-string">' '</span>;
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">' if (Array.isArray('</span> + ($ruleErrs) + <span class="hljs-string">')) { if (vErrors === null) vErrors = '</span> + ($ruleErrs) + <span class="hljs-string">'; else vErrors = vErrors.concat('</span> + ($ruleErrs) + <span class="hljs-string">'); errors = vErrors.length;  for (var '</span> + ($i) + <span class="hljs-string">'='</span> + ($errs) + <span class="hljs-string">'; '</span> + ($i) + <span class="hljs-string">'&lt;errors; '</span> + ($i) + <span class="hljs-string">'++) { var '</span> + ($ruleErr) + <span class="hljs-string">' = vErrors['</span> + ($i) + <span class="hljs-string">']; if ('</span> + ($ruleErr) + <span class="hljs-string">'.dataPath === undefined) '</span> + ($ruleErr) + <span class="hljs-string">'.dataPath = (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">';  '</span> + ($ruleErr) + <span class="hljs-string">'.schemaPath = "'</span> + ($errSchemaPath) + <span class="hljs-string">'";  '</span>;
        <span class="hljs-keyword">if</span> (it.opts.verbose) {
          out += <span class="hljs-string">' '</span> + ($ruleErr) + <span class="hljs-string">'.schema = '</span> + ($schemaValue) + <span class="hljs-string">'; '</span> + ($ruleErr) + <span class="hljs-string">'.data = '</span> + ($data) + <span class="hljs-string">'; '</span>;
        }
        out += <span class="hljs-string">' } } else { '</span> + (def_customError) + <span class="hljs-string">' } '</span>;
      }
    }
    out += <span class="hljs-string">' } '</span>;
    <span class="hljs-keyword">if</span> ($breakOnError) {
      out += <span class="hljs-string">' else { '</span>;
    }
  }
  <span class="hljs-keyword">return</span> out;
}

},{}],<span class="hljs-number">22</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generate_dependencies</span>(<span class="hljs-params">it, $keyword</span>) </span>{
  <span class="hljs-keyword">var</span> out = <span class="hljs-string">' '</span>;
  <span class="hljs-keyword">var</span> $lvl = it.level;
  <span class="hljs-keyword">var</span> $dataLvl = it.dataLevel;
  <span class="hljs-keyword">var</span> $schema = it.schema[$keyword];
  <span class="hljs-keyword">var</span> $schemaPath = it.schemaPath + it.util.getProperty($keyword);
  <span class="hljs-keyword">var</span> $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/'</span> + $keyword;
  <span class="hljs-keyword">var</span> $breakOnError = !it.opts.allErrors;
  <span class="hljs-keyword">var</span> $data = <span class="hljs-string">'data'</span> + ($dataLvl || <span class="hljs-string">''</span>);
  <span class="hljs-keyword">var</span> $errs = <span class="hljs-string">'errs__'</span> + $lvl;
  <span class="hljs-keyword">var</span> $it = it.util.copy(it);
  <span class="hljs-keyword">var</span> $closingBraces = <span class="hljs-string">''</span>;
  $it.level++;
  <span class="hljs-keyword">var</span> $nextValid = <span class="hljs-string">'valid'</span> + $it.level;
  <span class="hljs-keyword">var</span> $schemaDeps = {},
    $propertyDeps = {};
  <span class="hljs-keyword">for</span> ($property <span class="hljs-keyword">in</span> $schema) {
    <span class="hljs-keyword">var</span> $sch = $schema[$property];
    <span class="hljs-keyword">var</span> $deps = <span class="hljs-built_in">Array</span>.isArray($sch) ? $propertyDeps : $schemaDeps;
    $deps[$property] = $sch;
  }
  out += <span class="hljs-string">'var '</span> + ($errs) + <span class="hljs-string">' = errors;'</span>;
  <span class="hljs-keyword">var</span> $currentErrorPath = it.errorPath;
  out += <span class="hljs-string">'var missing'</span> + ($lvl) + <span class="hljs-string">';'</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> $property <span class="hljs-keyword">in</span> $propertyDeps) {
    $deps = $propertyDeps[$property];
    out += <span class="hljs-string">' if ('</span> + ($data) + (it.util.getProperty($property)) + <span class="hljs-string">' !== undefined '</span>;
    <span class="hljs-keyword">if</span> ($breakOnError) {
      out += <span class="hljs-string">' &amp;&amp; ( '</span>;
      <span class="hljs-keyword">var</span> arr1 = $deps;
      <span class="hljs-keyword">if</span> (arr1) {
        <span class="hljs-keyword">var</span> _$property, $i = <span class="hljs-number">-1</span>,
          l1 = arr1.length - <span class="hljs-number">1</span>;
        <span class="hljs-keyword">while</span> ($i &lt; l1) {
          _$property = arr1[$i += <span class="hljs-number">1</span>];
          <span class="hljs-keyword">if</span> ($i) {
            out += <span class="hljs-string">' || '</span>;
          }
          <span class="hljs-keyword">var</span> $prop = it.util.getProperty(_$property);
          out += <span class="hljs-string">' ( '</span> + ($data) + ($prop) + <span class="hljs-string">' === undefined &amp;&amp; (missing'</span> + ($lvl) + <span class="hljs-string">' = '</span> + (it.util.toQuotedString(it.opts.jsonPointers ? _$property : $prop)) + <span class="hljs-string">') ) '</span>;
        }
      }
      out += <span class="hljs-string">')) {  '</span>;
      <span class="hljs-keyword">var</span> $propertyPath = <span class="hljs-string">'missing'</span> + $lvl,
        $missingProperty = <span class="hljs-string">'\' + '</span> + $propertyPath + <span class="hljs-string">' + \''</span>;
      <span class="hljs-keyword">if</span> (it.opts._errorDataPathProperty) {
        it.errorPath = it.opts.jsonPointers ? it.util.getPathExpr($currentErrorPath, $propertyPath, <span class="hljs-literal">true</span>) : $currentErrorPath + <span class="hljs-string">' + '</span> + $propertyPath;
      }
      <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
      $$outStack.push(out);
      out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
      <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
        out += <span class="hljs-string">' { keyword: \''</span> + (<span class="hljs-string">'dependencies'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { property: \''</span> + (it.util.escapeQuotes($property)) + <span class="hljs-string">'\', missingProperty: \''</span> + ($missingProperty) + <span class="hljs-string">'\', depsCount: '</span> + ($deps.length) + <span class="hljs-string">', deps: \''</span> + (it.util.escapeQuotes($deps.length == <span class="hljs-number">1</span> ? $deps[<span class="hljs-number">0</span>] : $deps.join(<span class="hljs-string">", "</span>))) + <span class="hljs-string">'\' } '</span>;
        <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
          out += <span class="hljs-string">' , message: \'should have '</span>;
          <span class="hljs-keyword">if</span> ($deps.length == <span class="hljs-number">1</span>) {
            out += <span class="hljs-string">'property '</span> + (it.util.escapeQuotes($deps[<span class="hljs-number">0</span>]));
          } <span class="hljs-keyword">else</span> {
            out += <span class="hljs-string">'properties '</span> + (it.util.escapeQuotes($deps.join(<span class="hljs-string">", "</span>)));
          }
          out += <span class="hljs-string">' when property '</span> + (it.util.escapeQuotes($property)) + <span class="hljs-string">' is present\' '</span>;
        }
        <span class="hljs-keyword">if</span> (it.opts.verbose) {
          out += <span class="hljs-string">' , schema: validate.schema'</span> + ($schemaPath) + <span class="hljs-string">' , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
        }
        out += <span class="hljs-string">' } '</span>;
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">' {} '</span>;
      }
      <span class="hljs-keyword">var</span> __err = out;
      out = $$outStack.pop();
      <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
        <span class="hljs-keyword">if</span> (it.async) {
          out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
        } <span class="hljs-keyword">else</span> {
          out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
        }
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
      }
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' ) { '</span>;
      <span class="hljs-keyword">var</span> arr2 = $deps;
      <span class="hljs-keyword">if</span> (arr2) {
        <span class="hljs-keyword">var</span> $reqProperty, i2 = <span class="hljs-number">-1</span>,
          l2 = arr2.length - <span class="hljs-number">1</span>;
        <span class="hljs-keyword">while</span> (i2 &lt; l2) {
          $reqProperty = arr2[i2 += <span class="hljs-number">1</span>];
          <span class="hljs-keyword">var</span> $prop = it.util.getProperty($reqProperty),
            $missingProperty = it.util.escapeQuotes($reqProperty);
          <span class="hljs-keyword">if</span> (it.opts._errorDataPathProperty) {
            it.errorPath = it.util.getPath($currentErrorPath, $reqProperty, it.opts.jsonPointers);
          }
          out += <span class="hljs-string">' if ('</span> + ($data) + ($prop) + <span class="hljs-string">' === undefined) {  var err =   '</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
          <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
            out += <span class="hljs-string">' { keyword: \''</span> + (<span class="hljs-string">'dependencies'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { property: \''</span> + (it.util.escapeQuotes($property)) + <span class="hljs-string">'\', missingProperty: \''</span> + ($missingProperty) + <span class="hljs-string">'\', depsCount: '</span> + ($deps.length) + <span class="hljs-string">', deps: \''</span> + (it.util.escapeQuotes($deps.length == <span class="hljs-number">1</span> ? $deps[<span class="hljs-number">0</span>] : $deps.join(<span class="hljs-string">", "</span>))) + <span class="hljs-string">'\' } '</span>;
            <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
              out += <span class="hljs-string">' , message: \'should have '</span>;
              <span class="hljs-keyword">if</span> ($deps.length == <span class="hljs-number">1</span>) {
                out += <span class="hljs-string">'property '</span> + (it.util.escapeQuotes($deps[<span class="hljs-number">0</span>]));
              } <span class="hljs-keyword">else</span> {
                out += <span class="hljs-string">'properties '</span> + (it.util.escapeQuotes($deps.join(<span class="hljs-string">", "</span>)));
              }
              out += <span class="hljs-string">' when property '</span> + (it.util.escapeQuotes($property)) + <span class="hljs-string">' is present\' '</span>;
            }
            <span class="hljs-keyword">if</span> (it.opts.verbose) {
              out += <span class="hljs-string">' , schema: validate.schema'</span> + ($schemaPath) + <span class="hljs-string">' , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
            }
            out += <span class="hljs-string">' } '</span>;
          } <span class="hljs-keyword">else</span> {
            out += <span class="hljs-string">' {} '</span>;
          }
          out += <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } '</span>;
        }
      }
    }
    out += <span class="hljs-string">' }   '</span>;
    <span class="hljs-keyword">if</span> ($breakOnError) {
      $closingBraces += <span class="hljs-string">'}'</span>;
      out += <span class="hljs-string">' else { '</span>;
    }
  }
  it.errorPath = $currentErrorPath;
  <span class="hljs-keyword">var</span> $currentBaseId = $it.baseId;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> $property <span class="hljs-keyword">in</span> $schemaDeps) {
    <span class="hljs-keyword">var</span> $sch = $schemaDeps[$property];
    <span class="hljs-keyword">if</span> (it.util.schemaHasRules($sch, it.RULES.all)) {
      out += <span class="hljs-string">' '</span> + ($nextValid) + <span class="hljs-string">' = true; if ('</span> + ($data) + (it.util.getProperty($property)) + <span class="hljs-string">' !== undefined) { '</span>;
      $it.schema = $sch;
      $it.schemaPath = $schemaPath + it.util.getProperty($property);
      $it.errSchemaPath = $errSchemaPath + <span class="hljs-string">'/'</span> + it.util.escapeFragment($property);
      out += <span class="hljs-string">'  '</span> + (it.validate($it)) + <span class="hljs-string">' '</span>;
      $it.baseId = $currentBaseId;
      out += <span class="hljs-string">' }  '</span>;
      <span class="hljs-keyword">if</span> ($breakOnError) {
        out += <span class="hljs-string">' if ('</span> + ($nextValid) + <span class="hljs-string">') { '</span>;
        $closingBraces += <span class="hljs-string">'}'</span>;
      }
    }
  }
  <span class="hljs-keyword">if</span> ($breakOnError) {
    out += <span class="hljs-string">'   '</span> + ($closingBraces) + <span class="hljs-string">' if ('</span> + ($errs) + <span class="hljs-string">' == errors) {'</span>;
  }
  out = it.util.cleanUpCode(out);
  <span class="hljs-keyword">return</span> out;
}

},{}],<span class="hljs-number">23</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generate_enum</span>(<span class="hljs-params">it, $keyword</span>) </span>{
  <span class="hljs-keyword">var</span> out = <span class="hljs-string">' '</span>;
  <span class="hljs-keyword">var</span> $lvl = it.level;
  <span class="hljs-keyword">var</span> $dataLvl = it.dataLevel;
  <span class="hljs-keyword">var</span> $schema = it.schema[$keyword];
  <span class="hljs-keyword">var</span> $schemaPath = it.schemaPath + it.util.getProperty($keyword);
  <span class="hljs-keyword">var</span> $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/'</span> + $keyword;
  <span class="hljs-keyword">var</span> $breakOnError = !it.opts.allErrors;
  <span class="hljs-keyword">var</span> $data = <span class="hljs-string">'data'</span> + ($dataLvl || <span class="hljs-string">''</span>);
  <span class="hljs-keyword">var</span> $valid = <span class="hljs-string">'valid'</span> + $lvl;
  <span class="hljs-keyword">var</span> $isData = it.opts.v5 &amp;&amp; $schema &amp;&amp; $schema.$data,
    $schemaValue;
  <span class="hljs-keyword">if</span> ($isData) {
    out += <span class="hljs-string">' var schema'</span> + ($lvl) + <span class="hljs-string">' = '</span> + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + <span class="hljs-string">'; '</span>;
    $schemaValue = <span class="hljs-string">'schema'</span> + $lvl;
  } <span class="hljs-keyword">else</span> {
    $schemaValue = $schema;
  }
  <span class="hljs-keyword">var</span> $i = <span class="hljs-string">'i'</span> + $lvl,
    $vSchema = <span class="hljs-string">'schema'</span> + $lvl;
  <span class="hljs-keyword">if</span> (!$isData) {
    out += <span class="hljs-string">' var '</span> + ($vSchema) + <span class="hljs-string">' = validate.schema'</span> + ($schemaPath) + <span class="hljs-string">';'</span>;
  }
  out += <span class="hljs-string">'var '</span> + ($valid) + <span class="hljs-string">';'</span>;
  <span class="hljs-keyword">if</span> ($isData) {
    out += <span class="hljs-string">' if (schema'</span> + ($lvl) + <span class="hljs-string">' === undefined) '</span> + ($valid) + <span class="hljs-string">' = true; else if (!Array.isArray(schema'</span> + ($lvl) + <span class="hljs-string">')) '</span> + ($valid) + <span class="hljs-string">' = false; else {'</span>;
  }
  out += <span class="hljs-string">''</span> + ($valid) + <span class="hljs-string">' = false;for (var '</span> + ($i) + <span class="hljs-string">'=0; '</span> + ($i) + <span class="hljs-string">'&lt;'</span> + ($vSchema) + <span class="hljs-string">'.length; '</span> + ($i) + <span class="hljs-string">'++) if (equal('</span> + ($data) + <span class="hljs-string">', '</span> + ($vSchema) + <span class="hljs-string">'['</span> + ($i) + <span class="hljs-string">'])) { '</span> + ($valid) + <span class="hljs-string">' = true; break; }'</span>;
  <span class="hljs-keyword">if</span> ($isData) {
    out += <span class="hljs-string">'  }  '</span>;
  }
  out += <span class="hljs-string">' if (!'</span> + ($valid) + <span class="hljs-string">') {   '</span>;
  <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
  $$outStack.push(out);
  out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
  <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
    out += <span class="hljs-string">' { keyword: \''</span> + (<span class="hljs-string">'enum'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { allowedValues: schema'</span> + ($lvl) + <span class="hljs-string">' } '</span>;
    <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
      out += <span class="hljs-string">' , message: \'should be equal to one of the allowed values\' '</span>;
    }
    <span class="hljs-keyword">if</span> (it.opts.verbose) {
      out += <span class="hljs-string">' , schema: validate.schema'</span> + ($schemaPath) + <span class="hljs-string">' , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
    }
    out += <span class="hljs-string">' } '</span>;
  } <span class="hljs-keyword">else</span> {
    out += <span class="hljs-string">' {} '</span>;
  }
  <span class="hljs-keyword">var</span> __err = out;
  out = $$outStack.pop();
  <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
    <span class="hljs-keyword">if</span> (it.async) {
      out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
    }
  } <span class="hljs-keyword">else</span> {
    out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
  }
  out += <span class="hljs-string">' }'</span>;
  <span class="hljs-keyword">if</span> ($breakOnError) {
    out += <span class="hljs-string">' else { '</span>;
  }
  <span class="hljs-keyword">return</span> out;
}

},{}],<span class="hljs-number">24</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generate_format</span>(<span class="hljs-params">it, $keyword</span>) </span>{
  <span class="hljs-keyword">var</span> out = <span class="hljs-string">' '</span>;
  <span class="hljs-keyword">var</span> $lvl = it.level;
  <span class="hljs-keyword">var</span> $dataLvl = it.dataLevel;
  <span class="hljs-keyword">var</span> $schema = it.schema[$keyword];
  <span class="hljs-keyword">var</span> $schemaPath = it.schemaPath + it.util.getProperty($keyword);
  <span class="hljs-keyword">var</span> $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/'</span> + $keyword;
  <span class="hljs-keyword">var</span> $breakOnError = !it.opts.allErrors;
  <span class="hljs-keyword">var</span> $data = <span class="hljs-string">'data'</span> + ($dataLvl || <span class="hljs-string">''</span>);
  <span class="hljs-keyword">if</span> (it.opts.format === <span class="hljs-literal">false</span>) {
    <span class="hljs-keyword">if</span> ($breakOnError) {
      out += <span class="hljs-string">' if (true) { '</span>;
    }
    <span class="hljs-keyword">return</span> out;
  }
  <span class="hljs-keyword">var</span> $isData = it.opts.v5 &amp;&amp; $schema &amp;&amp; $schema.$data,
    $schemaValue;
  <span class="hljs-keyword">if</span> ($isData) {
    out += <span class="hljs-string">' var schema'</span> + ($lvl) + <span class="hljs-string">' = '</span> + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + <span class="hljs-string">'; '</span>;
    $schemaValue = <span class="hljs-string">'schema'</span> + $lvl;
  } <span class="hljs-keyword">else</span> {
    $schemaValue = $schema;
  }
  <span class="hljs-keyword">var</span> $unknownFormats = it.opts.unknownFormats,
    $allowUnknown = <span class="hljs-built_in">Array</span>.isArray($unknownFormats);
  <span class="hljs-keyword">if</span> ($isData) {
    <span class="hljs-keyword">var</span> $format = <span class="hljs-string">'format'</span> + $lvl;
    out += <span class="hljs-string">' var '</span> + ($format) + <span class="hljs-string">' = formats['</span> + ($schemaValue) + <span class="hljs-string">']; var isObject'</span> + ($lvl) + <span class="hljs-string">' = typeof '</span> + ($format) + <span class="hljs-string">' == \'object\' &amp;&amp; !('</span> + ($format) + <span class="hljs-string">' instanceof RegExp) &amp;&amp; '</span> + ($format) + <span class="hljs-string">'.validate; if (isObject'</span> + ($lvl) + <span class="hljs-string">') { '</span>;
    <span class="hljs-keyword">if</span> (it.async) {
      out += <span class="hljs-string">' var async'</span> + ($lvl) + <span class="hljs-string">' = '</span> + ($format) + <span class="hljs-string">'.async; '</span>;
    }
    out += <span class="hljs-string">' '</span> + ($format) + <span class="hljs-string">' = '</span> + ($format) + <span class="hljs-string">'.validate; } if (  '</span>;
    <span class="hljs-keyword">if</span> ($isData) {
      out += <span class="hljs-string">' ('</span> + ($schemaValue) + <span class="hljs-string">' !== undefined &amp;&amp; typeof '</span> + ($schemaValue) + <span class="hljs-string">' != \'string\') || '</span>;
    }
    out += <span class="hljs-string">' ('</span>;
    <span class="hljs-keyword">if</span> ($unknownFormats === <span class="hljs-literal">true</span> || $allowUnknown) {
      out += <span class="hljs-string">' ('</span> + ($schemaValue) + <span class="hljs-string">' &amp;&amp; !'</span> + ($format) + <span class="hljs-string">' '</span>;
      <span class="hljs-keyword">if</span> ($allowUnknown) {
        out += <span class="hljs-string">' &amp;&amp; self._opts.unknownFormats.indexOf('</span> + ($schemaValue) + <span class="hljs-string">') == -1 '</span>;
      }
      out += <span class="hljs-string">') || '</span>;
    }
    out += <span class="hljs-string">' ('</span> + ($format) + <span class="hljs-string">' &amp;&amp; !(typeof '</span> + ($format) + <span class="hljs-string">' == \'function\' ? '</span>;
    <span class="hljs-keyword">if</span> (it.async) {
      out += <span class="hljs-string">' (async'</span> + ($lvl) + <span class="hljs-string">' ? '</span> + (it.yieldAwait) + <span class="hljs-string">' '</span> + ($format) + <span class="hljs-string">'('</span> + ($data) + <span class="hljs-string">') : '</span> + ($format) + <span class="hljs-string">'('</span> + ($data) + <span class="hljs-string">')) '</span>;
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' '</span> + ($format) + <span class="hljs-string">'('</span> + ($data) + <span class="hljs-string">') '</span>;
    }
    out += <span class="hljs-string">' : '</span> + ($format) + <span class="hljs-string">'.test('</span> + ($data) + <span class="hljs-string">'))))) {'</span>;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">var</span> $format = it.formats[$schema];
    <span class="hljs-keyword">if</span> (!$format) {
      <span class="hljs-keyword">if</span> ($unknownFormats === <span class="hljs-literal">true</span> || ($allowUnknown &amp;&amp; $unknownFormats.indexOf($schema) == <span class="hljs-number">-1</span>)) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'unknown format "'</span> + $schema + <span class="hljs-string">'" is used in schema at path "'</span> + it.errSchemaPath + <span class="hljs-string">'"'</span>);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">if</span> (!$allowUnknown) {
          <span class="hljs-built_in">console</span>.warn(<span class="hljs-string">'unknown format "'</span> + $schema + <span class="hljs-string">'" ignored in schema at path "'</span> + it.errSchemaPath + <span class="hljs-string">'"'</span>);
          <span class="hljs-keyword">if</span> ($unknownFormats !== <span class="hljs-string">'ignore'</span>) <span class="hljs-built_in">console</span>.warn(<span class="hljs-string">'In the next major version it will throw exception. See option unknownFormats for more information'</span>);
        }
        <span class="hljs-keyword">if</span> ($breakOnError) {
          out += <span class="hljs-string">' if (true) { '</span>;
        }
        <span class="hljs-keyword">return</span> out;
      }
    }
    <span class="hljs-keyword">var</span> $isObject = <span class="hljs-keyword">typeof</span> $format == <span class="hljs-string">'object'</span> &amp;&amp; !($format <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">RegExp</span>) &amp;&amp; $format.validate;
    <span class="hljs-keyword">if</span> ($isObject) {
      <span class="hljs-keyword">var</span> $<span class="hljs-keyword">async</span> = $format.async === <span class="hljs-literal">true</span>;
      $format = $format.validate;
    }
    <span class="hljs-keyword">if</span> ($<span class="hljs-keyword">async</span>) {
      <span class="hljs-keyword">if</span> (!it.async) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'async format in sync schema'</span>);
      <span class="hljs-keyword">var</span> $formatRef = <span class="hljs-string">'formats'</span> + it.util.getProperty($schema) + <span class="hljs-string">'.validate'</span>;
      out += <span class="hljs-string">' if (!('</span> + (it.yieldAwait) + <span class="hljs-string">' '</span> + ($formatRef) + <span class="hljs-string">'('</span> + ($data) + <span class="hljs-string">'))) { '</span>;
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' if (! '</span>;
      <span class="hljs-keyword">var</span> $formatRef = <span class="hljs-string">'formats'</span> + it.util.getProperty($schema);
      <span class="hljs-keyword">if</span> ($isObject) $formatRef += <span class="hljs-string">'.validate'</span>;
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> $format == <span class="hljs-string">'function'</span>) {
        out += <span class="hljs-string">' '</span> + ($formatRef) + <span class="hljs-string">'('</span> + ($data) + <span class="hljs-string">') '</span>;
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">' '</span> + ($formatRef) + <span class="hljs-string">'.test('</span> + ($data) + <span class="hljs-string">') '</span>;
      }
      out += <span class="hljs-string">') { '</span>;
    }
  }
  <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
  $$outStack.push(out);
  out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
  <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
    out += <span class="hljs-string">' { keyword: \''</span> + (<span class="hljs-string">'format'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { format:  '</span>;
    <span class="hljs-keyword">if</span> ($isData) {
      out += <span class="hljs-string">''</span> + ($schemaValue);
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">''</span> + (it.util.toQuotedString($schema));
    }
    out += <span class="hljs-string">'  } '</span>;
    <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
      out += <span class="hljs-string">' , message: \'should match format "'</span>;
      <span class="hljs-keyword">if</span> ($isData) {
        out += <span class="hljs-string">'\' + '</span> + ($schemaValue) + <span class="hljs-string">' + \''</span>;
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">''</span> + (it.util.escapeQuotes($schema));
      }
      out += <span class="hljs-string">'"\' '</span>;
    }
    <span class="hljs-keyword">if</span> (it.opts.verbose) {
      out += <span class="hljs-string">' , schema:  '</span>;
      <span class="hljs-keyword">if</span> ($isData) {
        out += <span class="hljs-string">'validate.schema'</span> + ($schemaPath);
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">''</span> + (it.util.toQuotedString($schema));
      }
      out += <span class="hljs-string">'         , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
    }
    out += <span class="hljs-string">' } '</span>;
  } <span class="hljs-keyword">else</span> {
    out += <span class="hljs-string">' {} '</span>;
  }
  <span class="hljs-keyword">var</span> __err = out;
  out = $$outStack.pop();
  <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
    <span class="hljs-keyword">if</span> (it.async) {
      out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
    }
  } <span class="hljs-keyword">else</span> {
    out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
  }
  out += <span class="hljs-string">' } '</span>;
  <span class="hljs-keyword">if</span> ($breakOnError) {
    out += <span class="hljs-string">' else { '</span>;
  }
  <span class="hljs-keyword">return</span> out;
}

},{}],<span class="hljs-number">25</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generate_items</span>(<span class="hljs-params">it, $keyword</span>) </span>{
  <span class="hljs-keyword">var</span> out = <span class="hljs-string">' '</span>;
  <span class="hljs-keyword">var</span> $lvl = it.level;
  <span class="hljs-keyword">var</span> $dataLvl = it.dataLevel;
  <span class="hljs-keyword">var</span> $schema = it.schema[$keyword];
  <span class="hljs-keyword">var</span> $schemaPath = it.schemaPath + it.util.getProperty($keyword);
  <span class="hljs-keyword">var</span> $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/'</span> + $keyword;
  <span class="hljs-keyword">var</span> $breakOnError = !it.opts.allErrors;
  <span class="hljs-keyword">var</span> $data = <span class="hljs-string">'data'</span> + ($dataLvl || <span class="hljs-string">''</span>);
  <span class="hljs-keyword">var</span> $valid = <span class="hljs-string">'valid'</span> + $lvl;
  <span class="hljs-keyword">var</span> $errs = <span class="hljs-string">'errs__'</span> + $lvl;
  <span class="hljs-keyword">var</span> $it = it.util.copy(it);
  <span class="hljs-keyword">var</span> $closingBraces = <span class="hljs-string">''</span>;
  $it.level++;
  <span class="hljs-keyword">var</span> $nextValid = <span class="hljs-string">'valid'</span> + $it.level;
  <span class="hljs-keyword">var</span> $idx = <span class="hljs-string">'i'</span> + $lvl,
    $dataNxt = $it.dataLevel = it.dataLevel + <span class="hljs-number">1</span>,
    $nextData = <span class="hljs-string">'data'</span> + $dataNxt,
    $currentBaseId = it.baseId;
  out += <span class="hljs-string">'var '</span> + ($errs) + <span class="hljs-string">' = errors;var '</span> + ($valid) + <span class="hljs-string">';'</span>;
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray($schema)) {
    <span class="hljs-keyword">var</span> $additionalItems = it.schema.additionalItems;
    <span class="hljs-keyword">if</span> ($additionalItems === <span class="hljs-literal">false</span>) {
      out += <span class="hljs-string">' '</span> + ($valid) + <span class="hljs-string">' = '</span> + ($data) + <span class="hljs-string">'.length &lt;= '</span> + ($schema.length) + <span class="hljs-string">'; '</span>;
      <span class="hljs-keyword">var</span> $currErrSchemaPath = $errSchemaPath;
      $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/additionalItems'</span>;
      out += <span class="hljs-string">'  if (!'</span> + ($valid) + <span class="hljs-string">') {   '</span>;
      <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
      $$outStack.push(out);
      out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
      <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
        out += <span class="hljs-string">' { keyword: \''</span> + (<span class="hljs-string">'additionalItems'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { limit: '</span> + ($schema.length) + <span class="hljs-string">' } '</span>;
        <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
          out += <span class="hljs-string">' , message: \'should NOT have more than '</span> + ($schema.length) + <span class="hljs-string">' items\' '</span>;
        }
        <span class="hljs-keyword">if</span> (it.opts.verbose) {
          out += <span class="hljs-string">' , schema: false , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
        }
        out += <span class="hljs-string">' } '</span>;
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">' {} '</span>;
      }
      <span class="hljs-keyword">var</span> __err = out;
      out = $$outStack.pop();
      <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
        <span class="hljs-keyword">if</span> (it.async) {
          out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
        } <span class="hljs-keyword">else</span> {
          out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
        }
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
      }
      out += <span class="hljs-string">' } '</span>;
      $errSchemaPath = $currErrSchemaPath;
      <span class="hljs-keyword">if</span> ($breakOnError) {
        $closingBraces += <span class="hljs-string">'}'</span>;
        out += <span class="hljs-string">' else { '</span>;
      }
    }
    <span class="hljs-keyword">var</span> arr1 = $schema;
    <span class="hljs-keyword">if</span> (arr1) {
      <span class="hljs-keyword">var</span> $sch, $i = <span class="hljs-number">-1</span>,
        l1 = arr1.length - <span class="hljs-number">1</span>;
      <span class="hljs-keyword">while</span> ($i &lt; l1) {
        $sch = arr1[$i += <span class="hljs-number">1</span>];
        <span class="hljs-keyword">if</span> (it.util.schemaHasRules($sch, it.RULES.all)) {
          out += <span class="hljs-string">' '</span> + ($nextValid) + <span class="hljs-string">' = true; if ('</span> + ($data) + <span class="hljs-string">'.length &gt; '</span> + ($i) + <span class="hljs-string">') { '</span>;
          <span class="hljs-keyword">var</span> $passData = $data + <span class="hljs-string">'['</span> + $i + <span class="hljs-string">']'</span>;
          $it.schema = $sch;
          $it.schemaPath = $schemaPath + <span class="hljs-string">'['</span> + $i + <span class="hljs-string">']'</span>;
          $it.errSchemaPath = $errSchemaPath + <span class="hljs-string">'/'</span> + $i;
          $it.errorPath = it.util.getPathExpr(it.errorPath, $i, it.opts.jsonPointers, <span class="hljs-literal">true</span>);
          $it.dataPathArr[$dataNxt] = $i;
          <span class="hljs-keyword">var</span> $code = it.validate($it);
          $it.baseId = $currentBaseId;
          <span class="hljs-keyword">if</span> (it.util.varOccurences($code, $nextData) &lt; <span class="hljs-number">2</span>) {
            out += <span class="hljs-string">' '</span> + (it.util.varReplace($code, $nextData, $passData)) + <span class="hljs-string">' '</span>;
          } <span class="hljs-keyword">else</span> {
            out += <span class="hljs-string">' var '</span> + ($nextData) + <span class="hljs-string">' = '</span> + ($passData) + <span class="hljs-string">'; '</span> + ($code) + <span class="hljs-string">' '</span>;
          }
          out += <span class="hljs-string">' }  '</span>;
          <span class="hljs-keyword">if</span> ($breakOnError) {
            out += <span class="hljs-string">' if ('</span> + ($nextValid) + <span class="hljs-string">') { '</span>;
            $closingBraces += <span class="hljs-string">'}'</span>;
          }
        }
      }
    }
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> $additionalItems == <span class="hljs-string">'object'</span> &amp;&amp; it.util.schemaHasRules($additionalItems, it.RULES.all)) {
      $it.schema = $additionalItems;
      $it.schemaPath = it.schemaPath + <span class="hljs-string">'.additionalItems'</span>;
      $it.errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/additionalItems'</span>;
      out += <span class="hljs-string">' '</span> + ($nextValid) + <span class="hljs-string">' = true; if ('</span> + ($data) + <span class="hljs-string">'.length &gt; '</span> + ($schema.length) + <span class="hljs-string">') {  for (var '</span> + ($idx) + <span class="hljs-string">' = '</span> + ($schema.length) + <span class="hljs-string">'; '</span> + ($idx) + <span class="hljs-string">' &lt; '</span> + ($data) + <span class="hljs-string">'.length; '</span> + ($idx) + <span class="hljs-string">'++) { '</span>;
      $it.errorPath = it.util.getPathExpr(it.errorPath, $idx, it.opts.jsonPointers, <span class="hljs-literal">true</span>);
      <span class="hljs-keyword">var</span> $passData = $data + <span class="hljs-string">'['</span> + $idx + <span class="hljs-string">']'</span>;
      $it.dataPathArr[$dataNxt] = $idx;
      <span class="hljs-keyword">var</span> $code = it.validate($it);
      $it.baseId = $currentBaseId;
      <span class="hljs-keyword">if</span> (it.util.varOccurences($code, $nextData) &lt; <span class="hljs-number">2</span>) {
        out += <span class="hljs-string">' '</span> + (it.util.varReplace($code, $nextData, $passData)) + <span class="hljs-string">' '</span>;
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">' var '</span> + ($nextData) + <span class="hljs-string">' = '</span> + ($passData) + <span class="hljs-string">'; '</span> + ($code) + <span class="hljs-string">' '</span>;
      }
      <span class="hljs-keyword">if</span> ($breakOnError) {
        out += <span class="hljs-string">' if (!'</span> + ($nextValid) + <span class="hljs-string">') break; '</span>;
      }
      out += <span class="hljs-string">' } }  '</span>;
      <span class="hljs-keyword">if</span> ($breakOnError) {
        out += <span class="hljs-string">' if ('</span> + ($nextValid) + <span class="hljs-string">') { '</span>;
        $closingBraces += <span class="hljs-string">'}'</span>;
      }
    }
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (it.util.schemaHasRules($schema, it.RULES.all)) {
    $it.schema = $schema;
    $it.schemaPath = $schemaPath;
    $it.errSchemaPath = $errSchemaPath;
    out += <span class="hljs-string">'  for (var '</span> + ($idx) + <span class="hljs-string">' = '</span> + (<span class="hljs-number">0</span>) + <span class="hljs-string">'; '</span> + ($idx) + <span class="hljs-string">' &lt; '</span> + ($data) + <span class="hljs-string">'.length; '</span> + ($idx) + <span class="hljs-string">'++) { '</span>;
    $it.errorPath = it.util.getPathExpr(it.errorPath, $idx, it.opts.jsonPointers, <span class="hljs-literal">true</span>);
    <span class="hljs-keyword">var</span> $passData = $data + <span class="hljs-string">'['</span> + $idx + <span class="hljs-string">']'</span>;
    $it.dataPathArr[$dataNxt] = $idx;
    <span class="hljs-keyword">var</span> $code = it.validate($it);
    $it.baseId = $currentBaseId;
    <span class="hljs-keyword">if</span> (it.util.varOccurences($code, $nextData) &lt; <span class="hljs-number">2</span>) {
      out += <span class="hljs-string">' '</span> + (it.util.varReplace($code, $nextData, $passData)) + <span class="hljs-string">' '</span>;
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' var '</span> + ($nextData) + <span class="hljs-string">' = '</span> + ($passData) + <span class="hljs-string">'; '</span> + ($code) + <span class="hljs-string">' '</span>;
    }
    <span class="hljs-keyword">if</span> ($breakOnError) {
      out += <span class="hljs-string">' if (!'</span> + ($nextValid) + <span class="hljs-string">') break; '</span>;
    }
    out += <span class="hljs-string">' }  '</span>;
    <span class="hljs-keyword">if</span> ($breakOnError) {
      out += <span class="hljs-string">' if ('</span> + ($nextValid) + <span class="hljs-string">') { '</span>;
      $closingBraces += <span class="hljs-string">'}'</span>;
    }
  }
  <span class="hljs-keyword">if</span> ($breakOnError) {
    out += <span class="hljs-string">' '</span> + ($closingBraces) + <span class="hljs-string">' if ('</span> + ($errs) + <span class="hljs-string">' == errors) {'</span>;
  }
  out = it.util.cleanUpCode(out);
  <span class="hljs-keyword">return</span> out;
}

},{}],<span class="hljs-number">26</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generate_multipleOf</span>(<span class="hljs-params">it, $keyword</span>) </span>{
  <span class="hljs-keyword">var</span> out = <span class="hljs-string">' '</span>;
  <span class="hljs-keyword">var</span> $lvl = it.level;
  <span class="hljs-keyword">var</span> $dataLvl = it.dataLevel;
  <span class="hljs-keyword">var</span> $schema = it.schema[$keyword];
  <span class="hljs-keyword">var</span> $schemaPath = it.schemaPath + it.util.getProperty($keyword);
  <span class="hljs-keyword">var</span> $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/'</span> + $keyword;
  <span class="hljs-keyword">var</span> $breakOnError = !it.opts.allErrors;
  <span class="hljs-keyword">var</span> $data = <span class="hljs-string">'data'</span> + ($dataLvl || <span class="hljs-string">''</span>);
  <span class="hljs-keyword">var</span> $isData = it.opts.v5 &amp;&amp; $schema &amp;&amp; $schema.$data,
    $schemaValue;
  <span class="hljs-keyword">if</span> ($isData) {
    out += <span class="hljs-string">' var schema'</span> + ($lvl) + <span class="hljs-string">' = '</span> + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + <span class="hljs-string">'; '</span>;
    $schemaValue = <span class="hljs-string">'schema'</span> + $lvl;
  } <span class="hljs-keyword">else</span> {
    $schemaValue = $schema;
  }
  out += <span class="hljs-string">'var division'</span> + ($lvl) + <span class="hljs-string">';if ('</span>;
  <span class="hljs-keyword">if</span> ($isData) {
    out += <span class="hljs-string">' '</span> + ($schemaValue) + <span class="hljs-string">' !== undefined &amp;&amp; ( typeof '</span> + ($schemaValue) + <span class="hljs-string">' != \'number\' || '</span>;
  }
  out += <span class="hljs-string">' (division'</span> + ($lvl) + <span class="hljs-string">' = '</span> + ($data) + <span class="hljs-string">' / '</span> + ($schemaValue) + <span class="hljs-string">', '</span>;
  <span class="hljs-keyword">if</span> (it.opts.multipleOfPrecision) {
    out += <span class="hljs-string">' Math.abs(Math.round(division'</span> + ($lvl) + <span class="hljs-string">') - division'</span> + ($lvl) + <span class="hljs-string">') &gt; 1e-'</span> + (it.opts.multipleOfPrecision) + <span class="hljs-string">' '</span>;
  } <span class="hljs-keyword">else</span> {
    out += <span class="hljs-string">' division'</span> + ($lvl) + <span class="hljs-string">' !== parseInt(division'</span> + ($lvl) + <span class="hljs-string">') '</span>;
  }
  out += <span class="hljs-string">' ) '</span>;
  <span class="hljs-keyword">if</span> ($isData) {
    out += <span class="hljs-string">'  )  '</span>;
  }
  out += <span class="hljs-string">' ) {   '</span>;
  <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
  $$outStack.push(out);
  out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
  <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
    out += <span class="hljs-string">' { keyword: \''</span> + (<span class="hljs-string">'multipleOf'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { multipleOf: '</span> + ($schemaValue) + <span class="hljs-string">' } '</span>;
    <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
      out += <span class="hljs-string">' , message: \'should be multiple of '</span>;
      <span class="hljs-keyword">if</span> ($isData) {
        out += <span class="hljs-string">'\' + '</span> + ($schemaValue);
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">''</span> + ($schema) + <span class="hljs-string">'\''</span>;
      }
    }
    <span class="hljs-keyword">if</span> (it.opts.verbose) {
      out += <span class="hljs-string">' , schema:  '</span>;
      <span class="hljs-keyword">if</span> ($isData) {
        out += <span class="hljs-string">'validate.schema'</span> + ($schemaPath);
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">''</span> + ($schema);
      }
      out += <span class="hljs-string">'         , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
    }
    out += <span class="hljs-string">' } '</span>;
  } <span class="hljs-keyword">else</span> {
    out += <span class="hljs-string">' {} '</span>;
  }
  <span class="hljs-keyword">var</span> __err = out;
  out = $$outStack.pop();
  <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
    <span class="hljs-keyword">if</span> (it.async) {
      out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
    }
  } <span class="hljs-keyword">else</span> {
    out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
  }
  out += <span class="hljs-string">'} '</span>;
  <span class="hljs-keyword">if</span> ($breakOnError) {
    out += <span class="hljs-string">' else { '</span>;
  }
  <span class="hljs-keyword">return</span> out;
}

},{}],<span class="hljs-number">27</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generate_not</span>(<span class="hljs-params">it, $keyword</span>) </span>{
  <span class="hljs-keyword">var</span> out = <span class="hljs-string">' '</span>;
  <span class="hljs-keyword">var</span> $lvl = it.level;
  <span class="hljs-keyword">var</span> $dataLvl = it.dataLevel;
  <span class="hljs-keyword">var</span> $schema = it.schema[$keyword];
  <span class="hljs-keyword">var</span> $schemaPath = it.schemaPath + it.util.getProperty($keyword);
  <span class="hljs-keyword">var</span> $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/'</span> + $keyword;
  <span class="hljs-keyword">var</span> $breakOnError = !it.opts.allErrors;
  <span class="hljs-keyword">var</span> $data = <span class="hljs-string">'data'</span> + ($dataLvl || <span class="hljs-string">''</span>);
  <span class="hljs-keyword">var</span> $errs = <span class="hljs-string">'errs__'</span> + $lvl;
  <span class="hljs-keyword">var</span> $it = it.util.copy(it);
  $it.level++;
  <span class="hljs-keyword">var</span> $nextValid = <span class="hljs-string">'valid'</span> + $it.level;
  <span class="hljs-keyword">if</span> (it.util.schemaHasRules($schema, it.RULES.all)) {
    $it.schema = $schema;
    $it.schemaPath = $schemaPath;
    $it.errSchemaPath = $errSchemaPath;
    out += <span class="hljs-string">' var '</span> + ($errs) + <span class="hljs-string">' = errors;  '</span>;
    <span class="hljs-keyword">var</span> $wasComposite = it.compositeRule;
    it.compositeRule = $it.compositeRule = <span class="hljs-literal">true</span>;
    $it.createErrors = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">var</span> $allErrorsOption;
    <span class="hljs-keyword">if</span> ($it.opts.allErrors) {
      $allErrorsOption = $it.opts.allErrors;
      $it.opts.allErrors = <span class="hljs-literal">false</span>;
    }
    out += <span class="hljs-string">' '</span> + (it.validate($it)) + <span class="hljs-string">' '</span>;
    $it.createErrors = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">if</span> ($allErrorsOption) $it.opts.allErrors = $allErrorsOption;
    it.compositeRule = $it.compositeRule = $wasComposite;
    out += <span class="hljs-string">' if ('</span> + ($nextValid) + <span class="hljs-string">') {   '</span>;
    <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
    $$outStack.push(out);
    out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
    <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
      out += <span class="hljs-string">' { keyword: \''</span> + (<span class="hljs-string">'not'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: {} '</span>;
      <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
        out += <span class="hljs-string">' , message: \'should NOT be valid\' '</span>;
      }
      <span class="hljs-keyword">if</span> (it.opts.verbose) {
        out += <span class="hljs-string">' , schema: validate.schema'</span> + ($schemaPath) + <span class="hljs-string">' , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
      }
      out += <span class="hljs-string">' } '</span>;
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' {} '</span>;
    }
    <span class="hljs-keyword">var</span> __err = out;
    out = $$outStack.pop();
    <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
      <span class="hljs-keyword">if</span> (it.async) {
        out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
      }
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
    }
    out += <span class="hljs-string">' } else {  errors = '</span> + ($errs) + <span class="hljs-string">'; if (vErrors !== null) { if ('</span> + ($errs) + <span class="hljs-string">') vErrors.length = '</span> + ($errs) + <span class="hljs-string">'; else vErrors = null; } '</span>;
    <span class="hljs-keyword">if</span> (it.opts.allErrors) {
      out += <span class="hljs-string">' } '</span>;
    }
  } <span class="hljs-keyword">else</span> {
    out += <span class="hljs-string">'  var err =   '</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
    <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
      out += <span class="hljs-string">' { keyword: \''</span> + (<span class="hljs-string">'not'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: {} '</span>;
      <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
        out += <span class="hljs-string">' , message: \'should NOT be valid\' '</span>;
      }
      <span class="hljs-keyword">if</span> (it.opts.verbose) {
        out += <span class="hljs-string">' , schema: validate.schema'</span> + ($schemaPath) + <span class="hljs-string">' , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
      }
      out += <span class="hljs-string">' } '</span>;
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' {} '</span>;
    }
    out += <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
    <span class="hljs-keyword">if</span> ($breakOnError) {
      out += <span class="hljs-string">' if (false) { '</span>;
    }
  }
  <span class="hljs-keyword">return</span> out;
}

},{}],<span class="hljs-number">28</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generate_oneOf</span>(<span class="hljs-params">it, $keyword</span>) </span>{
  <span class="hljs-keyword">var</span> out = <span class="hljs-string">' '</span>;
  <span class="hljs-keyword">var</span> $lvl = it.level;
  <span class="hljs-keyword">var</span> $dataLvl = it.dataLevel;
  <span class="hljs-keyword">var</span> $schema = it.schema[$keyword];
  <span class="hljs-keyword">var</span> $schemaPath = it.schemaPath + it.util.getProperty($keyword);
  <span class="hljs-keyword">var</span> $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/'</span> + $keyword;
  <span class="hljs-keyword">var</span> $breakOnError = !it.opts.allErrors;
  <span class="hljs-keyword">var</span> $data = <span class="hljs-string">'data'</span> + ($dataLvl || <span class="hljs-string">''</span>);
  <span class="hljs-keyword">var</span> $valid = <span class="hljs-string">'valid'</span> + $lvl;
  <span class="hljs-keyword">var</span> $errs = <span class="hljs-string">'errs__'</span> + $lvl;
  <span class="hljs-keyword">var</span> $it = it.util.copy(it);
  <span class="hljs-keyword">var</span> $closingBraces = <span class="hljs-string">''</span>;
  $it.level++;
  <span class="hljs-keyword">var</span> $nextValid = <span class="hljs-string">'valid'</span> + $it.level;
  out += <span class="hljs-string">'var '</span> + ($errs) + <span class="hljs-string">' = errors;var prevValid'</span> + ($lvl) + <span class="hljs-string">' = false;var '</span> + ($valid) + <span class="hljs-string">' = false;'</span>;
  <span class="hljs-keyword">var</span> $currentBaseId = $it.baseId;
  <span class="hljs-keyword">var</span> $wasComposite = it.compositeRule;
  it.compositeRule = $it.compositeRule = <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">var</span> arr1 = $schema;
  <span class="hljs-keyword">if</span> (arr1) {
    <span class="hljs-keyword">var</span> $sch, $i = <span class="hljs-number">-1</span>,
      l1 = arr1.length - <span class="hljs-number">1</span>;
    <span class="hljs-keyword">while</span> ($i &lt; l1) {
      $sch = arr1[$i += <span class="hljs-number">1</span>];
      <span class="hljs-keyword">if</span> (it.util.schemaHasRules($sch, it.RULES.all)) {
        $it.schema = $sch;
        $it.schemaPath = $schemaPath + <span class="hljs-string">'['</span> + $i + <span class="hljs-string">']'</span>;
        $it.errSchemaPath = $errSchemaPath + <span class="hljs-string">'/'</span> + $i;
        out += <span class="hljs-string">'  '</span> + (it.validate($it)) + <span class="hljs-string">' '</span>;
        $it.baseId = $currentBaseId;
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">' var '</span> + ($nextValid) + <span class="hljs-string">' = true; '</span>;
      }
      <span class="hljs-keyword">if</span> ($i) {
        out += <span class="hljs-string">' if ('</span> + ($nextValid) + <span class="hljs-string">' &amp;&amp; prevValid'</span> + ($lvl) + <span class="hljs-string">') '</span> + ($valid) + <span class="hljs-string">' = false; else { '</span>;
        $closingBraces += <span class="hljs-string">'}'</span>;
      }
      out += <span class="hljs-string">' if ('</span> + ($nextValid) + <span class="hljs-string">') '</span> + ($valid) + <span class="hljs-string">' = prevValid'</span> + ($lvl) + <span class="hljs-string">' = true;'</span>;
    }
  }
  it.compositeRule = $it.compositeRule = $wasComposite;
  out += <span class="hljs-string">''</span> + ($closingBraces) + <span class="hljs-string">'if (!'</span> + ($valid) + <span class="hljs-string">') {   '</span>;
  <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
  $$outStack.push(out);
  out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
  <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
    out += <span class="hljs-string">' { keyword: \''</span> + (<span class="hljs-string">'oneOf'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: {} '</span>;
    <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
      out += <span class="hljs-string">' , message: \'should match exactly one schema in oneOf\' '</span>;
    }
    <span class="hljs-keyword">if</span> (it.opts.verbose) {
      out += <span class="hljs-string">' , schema: validate.schema'</span> + ($schemaPath) + <span class="hljs-string">' , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
    }
    out += <span class="hljs-string">' } '</span>;
  } <span class="hljs-keyword">else</span> {
    out += <span class="hljs-string">' {} '</span>;
  }
  <span class="hljs-keyword">var</span> __err = out;
  out = $$outStack.pop();
  <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
    <span class="hljs-keyword">if</span> (it.async) {
      out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
    }
  } <span class="hljs-keyword">else</span> {
    out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
  }
  out += <span class="hljs-string">'} else {  errors = '</span> + ($errs) + <span class="hljs-string">'; if (vErrors !== null) { if ('</span> + ($errs) + <span class="hljs-string">') vErrors.length = '</span> + ($errs) + <span class="hljs-string">'; else vErrors = null; }'</span>;
  <span class="hljs-keyword">if</span> (it.opts.allErrors) {
    out += <span class="hljs-string">' } '</span>;
  }
  <span class="hljs-keyword">return</span> out;
}

},{}],<span class="hljs-number">29</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generate_pattern</span>(<span class="hljs-params">it, $keyword</span>) </span>{
  <span class="hljs-keyword">var</span> out = <span class="hljs-string">' '</span>;
  <span class="hljs-keyword">var</span> $lvl = it.level;
  <span class="hljs-keyword">var</span> $dataLvl = it.dataLevel;
  <span class="hljs-keyword">var</span> $schema = it.schema[$keyword];
  <span class="hljs-keyword">var</span> $schemaPath = it.schemaPath + it.util.getProperty($keyword);
  <span class="hljs-keyword">var</span> $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/'</span> + $keyword;
  <span class="hljs-keyword">var</span> $breakOnError = !it.opts.allErrors;
  <span class="hljs-keyword">var</span> $data = <span class="hljs-string">'data'</span> + ($dataLvl || <span class="hljs-string">''</span>);
  <span class="hljs-keyword">var</span> $isData = it.opts.v5 &amp;&amp; $schema &amp;&amp; $schema.$data,
    $schemaValue;
  <span class="hljs-keyword">if</span> ($isData) {
    out += <span class="hljs-string">' var schema'</span> + ($lvl) + <span class="hljs-string">' = '</span> + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + <span class="hljs-string">'; '</span>;
    $schemaValue = <span class="hljs-string">'schema'</span> + $lvl;
  } <span class="hljs-keyword">else</span> {
    $schemaValue = $schema;
  }
  <span class="hljs-keyword">var</span> $regexp = $isData ? <span class="hljs-string">'(new RegExp('</span> + $schemaValue + <span class="hljs-string">'))'</span> : it.usePattern($schema);
  out += <span class="hljs-string">'if ( '</span>;
  <span class="hljs-keyword">if</span> ($isData) {
    out += <span class="hljs-string">' ('</span> + ($schemaValue) + <span class="hljs-string">' !== undefined &amp;&amp; typeof '</span> + ($schemaValue) + <span class="hljs-string">' != \'string\') || '</span>;
  }
  out += <span class="hljs-string">' !'</span> + ($regexp) + <span class="hljs-string">'.test('</span> + ($data) + <span class="hljs-string">') ) {   '</span>;
  <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
  $$outStack.push(out);
  out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
  <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
    out += <span class="hljs-string">' { keyword: \''</span> + (<span class="hljs-string">'pattern'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { pattern:  '</span>;
    <span class="hljs-keyword">if</span> ($isData) {
      out += <span class="hljs-string">''</span> + ($schemaValue);
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">''</span> + (it.util.toQuotedString($schema));
    }
    out += <span class="hljs-string">'  } '</span>;
    <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
      out += <span class="hljs-string">' , message: \'should match pattern "'</span>;
      <span class="hljs-keyword">if</span> ($isData) {
        out += <span class="hljs-string">'\' + '</span> + ($schemaValue) + <span class="hljs-string">' + \''</span>;
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">''</span> + (it.util.escapeQuotes($schema));
      }
      out += <span class="hljs-string">'"\' '</span>;
    }
    <span class="hljs-keyword">if</span> (it.opts.verbose) {
      out += <span class="hljs-string">' , schema:  '</span>;
      <span class="hljs-keyword">if</span> ($isData) {
        out += <span class="hljs-string">'validate.schema'</span> + ($schemaPath);
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">''</span> + (it.util.toQuotedString($schema));
      }
      out += <span class="hljs-string">'         , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
    }
    out += <span class="hljs-string">' } '</span>;
  } <span class="hljs-keyword">else</span> {
    out += <span class="hljs-string">' {} '</span>;
  }
  <span class="hljs-keyword">var</span> __err = out;
  out = $$outStack.pop();
  <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
    <span class="hljs-keyword">if</span> (it.async) {
      out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
    }
  } <span class="hljs-keyword">else</span> {
    out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
  }
  out += <span class="hljs-string">'} '</span>;
  <span class="hljs-keyword">if</span> ($breakOnError) {
    out += <span class="hljs-string">' else { '</span>;
  }
  <span class="hljs-keyword">return</span> out;
}

},{}],<span class="hljs-number">30</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generate_patternRequired</span>(<span class="hljs-params">it, $keyword</span>) </span>{
  <span class="hljs-keyword">var</span> out = <span class="hljs-string">' '</span>;
  <span class="hljs-keyword">var</span> $lvl = it.level;
  <span class="hljs-keyword">var</span> $dataLvl = it.dataLevel;
  <span class="hljs-keyword">var</span> $schema = it.schema[$keyword];
  <span class="hljs-keyword">var</span> $schemaPath = it.schemaPath + it.util.getProperty($keyword);
  <span class="hljs-keyword">var</span> $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/'</span> + $keyword;
  <span class="hljs-keyword">var</span> $breakOnError = !it.opts.allErrors;
  <span class="hljs-keyword">var</span> $data = <span class="hljs-string">'data'</span> + ($dataLvl || <span class="hljs-string">''</span>);
  <span class="hljs-keyword">var</span> $valid = <span class="hljs-string">'valid'</span> + $lvl;
  <span class="hljs-keyword">var</span> $key = <span class="hljs-string">'key'</span> + $lvl,
    $matched = <span class="hljs-string">'patternMatched'</span> + $lvl,
    $closingBraces = <span class="hljs-string">''</span>,
    $ownProperties = it.opts.ownProperties;
  out += <span class="hljs-string">'var '</span> + ($valid) + <span class="hljs-string">' = true;'</span>;
  <span class="hljs-keyword">var</span> arr1 = $schema;
  <span class="hljs-keyword">if</span> (arr1) {
    <span class="hljs-keyword">var</span> $pProperty, i1 = <span class="hljs-number">-1</span>,
      l1 = arr1.length - <span class="hljs-number">1</span>;
    <span class="hljs-keyword">while</span> (i1 &lt; l1) {
      $pProperty = arr1[i1 += <span class="hljs-number">1</span>];
      out += <span class="hljs-string">' var '</span> + ($matched) + <span class="hljs-string">' = false; for (var '</span> + ($key) + <span class="hljs-string">' in '</span> + ($data) + <span class="hljs-string">') {  '</span>;
      <span class="hljs-keyword">if</span> ($ownProperties) {
        out += <span class="hljs-string">' if (!Object.prototype.hasOwnProperty.call('</span> + ($data) + <span class="hljs-string">', '</span> + ($key) + <span class="hljs-string">')) continue; '</span>;
      }
      out += <span class="hljs-string">' '</span> + ($matched) + <span class="hljs-string">' = '</span> + (it.usePattern($pProperty)) + <span class="hljs-string">'.test('</span> + ($key) + <span class="hljs-string">'); if ('</span> + ($matched) + <span class="hljs-string">') break; } '</span>;
      <span class="hljs-keyword">var</span> $missingPattern = it.util.escapeQuotes($pProperty);
      out += <span class="hljs-string">' if (!'</span> + ($matched) + <span class="hljs-string">') { '</span> + ($valid) + <span class="hljs-string">' = false;  var err =   '</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
      <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
        out += <span class="hljs-string">' { keyword: \''</span> + (<span class="hljs-string">'patternRequired'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { missingPattern: \''</span> + ($missingPattern) + <span class="hljs-string">'\' } '</span>;
        <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
          out += <span class="hljs-string">' , message: \'should have property matching pattern \\\''</span> + ($missingPattern) + <span class="hljs-string">'\\\'\' '</span>;
        }
        <span class="hljs-keyword">if</span> (it.opts.verbose) {
          out += <span class="hljs-string">' , schema: validate.schema'</span> + ($schemaPath) + <span class="hljs-string">' , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
        }
        out += <span class="hljs-string">' } '</span>;
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">' {} '</span>;
      }
      out += <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; }   '</span>;
      <span class="hljs-keyword">if</span> ($breakOnError) {
        $closingBraces += <span class="hljs-string">'}'</span>;
        out += <span class="hljs-string">' else { '</span>;
      }
    }
  }
  out += <span class="hljs-string">''</span> + ($closingBraces);
  <span class="hljs-keyword">return</span> out;
}

},{}],<span class="hljs-number">31</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generate_properties</span>(<span class="hljs-params">it, $keyword</span>) </span>{
  <span class="hljs-keyword">var</span> out = <span class="hljs-string">' '</span>;
  <span class="hljs-keyword">var</span> $lvl = it.level;
  <span class="hljs-keyword">var</span> $dataLvl = it.dataLevel;
  <span class="hljs-keyword">var</span> $schema = it.schema[$keyword];
  <span class="hljs-keyword">var</span> $schemaPath = it.schemaPath + it.util.getProperty($keyword);
  <span class="hljs-keyword">var</span> $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/'</span> + $keyword;
  <span class="hljs-keyword">var</span> $breakOnError = !it.opts.allErrors;
  <span class="hljs-keyword">var</span> $data = <span class="hljs-string">'data'</span> + ($dataLvl || <span class="hljs-string">''</span>);
  <span class="hljs-keyword">var</span> $valid = <span class="hljs-string">'valid'</span> + $lvl;
  <span class="hljs-keyword">var</span> $errs = <span class="hljs-string">'errs__'</span> + $lvl;
  <span class="hljs-keyword">var</span> $it = it.util.copy(it);
  <span class="hljs-keyword">var</span> $closingBraces = <span class="hljs-string">''</span>;
  $it.level++;
  <span class="hljs-keyword">var</span> $nextValid = <span class="hljs-string">'valid'</span> + $it.level;
  <span class="hljs-keyword">var</span> $key = <span class="hljs-string">'key'</span> + $lvl,
    $dataNxt = $it.dataLevel = it.dataLevel + <span class="hljs-number">1</span>,
    $nextData = <span class="hljs-string">'data'</span> + $dataNxt;
  <span class="hljs-keyword">var</span> $schemaKeys = <span class="hljs-built_in">Object</span>.keys($schema || {}),
    $pProperties = it.schema.patternProperties || {},
    $pPropertyKeys = <span class="hljs-built_in">Object</span>.keys($pProperties),
    $aProperties = it.schema.additionalProperties,
    $someProperties = $schemaKeys.length || $pPropertyKeys.length,
    $noAdditional = $aProperties === <span class="hljs-literal">false</span>,
    $additionalIsSchema = <span class="hljs-keyword">typeof</span> $aProperties == <span class="hljs-string">'object'</span> &amp;&amp; <span class="hljs-built_in">Object</span>.keys($aProperties).length,
    $removeAdditional = it.opts.removeAdditional,
    $checkAdditional = $noAdditional || $additionalIsSchema || $removeAdditional,
    $ownProperties = it.opts.ownProperties,
    $currentBaseId = it.baseId;
  <span class="hljs-keyword">var</span> $required = it.schema.required;
  <span class="hljs-keyword">if</span> ($required &amp;&amp; !(it.opts.v5 &amp;&amp; $required.$data) &amp;&amp; $required.length &lt; it.opts.loopRequired) <span class="hljs-keyword">var</span> $requiredHash = it.util.toHash($required);
  <span class="hljs-keyword">if</span> (it.opts.v5) {
    <span class="hljs-keyword">var</span> $pgProperties = it.schema.patternGroups || {},
      $pgPropertyKeys = <span class="hljs-built_in">Object</span>.keys($pgProperties);
  }
  out += <span class="hljs-string">'var '</span> + ($errs) + <span class="hljs-string">' = errors;var '</span> + ($nextValid) + <span class="hljs-string">' = true;'</span>;
  <span class="hljs-keyword">if</span> ($checkAdditional) {
    out += <span class="hljs-string">' for (var '</span> + ($key) + <span class="hljs-string">' in '</span> + ($data) + <span class="hljs-string">') {  '</span>;
    <span class="hljs-keyword">if</span> ($ownProperties) {
      out += <span class="hljs-string">' if (!Object.prototype.hasOwnProperty.call('</span> + ($data) + <span class="hljs-string">', '</span> + ($key) + <span class="hljs-string">')) continue; '</span>;
    }
    <span class="hljs-keyword">if</span> ($someProperties) {
      out += <span class="hljs-string">' var isAdditional'</span> + ($lvl) + <span class="hljs-string">' = !(false '</span>;
      <span class="hljs-keyword">if</span> ($schemaKeys.length) {
        <span class="hljs-keyword">if</span> ($schemaKeys.length &gt; <span class="hljs-number">5</span>) {
          out += <span class="hljs-string">' || validate.schema'</span> + ($schemaPath) + <span class="hljs-string">'['</span> + ($key) + <span class="hljs-string">'] '</span>;
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">var</span> arr1 = $schemaKeys;
          <span class="hljs-keyword">if</span> (arr1) {
            <span class="hljs-keyword">var</span> $propertyKey, i1 = <span class="hljs-number">-1</span>,
              l1 = arr1.length - <span class="hljs-number">1</span>;
            <span class="hljs-keyword">while</span> (i1 &lt; l1) {
              $propertyKey = arr1[i1 += <span class="hljs-number">1</span>];
              out += <span class="hljs-string">' || '</span> + ($key) + <span class="hljs-string">' == '</span> + (it.util.toQuotedString($propertyKey)) + <span class="hljs-string">' '</span>;
            }
          }
        }
      }
      <span class="hljs-keyword">if</span> ($pPropertyKeys.length) {
        <span class="hljs-keyword">var</span> arr2 = $pPropertyKeys;
        <span class="hljs-keyword">if</span> (arr2) {
          <span class="hljs-keyword">var</span> $pProperty, $i = <span class="hljs-number">-1</span>,
            l2 = arr2.length - <span class="hljs-number">1</span>;
          <span class="hljs-keyword">while</span> ($i &lt; l2) {
            $pProperty = arr2[$i += <span class="hljs-number">1</span>];
            out += <span class="hljs-string">' || '</span> + (it.usePattern($pProperty)) + <span class="hljs-string">'.test('</span> + ($key) + <span class="hljs-string">') '</span>;
          }
        }
      }
      <span class="hljs-keyword">if</span> (it.opts.v5 &amp;&amp; $pgPropertyKeys &amp;&amp; $pgPropertyKeys.length) {
        <span class="hljs-keyword">var</span> arr3 = $pgPropertyKeys;
        <span class="hljs-keyword">if</span> (arr3) {
          <span class="hljs-keyword">var</span> $pgProperty, $i = <span class="hljs-number">-1</span>,
            l3 = arr3.length - <span class="hljs-number">1</span>;
          <span class="hljs-keyword">while</span> ($i &lt; l3) {
            $pgProperty = arr3[$i += <span class="hljs-number">1</span>];
            out += <span class="hljs-string">' || '</span> + (it.usePattern($pgProperty)) + <span class="hljs-string">'.test('</span> + ($key) + <span class="hljs-string">') '</span>;
          }
        }
      }
      out += <span class="hljs-string">' ); if (isAdditional'</span> + ($lvl) + <span class="hljs-string">') { '</span>;
    }
    <span class="hljs-keyword">if</span> ($removeAdditional == <span class="hljs-string">'all'</span>) {
      out += <span class="hljs-string">' delete '</span> + ($data) + <span class="hljs-string">'['</span> + ($key) + <span class="hljs-string">']; '</span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">var</span> $currentErrorPath = it.errorPath;
      <span class="hljs-keyword">var</span> $additionalProperty = <span class="hljs-string">'\' + '</span> + $key + <span class="hljs-string">' + \''</span>;
      <span class="hljs-keyword">if</span> (it.opts._errorDataPathProperty) {
        it.errorPath = it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);
      }
      <span class="hljs-keyword">if</span> ($noAdditional) {
        <span class="hljs-keyword">if</span> ($removeAdditional) {
          out += <span class="hljs-string">' delete '</span> + ($data) + <span class="hljs-string">'['</span> + ($key) + <span class="hljs-string">']; '</span>;
        } <span class="hljs-keyword">else</span> {
          out += <span class="hljs-string">' '</span> + ($nextValid) + <span class="hljs-string">' = false; '</span>;
          <span class="hljs-keyword">var</span> $currErrSchemaPath = $errSchemaPath;
          $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/additionalProperties'</span>;
          <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
          $$outStack.push(out);
          out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
          <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
            out += <span class="hljs-string">' { keyword: \''</span> + (<span class="hljs-string">'additionalProperties'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { additionalProperty: \''</span> + ($additionalProperty) + <span class="hljs-string">'\' } '</span>;
            <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
              out += <span class="hljs-string">' , message: \'should NOT have additional properties\' '</span>;
            }
            <span class="hljs-keyword">if</span> (it.opts.verbose) {
              out += <span class="hljs-string">' , schema: false , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
            }
            out += <span class="hljs-string">' } '</span>;
          } <span class="hljs-keyword">else</span> {
            out += <span class="hljs-string">' {} '</span>;
          }
          <span class="hljs-keyword">var</span> __err = out;
          out = $$outStack.pop();
          <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
            <span class="hljs-keyword">if</span> (it.async) {
              out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
            } <span class="hljs-keyword">else</span> {
              out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
            }
          } <span class="hljs-keyword">else</span> {
            out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
          }
          $errSchemaPath = $currErrSchemaPath;
          <span class="hljs-keyword">if</span> ($breakOnError) {
            out += <span class="hljs-string">' break; '</span>;
          }
        }
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ($additionalIsSchema) {
        <span class="hljs-keyword">if</span> ($removeAdditional == <span class="hljs-string">'failing'</span>) {
          out += <span class="hljs-string">' var '</span> + ($errs) + <span class="hljs-string">' = errors;  '</span>;
          <span class="hljs-keyword">var</span> $wasComposite = it.compositeRule;
          it.compositeRule = $it.compositeRule = <span class="hljs-literal">true</span>;
          $it.schema = $aProperties;
          $it.schemaPath = it.schemaPath + <span class="hljs-string">'.additionalProperties'</span>;
          $it.errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/additionalProperties'</span>;
          $it.errorPath = it.opts._errorDataPathProperty ? it.errorPath : it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);
          <span class="hljs-keyword">var</span> $passData = $data + <span class="hljs-string">'['</span> + $key + <span class="hljs-string">']'</span>;
          $it.dataPathArr[$dataNxt] = $key;
          <span class="hljs-keyword">var</span> $code = it.validate($it);
          $it.baseId = $currentBaseId;
          <span class="hljs-keyword">if</span> (it.util.varOccurences($code, $nextData) &lt; <span class="hljs-number">2</span>) {
            out += <span class="hljs-string">' '</span> + (it.util.varReplace($code, $nextData, $passData)) + <span class="hljs-string">' '</span>;
          } <span class="hljs-keyword">else</span> {
            out += <span class="hljs-string">' var '</span> + ($nextData) + <span class="hljs-string">' = '</span> + ($passData) + <span class="hljs-string">'; '</span> + ($code) + <span class="hljs-string">' '</span>;
          }
          out += <span class="hljs-string">' if (!'</span> + ($nextValid) + <span class="hljs-string">') { errors = '</span> + ($errs) + <span class="hljs-string">'; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete '</span> + ($data) + <span class="hljs-string">'['</span> + ($key) + <span class="hljs-string">']; }  '</span>;
          it.compositeRule = $it.compositeRule = $wasComposite;
        } <span class="hljs-keyword">else</span> {
          $it.schema = $aProperties;
          $it.schemaPath = it.schemaPath + <span class="hljs-string">'.additionalProperties'</span>;
          $it.errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/additionalProperties'</span>;
          $it.errorPath = it.opts._errorDataPathProperty ? it.errorPath : it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);
          <span class="hljs-keyword">var</span> $passData = $data + <span class="hljs-string">'['</span> + $key + <span class="hljs-string">']'</span>;
          $it.dataPathArr[$dataNxt] = $key;
          <span class="hljs-keyword">var</span> $code = it.validate($it);
          $it.baseId = $currentBaseId;
          <span class="hljs-keyword">if</span> (it.util.varOccurences($code, $nextData) &lt; <span class="hljs-number">2</span>) {
            out += <span class="hljs-string">' '</span> + (it.util.varReplace($code, $nextData, $passData)) + <span class="hljs-string">' '</span>;
          } <span class="hljs-keyword">else</span> {
            out += <span class="hljs-string">' var '</span> + ($nextData) + <span class="hljs-string">' = '</span> + ($passData) + <span class="hljs-string">'; '</span> + ($code) + <span class="hljs-string">' '</span>;
          }
          <span class="hljs-keyword">if</span> ($breakOnError) {
            out += <span class="hljs-string">' if (!'</span> + ($nextValid) + <span class="hljs-string">') break; '</span>;
          }
        }
      }
      it.errorPath = $currentErrorPath;
    }
    <span class="hljs-keyword">if</span> ($someProperties) {
      out += <span class="hljs-string">' } '</span>;
    }
    out += <span class="hljs-string">' }  '</span>;
    <span class="hljs-keyword">if</span> ($breakOnError) {
      out += <span class="hljs-string">' if ('</span> + ($nextValid) + <span class="hljs-string">') { '</span>;
      $closingBraces += <span class="hljs-string">'}'</span>;
    }
  }
  <span class="hljs-keyword">var</span> $useDefaults = it.opts.useDefaults &amp;&amp; !it.compositeRule;
  <span class="hljs-keyword">if</span> ($schemaKeys.length) {
    <span class="hljs-keyword">var</span> arr4 = $schemaKeys;
    <span class="hljs-keyword">if</span> (arr4) {
      <span class="hljs-keyword">var</span> $propertyKey, i4 = <span class="hljs-number">-1</span>,
        l4 = arr4.length - <span class="hljs-number">1</span>;
      <span class="hljs-keyword">while</span> (i4 &lt; l4) {
        $propertyKey = arr4[i4 += <span class="hljs-number">1</span>];
        <span class="hljs-keyword">var</span> $sch = $schema[$propertyKey];
        <span class="hljs-keyword">if</span> (it.util.schemaHasRules($sch, it.RULES.all)) {
          <span class="hljs-keyword">var</span> $prop = it.util.getProperty($propertyKey),
            $passData = $data + $prop,
            $hasDefault = $useDefaults &amp;&amp; $sch.default !== <span class="hljs-literal">undefined</span>;
          $it.schema = $sch;
          $it.schemaPath = $schemaPath + $prop;
          $it.errSchemaPath = $errSchemaPath + <span class="hljs-string">'/'</span> + it.util.escapeFragment($propertyKey);
          $it.errorPath = it.util.getPath(it.errorPath, $propertyKey, it.opts.jsonPointers);
          $it.dataPathArr[$dataNxt] = it.util.toQuotedString($propertyKey);
          <span class="hljs-keyword">var</span> $code = it.validate($it);
          $it.baseId = $currentBaseId;
          <span class="hljs-keyword">if</span> (it.util.varOccurences($code, $nextData) &lt; <span class="hljs-number">2</span>) {
            $code = it.util.varReplace($code, $nextData, $passData);
            <span class="hljs-keyword">var</span> $useData = $passData;
          } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">var</span> $useData = $nextData;
            out += <span class="hljs-string">' var '</span> + ($nextData) + <span class="hljs-string">' = '</span> + ($passData) + <span class="hljs-string">'; '</span>;
          }
          <span class="hljs-keyword">if</span> ($hasDefault) {
            out += <span class="hljs-string">' '</span> + ($code) + <span class="hljs-string">' '</span>;
          } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> ($requiredHash &amp;&amp; $requiredHash[$propertyKey]) {
              out += <span class="hljs-string">' if ('</span> + ($useData) + <span class="hljs-string">' === undefined) { '</span> + ($nextValid) + <span class="hljs-string">' = false; '</span>;
              <span class="hljs-keyword">var</span> $currentErrorPath = it.errorPath,
                $currErrSchemaPath = $errSchemaPath,
                $missingProperty = it.util.escapeQuotes($propertyKey);
              <span class="hljs-keyword">if</span> (it.opts._errorDataPathProperty) {
                it.errorPath = it.util.getPath($currentErrorPath, $propertyKey, it.opts.jsonPointers);
              }
              $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/required'</span>;
              <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
              $$outStack.push(out);
              out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
              <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
                out += <span class="hljs-string">' { keyword: \''</span> + (<span class="hljs-string">'required'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { missingProperty: \''</span> + ($missingProperty) + <span class="hljs-string">'\' } '</span>;
                <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
                  out += <span class="hljs-string">' , message: \''</span>;
                  <span class="hljs-keyword">if</span> (it.opts._errorDataPathProperty) {
                    out += <span class="hljs-string">'is a required property'</span>;
                  } <span class="hljs-keyword">else</span> {
                    out += <span class="hljs-string">'should have required property \\\''</span> + ($missingProperty) + <span class="hljs-string">'\\\''</span>;
                  }
                  out += <span class="hljs-string">'\' '</span>;
                }
                <span class="hljs-keyword">if</span> (it.opts.verbose) {
                  out += <span class="hljs-string">' , schema: validate.schema'</span> + ($schemaPath) + <span class="hljs-string">' , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
                }
                out += <span class="hljs-string">' } '</span>;
              } <span class="hljs-keyword">else</span> {
                out += <span class="hljs-string">' {} '</span>;
              }
              <span class="hljs-keyword">var</span> __err = out;
              out = $$outStack.pop();
              <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
                <span class="hljs-keyword">if</span> (it.async) {
                  out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
                } <span class="hljs-keyword">else</span> {
                  out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
                }
              } <span class="hljs-keyword">else</span> {
                out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
              }
              $errSchemaPath = $currErrSchemaPath;
              it.errorPath = $currentErrorPath;
              out += <span class="hljs-string">' } else { '</span>;
            } <span class="hljs-keyword">else</span> {
              <span class="hljs-keyword">if</span> ($breakOnError) {
                out += <span class="hljs-string">' if ('</span> + ($useData) + <span class="hljs-string">' === undefined) { '</span> + ($nextValid) + <span class="hljs-string">' = true; } else { '</span>;
              } <span class="hljs-keyword">else</span> {
                out += <span class="hljs-string">' if ('</span> + ($useData) + <span class="hljs-string">' !== undefined) { '</span>;
              }
            }
            out += <span class="hljs-string">' '</span> + ($code) + <span class="hljs-string">' } '</span>;
          }
        }
        <span class="hljs-keyword">if</span> ($breakOnError) {
          out += <span class="hljs-string">' if ('</span> + ($nextValid) + <span class="hljs-string">') { '</span>;
          $closingBraces += <span class="hljs-string">'}'</span>;
        }
      }
    }
  }
  <span class="hljs-keyword">var</span> arr5 = $pPropertyKeys;
  <span class="hljs-keyword">if</span> (arr5) {
    <span class="hljs-keyword">var</span> $pProperty, i5 = <span class="hljs-number">-1</span>,
      l5 = arr5.length - <span class="hljs-number">1</span>;
    <span class="hljs-keyword">while</span> (i5 &lt; l5) {
      $pProperty = arr5[i5 += <span class="hljs-number">1</span>];
      <span class="hljs-keyword">var</span> $sch = $pProperties[$pProperty];
      <span class="hljs-keyword">if</span> (it.util.schemaHasRules($sch, it.RULES.all)) {
        $it.schema = $sch;
        $it.schemaPath = it.schemaPath + <span class="hljs-string">'.patternProperties'</span> + it.util.getProperty($pProperty);
        $it.errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/patternProperties/'</span> + it.util.escapeFragment($pProperty);
        out += <span class="hljs-string">' for (var '</span> + ($key) + <span class="hljs-string">' in '</span> + ($data) + <span class="hljs-string">') {  '</span>;
        <span class="hljs-keyword">if</span> ($ownProperties) {
          out += <span class="hljs-string">' if (!Object.prototype.hasOwnProperty.call('</span> + ($data) + <span class="hljs-string">', '</span> + ($key) + <span class="hljs-string">')) continue; '</span>;
        }
        out += <span class="hljs-string">' if ('</span> + (it.usePattern($pProperty)) + <span class="hljs-string">'.test('</span> + ($key) + <span class="hljs-string">')) { '</span>;
        $it.errorPath = it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);
        <span class="hljs-keyword">var</span> $passData = $data + <span class="hljs-string">'['</span> + $key + <span class="hljs-string">']'</span>;
        $it.dataPathArr[$dataNxt] = $key;
        <span class="hljs-keyword">var</span> $code = it.validate($it);
        $it.baseId = $currentBaseId;
        <span class="hljs-keyword">if</span> (it.util.varOccurences($code, $nextData) &lt; <span class="hljs-number">2</span>) {
          out += <span class="hljs-string">' '</span> + (it.util.varReplace($code, $nextData, $passData)) + <span class="hljs-string">' '</span>;
        } <span class="hljs-keyword">else</span> {
          out += <span class="hljs-string">' var '</span> + ($nextData) + <span class="hljs-string">' = '</span> + ($passData) + <span class="hljs-string">'; '</span> + ($code) + <span class="hljs-string">' '</span>;
        }
        <span class="hljs-keyword">if</span> ($breakOnError) {
          out += <span class="hljs-string">' if (!'</span> + ($nextValid) + <span class="hljs-string">') break; '</span>;
        }
        out += <span class="hljs-string">' } '</span>;
        <span class="hljs-keyword">if</span> ($breakOnError) {
          out += <span class="hljs-string">' else '</span> + ($nextValid) + <span class="hljs-string">' = true; '</span>;
        }
        out += <span class="hljs-string">' }  '</span>;
        <span class="hljs-keyword">if</span> ($breakOnError) {
          out += <span class="hljs-string">' if ('</span> + ($nextValid) + <span class="hljs-string">') { '</span>;
          $closingBraces += <span class="hljs-string">'}'</span>;
        }
      }
    }
  }
  <span class="hljs-keyword">if</span> (it.opts.v5) {
    <span class="hljs-keyword">var</span> arr6 = $pgPropertyKeys;
    <span class="hljs-keyword">if</span> (arr6) {
      <span class="hljs-keyword">var</span> $pgProperty, i6 = <span class="hljs-number">-1</span>,
        l6 = arr6.length - <span class="hljs-number">1</span>;
      <span class="hljs-keyword">while</span> (i6 &lt; l6) {
        $pgProperty = arr6[i6 += <span class="hljs-number">1</span>];
        <span class="hljs-keyword">var</span> $pgSchema = $pgProperties[$pgProperty],
          $sch = $pgSchema.schema;
        <span class="hljs-keyword">if</span> (it.util.schemaHasRules($sch, it.RULES.all)) {
          $it.schema = $sch;
          $it.schemaPath = it.schemaPath + <span class="hljs-string">'.patternGroups'</span> + it.util.getProperty($pgProperty) + <span class="hljs-string">'.schema'</span>;
          $it.errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/patternGroups/'</span> + it.util.escapeFragment($pgProperty) + <span class="hljs-string">'/schema'</span>;
          out += <span class="hljs-string">' var pgPropCount'</span> + ($lvl) + <span class="hljs-string">' = 0; for (var '</span> + ($key) + <span class="hljs-string">' in '</span> + ($data) + <span class="hljs-string">') {  '</span>;
          <span class="hljs-keyword">if</span> ($ownProperties) {
            out += <span class="hljs-string">' if (!Object.prototype.hasOwnProperty.call('</span> + ($data) + <span class="hljs-string">', '</span> + ($key) + <span class="hljs-string">')) continue; '</span>;
          }
          out += <span class="hljs-string">' if ('</span> + (it.usePattern($pgProperty)) + <span class="hljs-string">'.test('</span> + ($key) + <span class="hljs-string">')) { pgPropCount'</span> + ($lvl) + <span class="hljs-string">'++; '</span>;
          $it.errorPath = it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);
          <span class="hljs-keyword">var</span> $passData = $data + <span class="hljs-string">'['</span> + $key + <span class="hljs-string">']'</span>;
          $it.dataPathArr[$dataNxt] = $key;
          <span class="hljs-keyword">var</span> $code = it.validate($it);
          $it.baseId = $currentBaseId;
          <span class="hljs-keyword">if</span> (it.util.varOccurences($code, $nextData) &lt; <span class="hljs-number">2</span>) {
            out += <span class="hljs-string">' '</span> + (it.util.varReplace($code, $nextData, $passData)) + <span class="hljs-string">' '</span>;
          } <span class="hljs-keyword">else</span> {
            out += <span class="hljs-string">' var '</span> + ($nextData) + <span class="hljs-string">' = '</span> + ($passData) + <span class="hljs-string">'; '</span> + ($code) + <span class="hljs-string">' '</span>;
          }
          <span class="hljs-keyword">if</span> ($breakOnError) {
            out += <span class="hljs-string">' if (!'</span> + ($nextValid) + <span class="hljs-string">') break; '</span>;
          }
          out += <span class="hljs-string">' } '</span>;
          <span class="hljs-keyword">if</span> ($breakOnError) {
            out += <span class="hljs-string">' else '</span> + ($nextValid) + <span class="hljs-string">' = true; '</span>;
          }
          out += <span class="hljs-string">' }  '</span>;
          <span class="hljs-keyword">if</span> ($breakOnError) {
            out += <span class="hljs-string">' if ('</span> + ($nextValid) + <span class="hljs-string">') { '</span>;
            $closingBraces += <span class="hljs-string">'}'</span>;
          }
          <span class="hljs-keyword">var</span> $pgMin = $pgSchema.minimum,
            $pgMax = $pgSchema.maximum;
          <span class="hljs-keyword">if</span> ($pgMin !== <span class="hljs-literal">undefined</span> || $pgMax !== <span class="hljs-literal">undefined</span>) {
            out += <span class="hljs-string">' var '</span> + ($valid) + <span class="hljs-string">' = true; '</span>;
            <span class="hljs-keyword">var</span> $currErrSchemaPath = $errSchemaPath;
            <span class="hljs-keyword">if</span> ($pgMin !== <span class="hljs-literal">undefined</span>) {
              <span class="hljs-keyword">var</span> $limit = $pgMin,
                $reason = <span class="hljs-string">'minimum'</span>,
                $moreOrLess = <span class="hljs-string">'less'</span>;
              out += <span class="hljs-string">' '</span> + ($valid) + <span class="hljs-string">' = pgPropCount'</span> + ($lvl) + <span class="hljs-string">' &gt;= '</span> + ($pgMin) + <span class="hljs-string">'; '</span>;
              $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/patternGroups/minimum'</span>;
              out += <span class="hljs-string">'  if (!'</span> + ($valid) + <span class="hljs-string">') {   '</span>;
              <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
              $$outStack.push(out);
              out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
              <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
                out += <span class="hljs-string">' { keyword: \''</span> + (<span class="hljs-string">'patternGroups'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { reason: \''</span> + ($reason) + <span class="hljs-string">'\', limit: '</span> + ($limit) + <span class="hljs-string">', pattern: \''</span> + (it.util.escapeQuotes($pgProperty)) + <span class="hljs-string">'\' } '</span>;
                <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
                  out += <span class="hljs-string">' , message: \'should NOT have '</span> + ($moreOrLess) + <span class="hljs-string">' than '</span> + ($limit) + <span class="hljs-string">' properties matching pattern "'</span> + (it.util.escapeQuotes($pgProperty)) + <span class="hljs-string">'"\' '</span>;
                }
                <span class="hljs-keyword">if</span> (it.opts.verbose) {
                  out += <span class="hljs-string">' , schema: validate.schema'</span> + ($schemaPath) + <span class="hljs-string">' , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
                }
                out += <span class="hljs-string">' } '</span>;
              } <span class="hljs-keyword">else</span> {
                out += <span class="hljs-string">' {} '</span>;
              }
              <span class="hljs-keyword">var</span> __err = out;
              out = $$outStack.pop();
              <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
                <span class="hljs-keyword">if</span> (it.async) {
                  out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
                } <span class="hljs-keyword">else</span> {
                  out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
                }
              } <span class="hljs-keyword">else</span> {
                out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
              }
              out += <span class="hljs-string">' } '</span>;
              <span class="hljs-keyword">if</span> ($pgMax !== <span class="hljs-literal">undefined</span>) {
                out += <span class="hljs-string">' else '</span>;
              }
            }
            <span class="hljs-keyword">if</span> ($pgMax !== <span class="hljs-literal">undefined</span>) {
              <span class="hljs-keyword">var</span> $limit = $pgMax,
                $reason = <span class="hljs-string">'maximum'</span>,
                $moreOrLess = <span class="hljs-string">'more'</span>;
              out += <span class="hljs-string">' '</span> + ($valid) + <span class="hljs-string">' = pgPropCount'</span> + ($lvl) + <span class="hljs-string">' &lt;= '</span> + ($pgMax) + <span class="hljs-string">'; '</span>;
              $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/patternGroups/maximum'</span>;
              out += <span class="hljs-string">'  if (!'</span> + ($valid) + <span class="hljs-string">') {   '</span>;
              <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
              $$outStack.push(out);
              out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
              <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
                out += <span class="hljs-string">' { keyword: \''</span> + (<span class="hljs-string">'patternGroups'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { reason: \''</span> + ($reason) + <span class="hljs-string">'\', limit: '</span> + ($limit) + <span class="hljs-string">', pattern: \''</span> + (it.util.escapeQuotes($pgProperty)) + <span class="hljs-string">'\' } '</span>;
                <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
                  out += <span class="hljs-string">' , message: \'should NOT have '</span> + ($moreOrLess) + <span class="hljs-string">' than '</span> + ($limit) + <span class="hljs-string">' properties matching pattern "'</span> + (it.util.escapeQuotes($pgProperty)) + <span class="hljs-string">'"\' '</span>;
                }
                <span class="hljs-keyword">if</span> (it.opts.verbose) {
                  out += <span class="hljs-string">' , schema: validate.schema'</span> + ($schemaPath) + <span class="hljs-string">' , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
                }
                out += <span class="hljs-string">' } '</span>;
              } <span class="hljs-keyword">else</span> {
                out += <span class="hljs-string">' {} '</span>;
              }
              <span class="hljs-keyword">var</span> __err = out;
              out = $$outStack.pop();
              <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
                <span class="hljs-keyword">if</span> (it.async) {
                  out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
                } <span class="hljs-keyword">else</span> {
                  out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
                }
              } <span class="hljs-keyword">else</span> {
                out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
              }
              out += <span class="hljs-string">' } '</span>;
            }
            $errSchemaPath = $currErrSchemaPath;
            <span class="hljs-keyword">if</span> ($breakOnError) {
              out += <span class="hljs-string">' if ('</span> + ($valid) + <span class="hljs-string">') { '</span>;
              $closingBraces += <span class="hljs-string">'}'</span>;
            }
          }
        }
      }
    }
  }
  <span class="hljs-keyword">if</span> ($breakOnError) {
    out += <span class="hljs-string">' '</span> + ($closingBraces) + <span class="hljs-string">' if ('</span> + ($errs) + <span class="hljs-string">' == errors) {'</span>;
  }
  out = it.util.cleanUpCode(out);
  <span class="hljs-keyword">return</span> out;
}

},{}],<span class="hljs-number">32</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generate_ref</span>(<span class="hljs-params">it, $keyword</span>) </span>{
  <span class="hljs-keyword">var</span> out = <span class="hljs-string">' '</span>;
  <span class="hljs-keyword">var</span> $lvl = it.level;
  <span class="hljs-keyword">var</span> $dataLvl = it.dataLevel;
  <span class="hljs-keyword">var</span> $schema = it.schema[$keyword];
  <span class="hljs-keyword">var</span> $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/'</span> + $keyword;
  <span class="hljs-keyword">var</span> $breakOnError = !it.opts.allErrors;
  <span class="hljs-keyword">var</span> $data = <span class="hljs-string">'data'</span> + ($dataLvl || <span class="hljs-string">''</span>);
  <span class="hljs-keyword">var</span> $valid = <span class="hljs-string">'valid'</span> + $lvl;
  <span class="hljs-keyword">var</span> $<span class="hljs-keyword">async</span>, $refCode;
  <span class="hljs-keyword">if</span> ($schema == <span class="hljs-string">'#'</span> || $schema == <span class="hljs-string">'#/'</span>) {
    <span class="hljs-keyword">if</span> (it.isRoot) {
      $<span class="hljs-keyword">async</span> = it.async;
      $refCode = <span class="hljs-string">'validate'</span>;
    } <span class="hljs-keyword">else</span> {
      $<span class="hljs-keyword">async</span> = it.root.schema.$<span class="hljs-keyword">async</span> === <span class="hljs-literal">true</span>;
      $refCode = <span class="hljs-string">'root.refVal[0]'</span>;
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">var</span> $refVal = it.resolveRef(it.baseId, $schema, it.isRoot);
    <span class="hljs-keyword">if</span> ($refVal === <span class="hljs-literal">undefined</span>) {
      <span class="hljs-keyword">var</span> $message = <span class="hljs-string">'can\'t resolve reference '</span> + $schema + <span class="hljs-string">' from id '</span> + it.baseId;
      <span class="hljs-keyword">if</span> (it.opts.missingRefs == <span class="hljs-string">'fail'</span>) {
        <span class="hljs-built_in">console</span>.log($message);
        <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
        $$outStack.push(out);
        out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
        <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
          out += <span class="hljs-string">' { keyword: \''</span> + (<span class="hljs-string">'$ref'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { ref: \''</span> + (it.util.escapeQuotes($schema)) + <span class="hljs-string">'\' } '</span>;
          <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
            out += <span class="hljs-string">' , message: \'can\\\'t resolve reference '</span> + (it.util.escapeQuotes($schema)) + <span class="hljs-string">'\' '</span>;
          }
          <span class="hljs-keyword">if</span> (it.opts.verbose) {
            out += <span class="hljs-string">' , schema: '</span> + (it.util.toQuotedString($schema)) + <span class="hljs-string">' , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
          }
          out += <span class="hljs-string">' } '</span>;
        } <span class="hljs-keyword">else</span> {
          out += <span class="hljs-string">' {} '</span>;
        }
        <span class="hljs-keyword">var</span> __err = out;
        out = $$outStack.pop();
        <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
          <span class="hljs-keyword">if</span> (it.async) {
            out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
          } <span class="hljs-keyword">else</span> {
            out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
          }
        } <span class="hljs-keyword">else</span> {
          out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
        }
        <span class="hljs-keyword">if</span> ($breakOnError) {
          out += <span class="hljs-string">' if (false) { '</span>;
        }
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (it.opts.missingRefs == <span class="hljs-string">'ignore'</span>) {
        <span class="hljs-built_in">console</span>.log($message);
        <span class="hljs-keyword">if</span> ($breakOnError) {
          out += <span class="hljs-string">' if (true) { '</span>;
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">var</span> $error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>($message);
        $error.missingRef = it.resolve.url(it.baseId, $schema);
        $error.missingSchema = it.resolve.normalizeId(it.resolve.fullPath($error.missingRef));
        <span class="hljs-keyword">throw</span> $error;
      }
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ($refVal.inline) {
      <span class="hljs-keyword">var</span> $it = it.util.copy(it);
      $it.level++;
      <span class="hljs-keyword">var</span> $nextValid = <span class="hljs-string">'valid'</span> + $it.level;
      $it.schema = $refVal.schema;
      $it.schemaPath = <span class="hljs-string">''</span>;
      $it.errSchemaPath = $schema;
      <span class="hljs-keyword">var</span> $code = it.validate($it).replace(<span class="hljs-regexp">/validate\.schema/g</span>, $refVal.code);
      out += <span class="hljs-string">' '</span> + ($code) + <span class="hljs-string">' '</span>;
      <span class="hljs-keyword">if</span> ($breakOnError) {
        out += <span class="hljs-string">' if ('</span> + ($nextValid) + <span class="hljs-string">') { '</span>;
      }
    } <span class="hljs-keyword">else</span> {
      $<span class="hljs-keyword">async</span> = $refVal.$<span class="hljs-keyword">async</span> === <span class="hljs-literal">true</span>;
      $refCode = $refVal.code;
    }
  }
  <span class="hljs-keyword">if</span> ($refCode) {
    <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
    $$outStack.push(out);
    out = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">if</span> (it.opts.passContext) {
      out += <span class="hljs-string">' '</span> + ($refCode) + <span class="hljs-string">'.call(this, '</span>;
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' '</span> + ($refCode) + <span class="hljs-string">'( '</span>;
    }
    out += <span class="hljs-string">' '</span> + ($data) + <span class="hljs-string">', (dataPath || \'\')'</span>;
    <span class="hljs-keyword">if</span> (it.errorPath != <span class="hljs-string">'""'</span>) {
      out += <span class="hljs-string">' + '</span> + (it.errorPath);
    }
    <span class="hljs-keyword">var</span> $parentData = $dataLvl ? <span class="hljs-string">'data'</span> + (($dataLvl - <span class="hljs-number">1</span>) || <span class="hljs-string">''</span>) : <span class="hljs-string">'parentData'</span>,
      $parentDataProperty = $dataLvl ? it.dataPathArr[$dataLvl] : <span class="hljs-string">'parentDataProperty'</span>;
    out += <span class="hljs-string">' , '</span> + ($parentData) + <span class="hljs-string">' , '</span> + ($parentDataProperty) + <span class="hljs-string">', rootData)  '</span>;
    <span class="hljs-keyword">var</span> __callValidate = out;
    out = $$outStack.pop();
    <span class="hljs-keyword">if</span> ($<span class="hljs-keyword">async</span>) {
      <span class="hljs-keyword">if</span> (!it.async) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'async schema referenced by sync schema'</span>);
      out += <span class="hljs-string">' try { '</span>;
      <span class="hljs-keyword">if</span> ($breakOnError) {
        out += <span class="hljs-string">'var '</span> + ($valid) + <span class="hljs-string">' ='</span>;
      }
      out += <span class="hljs-string">' '</span> + (it.yieldAwait) + <span class="hljs-string">' '</span> + (__callValidate) + <span class="hljs-string">'; } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; } '</span>;
      <span class="hljs-keyword">if</span> ($breakOnError) {
        out += <span class="hljs-string">' if ('</span> + ($valid) + <span class="hljs-string">') { '</span>;
      }
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' if (!'</span> + (__callValidate) + <span class="hljs-string">') { if (vErrors === null) vErrors = '</span> + ($refCode) + <span class="hljs-string">'.errors; else vErrors = vErrors.concat('</span> + ($refCode) + <span class="hljs-string">'.errors); errors = vErrors.length; } '</span>;
      <span class="hljs-keyword">if</span> ($breakOnError) {
        out += <span class="hljs-string">' else { '</span>;
      }
    }
  }
  <span class="hljs-keyword">return</span> out;
}

},{}],<span class="hljs-number">33</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generate_required</span>(<span class="hljs-params">it, $keyword</span>) </span>{
  <span class="hljs-keyword">var</span> out = <span class="hljs-string">' '</span>;
  <span class="hljs-keyword">var</span> $lvl = it.level;
  <span class="hljs-keyword">var</span> $dataLvl = it.dataLevel;
  <span class="hljs-keyword">var</span> $schema = it.schema[$keyword];
  <span class="hljs-keyword">var</span> $schemaPath = it.schemaPath + it.util.getProperty($keyword);
  <span class="hljs-keyword">var</span> $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/'</span> + $keyword;
  <span class="hljs-keyword">var</span> $breakOnError = !it.opts.allErrors;
  <span class="hljs-keyword">var</span> $data = <span class="hljs-string">'data'</span> + ($dataLvl || <span class="hljs-string">''</span>);
  <span class="hljs-keyword">var</span> $valid = <span class="hljs-string">'valid'</span> + $lvl;
  <span class="hljs-keyword">var</span> $isData = it.opts.v5 &amp;&amp; $schema &amp;&amp; $schema.$data,
    $schemaValue;
  <span class="hljs-keyword">if</span> ($isData) {
    out += <span class="hljs-string">' var schema'</span> + ($lvl) + <span class="hljs-string">' = '</span> + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + <span class="hljs-string">'; '</span>;
    $schemaValue = <span class="hljs-string">'schema'</span> + $lvl;
  } <span class="hljs-keyword">else</span> {
    $schemaValue = $schema;
  }
  <span class="hljs-keyword">var</span> $vSchema = <span class="hljs-string">'schema'</span> + $lvl;
  <span class="hljs-keyword">if</span> (!$isData) {
    <span class="hljs-keyword">if</span> ($schema.length &lt; it.opts.loopRequired &amp;&amp; it.schema.properties &amp;&amp; <span class="hljs-built_in">Object</span>.keys(it.schema.properties).length) {
      <span class="hljs-keyword">var</span> $required = [];
      <span class="hljs-keyword">var</span> arr1 = $schema;
      <span class="hljs-keyword">if</span> (arr1) {
        <span class="hljs-keyword">var</span> $property, i1 = <span class="hljs-number">-1</span>,
          l1 = arr1.length - <span class="hljs-number">1</span>;
        <span class="hljs-keyword">while</span> (i1 &lt; l1) {
          $property = arr1[i1 += <span class="hljs-number">1</span>];
          <span class="hljs-keyword">var</span> $propertySch = it.schema.properties[$property];
          <span class="hljs-keyword">if</span> (!($propertySch &amp;&amp; it.util.schemaHasRules($propertySch, it.RULES.all))) {
            $required[$required.length] = $property;
          }
        }
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">var</span> $required = $schema;
    }
  }
  <span class="hljs-keyword">if</span> ($isData || $required.length) {
    <span class="hljs-keyword">var</span> $currentErrorPath = it.errorPath,
      $loopRequired = $isData || $required.length &gt;= it.opts.loopRequired;
    <span class="hljs-keyword">if</span> ($breakOnError) {
      out += <span class="hljs-string">' var missing'</span> + ($lvl) + <span class="hljs-string">'; '</span>;
      <span class="hljs-keyword">if</span> ($loopRequired) {
        <span class="hljs-keyword">if</span> (!$isData) {
          out += <span class="hljs-string">' var '</span> + ($vSchema) + <span class="hljs-string">' = validate.schema'</span> + ($schemaPath) + <span class="hljs-string">'; '</span>;
        }
        <span class="hljs-keyword">var</span> $i = <span class="hljs-string">'i'</span> + $lvl,
          $propertyPath = <span class="hljs-string">'schema'</span> + $lvl + <span class="hljs-string">'['</span> + $i + <span class="hljs-string">']'</span>,
          $missingProperty = <span class="hljs-string">'\' + '</span> + $propertyPath + <span class="hljs-string">' + \''</span>;
        <span class="hljs-keyword">if</span> (it.opts._errorDataPathProperty) {
          it.errorPath = it.util.getPathExpr($currentErrorPath, $propertyPath, it.opts.jsonPointers);
        }
        out += <span class="hljs-string">' var '</span> + ($valid) + <span class="hljs-string">' = true; '</span>;
        <span class="hljs-keyword">if</span> ($isData) {
          out += <span class="hljs-string">' if (schema'</span> + ($lvl) + <span class="hljs-string">' === undefined) '</span> + ($valid) + <span class="hljs-string">' = true; else if (!Array.isArray(schema'</span> + ($lvl) + <span class="hljs-string">')) '</span> + ($valid) + <span class="hljs-string">' = false; else {'</span>;
        }
        out += <span class="hljs-string">' for (var '</span> + ($i) + <span class="hljs-string">' = 0; '</span> + ($i) + <span class="hljs-string">' &lt; '</span> + ($vSchema) + <span class="hljs-string">'.length; '</span> + ($i) + <span class="hljs-string">'++) { '</span> + ($valid) + <span class="hljs-string">' = '</span> + ($data) + <span class="hljs-string">'['</span> + ($vSchema) + <span class="hljs-string">'['</span> + ($i) + <span class="hljs-string">']] !== undefined; if (!'</span> + ($valid) + <span class="hljs-string">') break; } '</span>;
        <span class="hljs-keyword">if</span> ($isData) {
          out += <span class="hljs-string">'  }  '</span>;
        }
        out += <span class="hljs-string">'  if (!'</span> + ($valid) + <span class="hljs-string">') {   '</span>;
        <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
        $$outStack.push(out);
        out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
        <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
          out += <span class="hljs-string">' { keyword: \''</span> + (<span class="hljs-string">'required'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { missingProperty: \''</span> + ($missingProperty) + <span class="hljs-string">'\' } '</span>;
          <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
            out += <span class="hljs-string">' , message: \''</span>;
            <span class="hljs-keyword">if</span> (it.opts._errorDataPathProperty) {
              out += <span class="hljs-string">'is a required property'</span>;
            } <span class="hljs-keyword">else</span> {
              out += <span class="hljs-string">'should have required property \\\''</span> + ($missingProperty) + <span class="hljs-string">'\\\''</span>;
            }
            out += <span class="hljs-string">'\' '</span>;
          }
          <span class="hljs-keyword">if</span> (it.opts.verbose) {
            out += <span class="hljs-string">' , schema: validate.schema'</span> + ($schemaPath) + <span class="hljs-string">' , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
          }
          out += <span class="hljs-string">' } '</span>;
        } <span class="hljs-keyword">else</span> {
          out += <span class="hljs-string">' {} '</span>;
        }
        <span class="hljs-keyword">var</span> __err = out;
        out = $$outStack.pop();
        <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
          <span class="hljs-keyword">if</span> (it.async) {
            out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
          } <span class="hljs-keyword">else</span> {
            out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
          }
        } <span class="hljs-keyword">else</span> {
          out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
        }
        out += <span class="hljs-string">' } else { '</span>;
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">' if ( '</span>;
        <span class="hljs-keyword">var</span> arr2 = $required;
        <span class="hljs-keyword">if</span> (arr2) {
          <span class="hljs-keyword">var</span> _$property, $i = <span class="hljs-number">-1</span>,
            l2 = arr2.length - <span class="hljs-number">1</span>;
          <span class="hljs-keyword">while</span> ($i &lt; l2) {
            _$property = arr2[$i += <span class="hljs-number">1</span>];
            <span class="hljs-keyword">if</span> ($i) {
              out += <span class="hljs-string">' || '</span>;
            }
            <span class="hljs-keyword">var</span> $prop = it.util.getProperty(_$property);
            out += <span class="hljs-string">' ( '</span> + ($data) + ($prop) + <span class="hljs-string">' === undefined &amp;&amp; (missing'</span> + ($lvl) + <span class="hljs-string">' = '</span> + (it.util.toQuotedString(it.opts.jsonPointers ? _$property : $prop)) + <span class="hljs-string">') ) '</span>;
          }
        }
        out += <span class="hljs-string">') {  '</span>;
        <span class="hljs-keyword">var</span> $propertyPath = <span class="hljs-string">'missing'</span> + $lvl,
          $missingProperty = <span class="hljs-string">'\' + '</span> + $propertyPath + <span class="hljs-string">' + \''</span>;
        <span class="hljs-keyword">if</span> (it.opts._errorDataPathProperty) {
          it.errorPath = it.opts.jsonPointers ? it.util.getPathExpr($currentErrorPath, $propertyPath, <span class="hljs-literal">true</span>) : $currentErrorPath + <span class="hljs-string">' + '</span> + $propertyPath;
        }
        <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
        $$outStack.push(out);
        out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
        <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
          out += <span class="hljs-string">' { keyword: \''</span> + (<span class="hljs-string">'required'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { missingProperty: \''</span> + ($missingProperty) + <span class="hljs-string">'\' } '</span>;
          <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
            out += <span class="hljs-string">' , message: \''</span>;
            <span class="hljs-keyword">if</span> (it.opts._errorDataPathProperty) {
              out += <span class="hljs-string">'is a required property'</span>;
            } <span class="hljs-keyword">else</span> {
              out += <span class="hljs-string">'should have required property \\\''</span> + ($missingProperty) + <span class="hljs-string">'\\\''</span>;
            }
            out += <span class="hljs-string">'\' '</span>;
          }
          <span class="hljs-keyword">if</span> (it.opts.verbose) {
            out += <span class="hljs-string">' , schema: validate.schema'</span> + ($schemaPath) + <span class="hljs-string">' , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
          }
          out += <span class="hljs-string">' } '</span>;
        } <span class="hljs-keyword">else</span> {
          out += <span class="hljs-string">' {} '</span>;
        }
        <span class="hljs-keyword">var</span> __err = out;
        out = $$outStack.pop();
        <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
          <span class="hljs-keyword">if</span> (it.async) {
            out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
          } <span class="hljs-keyword">else</span> {
            out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
          }
        } <span class="hljs-keyword">else</span> {
          out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
        }
        out += <span class="hljs-string">' } else { '</span>;
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">if</span> ($loopRequired) {
        <span class="hljs-keyword">if</span> (!$isData) {
          out += <span class="hljs-string">' var '</span> + ($vSchema) + <span class="hljs-string">' = validate.schema'</span> + ($schemaPath) + <span class="hljs-string">'; '</span>;
        }
        <span class="hljs-keyword">var</span> $i = <span class="hljs-string">'i'</span> + $lvl,
          $propertyPath = <span class="hljs-string">'schema'</span> + $lvl + <span class="hljs-string">'['</span> + $i + <span class="hljs-string">']'</span>,
          $missingProperty = <span class="hljs-string">'\' + '</span> + $propertyPath + <span class="hljs-string">' + \''</span>;
        <span class="hljs-keyword">if</span> (it.opts._errorDataPathProperty) {
          it.errorPath = it.util.getPathExpr($currentErrorPath, $propertyPath, it.opts.jsonPointers);
        }
        <span class="hljs-keyword">if</span> ($isData) {
          out += <span class="hljs-string">' if ('</span> + ($vSchema) + <span class="hljs-string">' &amp;&amp; !Array.isArray('</span> + ($vSchema) + <span class="hljs-string">')) {  var err =   '</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
          <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
            out += <span class="hljs-string">' { keyword: \''</span> + (<span class="hljs-string">'required'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { missingProperty: \''</span> + ($missingProperty) + <span class="hljs-string">'\' } '</span>;
            <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
              out += <span class="hljs-string">' , message: \''</span>;
              <span class="hljs-keyword">if</span> (it.opts._errorDataPathProperty) {
                out += <span class="hljs-string">'is a required property'</span>;
              } <span class="hljs-keyword">else</span> {
                out += <span class="hljs-string">'should have required property \\\''</span> + ($missingProperty) + <span class="hljs-string">'\\\''</span>;
              }
              out += <span class="hljs-string">'\' '</span>;
            }
            <span class="hljs-keyword">if</span> (it.opts.verbose) {
              out += <span class="hljs-string">' , schema: validate.schema'</span> + ($schemaPath) + <span class="hljs-string">' , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
            }
            out += <span class="hljs-string">' } '</span>;
          } <span class="hljs-keyword">else</span> {
            out += <span class="hljs-string">' {} '</span>;
          }
          out += <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ('</span> + ($vSchema) + <span class="hljs-string">' !== undefined) { '</span>;
        }
        out += <span class="hljs-string">' for (var '</span> + ($i) + <span class="hljs-string">' = 0; '</span> + ($i) + <span class="hljs-string">' &lt; '</span> + ($vSchema) + <span class="hljs-string">'.length; '</span> + ($i) + <span class="hljs-string">'++) { if ('</span> + ($data) + <span class="hljs-string">'['</span> + ($vSchema) + <span class="hljs-string">'['</span> + ($i) + <span class="hljs-string">']] === undefined) {  var err =   '</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
        <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
          out += <span class="hljs-string">' { keyword: \''</span> + (<span class="hljs-string">'required'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { missingProperty: \''</span> + ($missingProperty) + <span class="hljs-string">'\' } '</span>;
          <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
            out += <span class="hljs-string">' , message: \''</span>;
            <span class="hljs-keyword">if</span> (it.opts._errorDataPathProperty) {
              out += <span class="hljs-string">'is a required property'</span>;
            } <span class="hljs-keyword">else</span> {
              out += <span class="hljs-string">'should have required property \\\''</span> + ($missingProperty) + <span class="hljs-string">'\\\''</span>;
            }
            out += <span class="hljs-string">'\' '</span>;
          }
          <span class="hljs-keyword">if</span> (it.opts.verbose) {
            out += <span class="hljs-string">' , schema: validate.schema'</span> + ($schemaPath) + <span class="hljs-string">' , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
          }
          out += <span class="hljs-string">' } '</span>;
        } <span class="hljs-keyword">else</span> {
          out += <span class="hljs-string">' {} '</span>;
        }
        out += <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } '</span>;
        <span class="hljs-keyword">if</span> ($isData) {
          out += <span class="hljs-string">'  }  '</span>;
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">var</span> arr3 = $required;
        <span class="hljs-keyword">if</span> (arr3) {
          <span class="hljs-keyword">var</span> $reqProperty, i3 = <span class="hljs-number">-1</span>,
            l3 = arr3.length - <span class="hljs-number">1</span>;
          <span class="hljs-keyword">while</span> (i3 &lt; l3) {
            $reqProperty = arr3[i3 += <span class="hljs-number">1</span>];
            <span class="hljs-keyword">var</span> $prop = it.util.getProperty($reqProperty),
              $missingProperty = it.util.escapeQuotes($reqProperty);
            <span class="hljs-keyword">if</span> (it.opts._errorDataPathProperty) {
              it.errorPath = it.util.getPath($currentErrorPath, $reqProperty, it.opts.jsonPointers);
            }
            out += <span class="hljs-string">' if ('</span> + ($data) + ($prop) + <span class="hljs-string">' === undefined) {  var err =   '</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
            <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
              out += <span class="hljs-string">' { keyword: \''</span> + (<span class="hljs-string">'required'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { missingProperty: \''</span> + ($missingProperty) + <span class="hljs-string">'\' } '</span>;
              <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
                out += <span class="hljs-string">' , message: \''</span>;
                <span class="hljs-keyword">if</span> (it.opts._errorDataPathProperty) {
                  out += <span class="hljs-string">'is a required property'</span>;
                } <span class="hljs-keyword">else</span> {
                  out += <span class="hljs-string">'should have required property \\\''</span> + ($missingProperty) + <span class="hljs-string">'\\\''</span>;
                }
                out += <span class="hljs-string">'\' '</span>;
              }
              <span class="hljs-keyword">if</span> (it.opts.verbose) {
                out += <span class="hljs-string">' , schema: validate.schema'</span> + ($schemaPath) + <span class="hljs-string">' , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
              }
              out += <span class="hljs-string">' } '</span>;
            } <span class="hljs-keyword">else</span> {
              out += <span class="hljs-string">' {} '</span>;
            }
            out += <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } '</span>;
          }
        }
      }
    }
    it.errorPath = $currentErrorPath;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ($breakOnError) {
    out += <span class="hljs-string">' if (true) {'</span>;
  }
  <span class="hljs-keyword">return</span> out;
}

},{}],<span class="hljs-number">34</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generate_switch</span>(<span class="hljs-params">it, $keyword</span>) </span>{
  <span class="hljs-keyword">var</span> out = <span class="hljs-string">' '</span>;
  <span class="hljs-keyword">var</span> $lvl = it.level;
  <span class="hljs-keyword">var</span> $dataLvl = it.dataLevel;
  <span class="hljs-keyword">var</span> $schema = it.schema[$keyword];
  <span class="hljs-keyword">var</span> $schemaPath = it.schemaPath + it.util.getProperty($keyword);
  <span class="hljs-keyword">var</span> $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/'</span> + $keyword;
  <span class="hljs-keyword">var</span> $breakOnError = !it.opts.allErrors;
  <span class="hljs-keyword">var</span> $data = <span class="hljs-string">'data'</span> + ($dataLvl || <span class="hljs-string">''</span>);
  <span class="hljs-keyword">var</span> $valid = <span class="hljs-string">'valid'</span> + $lvl;
  <span class="hljs-keyword">var</span> $errs = <span class="hljs-string">'errs__'</span> + $lvl;
  <span class="hljs-keyword">var</span> $it = it.util.copy(it);
  <span class="hljs-keyword">var</span> $closingBraces = <span class="hljs-string">''</span>;
  $it.level++;
  <span class="hljs-keyword">var</span> $nextValid = <span class="hljs-string">'valid'</span> + $it.level;
  <span class="hljs-keyword">var</span> $ifPassed = <span class="hljs-string">'ifPassed'</span> + it.level,
    $currentBaseId = $it.baseId,
    $shouldContinue;
  out += <span class="hljs-string">'var '</span> + ($ifPassed) + <span class="hljs-string">';'</span>;
  <span class="hljs-keyword">var</span> arr1 = $schema;
  <span class="hljs-keyword">if</span> (arr1) {
    <span class="hljs-keyword">var</span> $sch, $caseIndex = <span class="hljs-number">-1</span>,
      l1 = arr1.length - <span class="hljs-number">1</span>;
    <span class="hljs-keyword">while</span> ($caseIndex &lt; l1) {
      $sch = arr1[$caseIndex += <span class="hljs-number">1</span>];
      <span class="hljs-keyword">if</span> ($caseIndex &amp;&amp; !$shouldContinue) {
        out += <span class="hljs-string">' if (!'</span> + ($ifPassed) + <span class="hljs-string">') { '</span>;
        $closingBraces += <span class="hljs-string">'}'</span>;
      }
      <span class="hljs-keyword">if</span> ($sch.if &amp;&amp; it.util.schemaHasRules($sch.if, it.RULES.all)) {
        out += <span class="hljs-string">' var '</span> + ($errs) + <span class="hljs-string">' = errors;   '</span>;
        <span class="hljs-keyword">var</span> $wasComposite = it.compositeRule;
        it.compositeRule = $it.compositeRule = <span class="hljs-literal">true</span>;
        $it.createErrors = <span class="hljs-literal">false</span>;
        $it.schema = $sch.if;
        $it.schemaPath = $schemaPath + <span class="hljs-string">'['</span> + $caseIndex + <span class="hljs-string">'].if'</span>;
        $it.errSchemaPath = $errSchemaPath + <span class="hljs-string">'/'</span> + $caseIndex + <span class="hljs-string">'/if'</span>;
        out += <span class="hljs-string">'  '</span> + (it.validate($it)) + <span class="hljs-string">' '</span>;
        $it.baseId = $currentBaseId;
        $it.createErrors = <span class="hljs-literal">true</span>;
        it.compositeRule = $it.compositeRule = $wasComposite;
        out += <span class="hljs-string">' '</span> + ($ifPassed) + <span class="hljs-string">' = '</span> + ($nextValid) + <span class="hljs-string">'; if ('</span> + ($ifPassed) + <span class="hljs-string">') {  '</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> $sch.then == <span class="hljs-string">'boolean'</span>) {
          <span class="hljs-keyword">if</span> ($sch.then === <span class="hljs-literal">false</span>) {
            <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
            $$outStack.push(out);
            out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
            <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
              out += <span class="hljs-string">' { keyword: \''</span> + (<span class="hljs-string">'switch'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { caseIndex: '</span> + ($caseIndex) + <span class="hljs-string">' } '</span>;
              <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
                out += <span class="hljs-string">' , message: \'should pass "switch" keyword validation\' '</span>;
              }
              <span class="hljs-keyword">if</span> (it.opts.verbose) {
                out += <span class="hljs-string">' , schema: validate.schema'</span> + ($schemaPath) + <span class="hljs-string">' , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
              }
              out += <span class="hljs-string">' } '</span>;
            } <span class="hljs-keyword">else</span> {
              out += <span class="hljs-string">' {} '</span>;
            }
            <span class="hljs-keyword">var</span> __err = out;
            out = $$outStack.pop();
            <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
              <span class="hljs-keyword">if</span> (it.async) {
                out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
              } <span class="hljs-keyword">else</span> {
                out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
              }
            } <span class="hljs-keyword">else</span> {
              out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
            }
          }
          out += <span class="hljs-string">' var '</span> + ($nextValid) + <span class="hljs-string">' = '</span> + ($sch.then) + <span class="hljs-string">'; '</span>;
        } <span class="hljs-keyword">else</span> {
          $it.schema = $sch.then;
          $it.schemaPath = $schemaPath + <span class="hljs-string">'['</span> + $caseIndex + <span class="hljs-string">'].then'</span>;
          $it.errSchemaPath = $errSchemaPath + <span class="hljs-string">'/'</span> + $caseIndex + <span class="hljs-string">'/then'</span>;
          out += <span class="hljs-string">'  '</span> + (it.validate($it)) + <span class="hljs-string">' '</span>;
          $it.baseId = $currentBaseId;
        }
        out += <span class="hljs-string">'  } else {  errors = '</span> + ($errs) + <span class="hljs-string">'; if (vErrors !== null) { if ('</span> + ($errs) + <span class="hljs-string">') vErrors.length = '</span> + ($errs) + <span class="hljs-string">'; else vErrors = null; } } '</span>;
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">' '</span> + ($ifPassed) + <span class="hljs-string">' = true;  '</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> $sch.then == <span class="hljs-string">'boolean'</span>) {
          <span class="hljs-keyword">if</span> ($sch.then === <span class="hljs-literal">false</span>) {
            <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
            $$outStack.push(out);
            out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
            <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
              out += <span class="hljs-string">' { keyword: \''</span> + (<span class="hljs-string">'switch'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { caseIndex: '</span> + ($caseIndex) + <span class="hljs-string">' } '</span>;
              <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
                out += <span class="hljs-string">' , message: \'should pass "switch" keyword validation\' '</span>;
              }
              <span class="hljs-keyword">if</span> (it.opts.verbose) {
                out += <span class="hljs-string">' , schema: validate.schema'</span> + ($schemaPath) + <span class="hljs-string">' , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
              }
              out += <span class="hljs-string">' } '</span>;
            } <span class="hljs-keyword">else</span> {
              out += <span class="hljs-string">' {} '</span>;
            }
            <span class="hljs-keyword">var</span> __err = out;
            out = $$outStack.pop();
            <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
              <span class="hljs-keyword">if</span> (it.async) {
                out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
              } <span class="hljs-keyword">else</span> {
                out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
              }
            } <span class="hljs-keyword">else</span> {
              out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
            }
          }
          out += <span class="hljs-string">' var '</span> + ($nextValid) + <span class="hljs-string">' = '</span> + ($sch.then) + <span class="hljs-string">'; '</span>;
        } <span class="hljs-keyword">else</span> {
          $it.schema = $sch.then;
          $it.schemaPath = $schemaPath + <span class="hljs-string">'['</span> + $caseIndex + <span class="hljs-string">'].then'</span>;
          $it.errSchemaPath = $errSchemaPath + <span class="hljs-string">'/'</span> + $caseIndex + <span class="hljs-string">'/then'</span>;
          out += <span class="hljs-string">'  '</span> + (it.validate($it)) + <span class="hljs-string">' '</span>;
          $it.baseId = $currentBaseId;
        }
      }
      $shouldContinue = $sch.continue
    }
  }
  out += <span class="hljs-string">''</span> + ($closingBraces) + <span class="hljs-string">'var '</span> + ($valid) + <span class="hljs-string">' = '</span> + ($nextValid) + <span class="hljs-string">'; '</span>;
  out = it.util.cleanUpCode(out);
  <span class="hljs-keyword">return</span> out;
}

},{}],<span class="hljs-number">35</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generate_uniqueItems</span>(<span class="hljs-params">it, $keyword</span>) </span>{
  <span class="hljs-keyword">var</span> out = <span class="hljs-string">' '</span>;
  <span class="hljs-keyword">var</span> $lvl = it.level;
  <span class="hljs-keyword">var</span> $dataLvl = it.dataLevel;
  <span class="hljs-keyword">var</span> $schema = it.schema[$keyword];
  <span class="hljs-keyword">var</span> $schemaPath = it.schemaPath + it.util.getProperty($keyword);
  <span class="hljs-keyword">var</span> $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/'</span> + $keyword;
  <span class="hljs-keyword">var</span> $breakOnError = !it.opts.allErrors;
  <span class="hljs-keyword">var</span> $data = <span class="hljs-string">'data'</span> + ($dataLvl || <span class="hljs-string">''</span>);
  <span class="hljs-keyword">var</span> $valid = <span class="hljs-string">'valid'</span> + $lvl;
  <span class="hljs-keyword">var</span> $isData = it.opts.v5 &amp;&amp; $schema &amp;&amp; $schema.$data,
    $schemaValue;
  <span class="hljs-keyword">if</span> ($isData) {
    out += <span class="hljs-string">' var schema'</span> + ($lvl) + <span class="hljs-string">' = '</span> + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + <span class="hljs-string">'; '</span>;
    $schemaValue = <span class="hljs-string">'schema'</span> + $lvl;
  } <span class="hljs-keyword">else</span> {
    $schemaValue = $schema;
  }
  <span class="hljs-keyword">if</span> (($schema || $isData) &amp;&amp; it.opts.uniqueItems !== <span class="hljs-literal">false</span>) {
    <span class="hljs-keyword">if</span> ($isData) {
      out += <span class="hljs-string">' var '</span> + ($valid) + <span class="hljs-string">'; if ('</span> + ($schemaValue) + <span class="hljs-string">' === false || '</span> + ($schemaValue) + <span class="hljs-string">' === undefined) '</span> + ($valid) + <span class="hljs-string">' = true; else if (typeof '</span> + ($schemaValue) + <span class="hljs-string">' != \'boolean\') '</span> + ($valid) + <span class="hljs-string">' = false; else { '</span>;
    }
    out += <span class="hljs-string">' var '</span> + ($valid) + <span class="hljs-string">' = true; if ('</span> + ($data) + <span class="hljs-string">'.length &gt; 1) { var i = '</span> + ($data) + <span class="hljs-string">'.length, j; outer: for (;i--;) { for (j = i; j--;) { if (equal('</span> + ($data) + <span class="hljs-string">'[i], '</span> + ($data) + <span class="hljs-string">'[j])) { '</span> + ($valid) + <span class="hljs-string">' = false; break outer; } } } } '</span>;
    <span class="hljs-keyword">if</span> ($isData) {
      out += <span class="hljs-string">'  }  '</span>;
    }
    out += <span class="hljs-string">' if (!'</span> + ($valid) + <span class="hljs-string">') {   '</span>;
    <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
    $$outStack.push(out);
    out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
    <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
      out += <span class="hljs-string">' { keyword: \''</span> + (<span class="hljs-string">'uniqueItems'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { i: i, j: j } '</span>;
      <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
        out += <span class="hljs-string">' , message: \'should NOT have duplicate items (items ## \' + j + \' and \' + i + \' are identical)\' '</span>;
      }
      <span class="hljs-keyword">if</span> (it.opts.verbose) {
        out += <span class="hljs-string">' , schema:  '</span>;
        <span class="hljs-keyword">if</span> ($isData) {
          out += <span class="hljs-string">'validate.schema'</span> + ($schemaPath);
        } <span class="hljs-keyword">else</span> {
          out += <span class="hljs-string">''</span> + ($schema);
        }
        out += <span class="hljs-string">'         , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
      }
      out += <span class="hljs-string">' } '</span>;
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' {} '</span>;
    }
    <span class="hljs-keyword">var</span> __err = out;
    out = $$outStack.pop();
    <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
      <span class="hljs-keyword">if</span> (it.async) {
        out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
      }
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
    }
    out += <span class="hljs-string">' } '</span>;
    <span class="hljs-keyword">if</span> ($breakOnError) {
      out += <span class="hljs-string">' else { '</span>;
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">if</span> ($breakOnError) {
      out += <span class="hljs-string">' if (true) { '</span>;
    }
  }
  <span class="hljs-keyword">return</span> out;
}

},{}],<span class="hljs-number">36</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generate_validate</span>(<span class="hljs-params">it, $keyword</span>) </span>{
  <span class="hljs-keyword">var</span> out = <span class="hljs-string">''</span>;
  <span class="hljs-keyword">var</span> $<span class="hljs-keyword">async</span> = it.schema.$<span class="hljs-keyword">async</span> === <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">if</span> (it.isTop) {
    <span class="hljs-keyword">var</span> $top = it.isTop,
      $lvl = it.level = <span class="hljs-number">0</span>,
      $dataLvl = it.dataLevel = <span class="hljs-number">0</span>,
      $data = <span class="hljs-string">'data'</span>;
    it.rootId = it.resolve.fullPath(it.root.schema.id);
    it.baseId = it.baseId || it.rootId;
    <span class="hljs-keyword">if</span> ($<span class="hljs-keyword">async</span>) {
      it.async = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">var</span> $es7 = it.opts.async == <span class="hljs-string">'es7'</span>;
      it.yieldAwait = $es7 ? <span class="hljs-string">'await'</span> : <span class="hljs-string">'yield'</span>;
    }
    <span class="hljs-keyword">delete</span> it.isTop;
    it.dataPathArr = [<span class="hljs-literal">undefined</span>];
    out += <span class="hljs-string">' var validate = '</span>;
    <span class="hljs-keyword">if</span> ($<span class="hljs-keyword">async</span>) {
      <span class="hljs-keyword">if</span> ($es7) {
        out += <span class="hljs-string">' (async function '</span>;
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">if</span> (it.opts.async == <span class="hljs-string">'co*'</span>) {
          out += <span class="hljs-string">'co.wrap'</span>;
        }
        out += <span class="hljs-string">'(function* '</span>;
      }
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' (function '</span>;
    }
    out += <span class="hljs-string">' (data, dataPath, parentData, parentDataProperty, rootData) { \'use strict\'; var vErrors = null; '</span>;
    out += <span class="hljs-string">' var errors = 0;     '</span>;
    out += <span class="hljs-string">' if (rootData === undefined) rootData = data;'</span>;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">var</span> $lvl = it.level,
      $dataLvl = it.dataLevel,
      $data = <span class="hljs-string">'data'</span> + ($dataLvl || <span class="hljs-string">''</span>);
    <span class="hljs-keyword">if</span> (it.schema.id) it.baseId = it.resolve.url(it.baseId, it.schema.id);
    <span class="hljs-keyword">if</span> ($<span class="hljs-keyword">async</span> &amp;&amp; !it.async) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'async schema in sync schema'</span>);
    out += <span class="hljs-string">' var errs_'</span> + ($lvl) + <span class="hljs-string">' = errors;'</span>;
  }
  <span class="hljs-keyword">var</span> $valid = <span class="hljs-string">'valid'</span> + $lvl,
    $breakOnError = !it.opts.allErrors,
    $closingBraces1 = <span class="hljs-string">''</span>,
    $closingBraces2 = <span class="hljs-string">''</span>;
  <span class="hljs-keyword">var</span> $typeSchema = it.schema.type,
    $typeIsArray = <span class="hljs-built_in">Array</span>.isArray($typeSchema);
  <span class="hljs-keyword">if</span> ($typeSchema &amp;&amp; it.opts.coerceTypes) {
    <span class="hljs-keyword">var</span> $coerceToTypes = it.util.coerceToTypes(it.opts.coerceTypes, $typeSchema);
    <span class="hljs-keyword">if</span> ($coerceToTypes) {
      <span class="hljs-keyword">var</span> $schemaPath = it.schemaPath + <span class="hljs-string">'.type'</span>,
        $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/type'</span>,
        $method = $typeIsArray ? <span class="hljs-string">'checkDataTypes'</span> : <span class="hljs-string">'checkDataType'</span>;
      out += <span class="hljs-string">' if ('</span> + (it.util[$method]($typeSchema, $data, <span class="hljs-literal">true</span>)) + <span class="hljs-string">') {  '</span>;
      <span class="hljs-keyword">var</span> $dataType = <span class="hljs-string">'dataType'</span> + $lvl,
        $coerced = <span class="hljs-string">'coerced'</span> + $lvl;
      out += <span class="hljs-string">' var '</span> + ($dataType) + <span class="hljs-string">' = typeof '</span> + ($data) + <span class="hljs-string">'; '</span>;
      <span class="hljs-keyword">if</span> (it.opts.coerceTypes == <span class="hljs-string">'array'</span>) {
        out += <span class="hljs-string">' if ('</span> + ($dataType) + <span class="hljs-string">' == \'object\' &amp;&amp; Array.isArray('</span> + ($data) + <span class="hljs-string">')) '</span> + ($dataType) + <span class="hljs-string">' = \'array\'; '</span>;
      }
      out += <span class="hljs-string">' var '</span> + ($coerced) + <span class="hljs-string">' = undefined; '</span>;
      <span class="hljs-keyword">var</span> $bracesCoercion = <span class="hljs-string">''</span>;
      <span class="hljs-keyword">var</span> arr1 = $coerceToTypes;
      <span class="hljs-keyword">if</span> (arr1) {
        <span class="hljs-keyword">var</span> $type, $i = <span class="hljs-number">-1</span>,
          l1 = arr1.length - <span class="hljs-number">1</span>;
        <span class="hljs-keyword">while</span> ($i &lt; l1) {
          $type = arr1[$i += <span class="hljs-number">1</span>];
          <span class="hljs-keyword">if</span> ($i) {
            out += <span class="hljs-string">' if ('</span> + ($coerced) + <span class="hljs-string">' === undefined) { '</span>;
            $bracesCoercion += <span class="hljs-string">'}'</span>;
          }
          <span class="hljs-keyword">if</span> (it.opts.coerceTypes == <span class="hljs-string">'array'</span> &amp;&amp; $type != <span class="hljs-string">'array'</span>) {
            out += <span class="hljs-string">' if ('</span> + ($dataType) + <span class="hljs-string">' == \'array\' &amp;&amp; '</span> + ($data) + <span class="hljs-string">'.length == 1) { '</span> + ($coerced) + <span class="hljs-string">' = '</span> + ($data) + <span class="hljs-string">' = '</span> + ($data) + <span class="hljs-string">'[0]; '</span> + ($dataType) + <span class="hljs-string">' = typeof '</span> + ($data) + <span class="hljs-string">';  } '</span>;
          }
          <span class="hljs-keyword">if</span> ($type == <span class="hljs-string">'string'</span>) {
            out += <span class="hljs-string">' if ('</span> + ($dataType) + <span class="hljs-string">' == \'number\' || '</span> + ($dataType) + <span class="hljs-string">' == \'boolean\') '</span> + ($coerced) + <span class="hljs-string">' = \'\' + '</span> + ($data) + <span class="hljs-string">'; else if ('</span> + ($data) + <span class="hljs-string">' === null) '</span> + ($coerced) + <span class="hljs-string">' = \'\'; '</span>;
          } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ($type == <span class="hljs-string">'number'</span> || $type == <span class="hljs-string">'integer'</span>) {
            out += <span class="hljs-string">' if ('</span> + ($dataType) + <span class="hljs-string">' == \'boolean\' || '</span> + ($data) + <span class="hljs-string">' === null || ('</span> + ($dataType) + <span class="hljs-string">' == \'string\' &amp;&amp; '</span> + ($data) + <span class="hljs-string">' &amp;&amp; '</span> + ($data) + <span class="hljs-string">' == +'</span> + ($data) + <span class="hljs-string">' '</span>;
            <span class="hljs-keyword">if</span> ($type == <span class="hljs-string">'integer'</span>) {
              out += <span class="hljs-string">' &amp;&amp; !('</span> + ($data) + <span class="hljs-string">' % 1)'</span>;
            }
            out += <span class="hljs-string">')) '</span> + ($coerced) + <span class="hljs-string">' = +'</span> + ($data) + <span class="hljs-string">'; '</span>;
          } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ($type == <span class="hljs-string">'boolean'</span>) {
            out += <span class="hljs-string">' if ('</span> + ($data) + <span class="hljs-string">' === \'false\' || '</span> + ($data) + <span class="hljs-string">' === 0 || '</span> + ($data) + <span class="hljs-string">' === null) '</span> + ($coerced) + <span class="hljs-string">' = false; else if ('</span> + ($data) + <span class="hljs-string">' === \'true\' || '</span> + ($data) + <span class="hljs-string">' === 1) '</span> + ($coerced) + <span class="hljs-string">' = true; '</span>;
          } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ($type == <span class="hljs-string">'null'</span>) {
            out += <span class="hljs-string">' if ('</span> + ($data) + <span class="hljs-string">' === \'\' || '</span> + ($data) + <span class="hljs-string">' === 0 || '</span> + ($data) + <span class="hljs-string">' === false) '</span> + ($coerced) + <span class="hljs-string">' = null; '</span>;
          } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (it.opts.coerceTypes == <span class="hljs-string">'array'</span> &amp;&amp; $type == <span class="hljs-string">'array'</span>) {
            out += <span class="hljs-string">' if ('</span> + ($dataType) + <span class="hljs-string">' == \'string\' || '</span> + ($dataType) + <span class="hljs-string">' == \'number\' || '</span> + ($dataType) + <span class="hljs-string">' == \'boolean\' || '</span> + ($data) + <span class="hljs-string">' == null) '</span> + ($coerced) + <span class="hljs-string">' = ['</span> + ($data) + <span class="hljs-string">']; '</span>;
          }
        }
      }
      out += <span class="hljs-string">' '</span> + ($bracesCoercion) + <span class="hljs-string">' if ('</span> + ($coerced) + <span class="hljs-string">' === undefined) {   '</span>;
      <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
      $$outStack.push(out);
      out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
      <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
        out += <span class="hljs-string">' { keyword: \''</span> + (<span class="hljs-string">'type'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { type: \''</span>;
        <span class="hljs-keyword">if</span> ($typeIsArray) {
          out += <span class="hljs-string">''</span> + ($typeSchema.join(<span class="hljs-string">","</span>));
        } <span class="hljs-keyword">else</span> {
          out += <span class="hljs-string">''</span> + ($typeSchema);
        }
        out += <span class="hljs-string">'\' } '</span>;
        <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
          out += <span class="hljs-string">' , message: \'should be '</span>;
          <span class="hljs-keyword">if</span> ($typeIsArray) {
            out += <span class="hljs-string">''</span> + ($typeSchema.join(<span class="hljs-string">","</span>));
          } <span class="hljs-keyword">else</span> {
            out += <span class="hljs-string">''</span> + ($typeSchema);
          }
          out += <span class="hljs-string">'\' '</span>;
        }
        <span class="hljs-keyword">if</span> (it.opts.verbose) {
          out += <span class="hljs-string">' , schema: validate.schema'</span> + ($schemaPath) + <span class="hljs-string">' , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
        }
        out += <span class="hljs-string">' } '</span>;
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">' {} '</span>;
      }
      <span class="hljs-keyword">var</span> __err = out;
      out = $$outStack.pop();
      <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
        <span class="hljs-keyword">if</span> (it.async) {
          out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
        } <span class="hljs-keyword">else</span> {
          out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
        }
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
      }
      out += <span class="hljs-string">' } else {  '</span>;
      <span class="hljs-keyword">var</span> $parentData = $dataLvl ? <span class="hljs-string">'data'</span> + (($dataLvl - <span class="hljs-number">1</span>) || <span class="hljs-string">''</span>) : <span class="hljs-string">'parentData'</span>,
        $parentDataProperty = $dataLvl ? it.dataPathArr[$dataLvl] : <span class="hljs-string">'parentDataProperty'</span>;
      out += <span class="hljs-string">' '</span> + ($data) + <span class="hljs-string">' = '</span> + ($coerced) + <span class="hljs-string">'; '</span>;
      <span class="hljs-keyword">if</span> (!$dataLvl) {
        out += <span class="hljs-string">'if ('</span> + ($parentData) + <span class="hljs-string">' !== undefined)'</span>;
      }
      out += <span class="hljs-string">' '</span> + ($parentData) + <span class="hljs-string">'['</span> + ($parentDataProperty) + <span class="hljs-string">'] = '</span> + ($coerced) + <span class="hljs-string">'; } } '</span>;
    }
  }
  <span class="hljs-keyword">var</span> $refKeywords;
  <span class="hljs-keyword">if</span> (it.schema.$ref &amp;&amp; ($refKeywords = it.util.schemaHasRulesExcept(it.schema, it.RULES.all, <span class="hljs-string">'$ref'</span>))) {
    <span class="hljs-keyword">if</span> (it.opts.extendRefs == <span class="hljs-string">'fail'</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'$ref: validation keywords used in schema at path "'</span> + it.errSchemaPath + <span class="hljs-string">'"'</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (it.opts.extendRefs == <span class="hljs-string">'ignore'</span>) {
      $refKeywords = <span class="hljs-literal">false</span>;
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'$ref: keywords ignored in schema at path "'</span> + it.errSchemaPath + <span class="hljs-string">'"'</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (it.opts.extendRefs !== <span class="hljs-literal">true</span>) {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'$ref: all keywords used in schema at path "'</span> + it.errSchemaPath + <span class="hljs-string">'". It will change in the next major version, see issue #260. Use option { extendRefs: true } to keep current behaviour'</span>);
    }
  }
  <span class="hljs-keyword">if</span> (it.schema.$ref &amp;&amp; !$refKeywords) {
    out += <span class="hljs-string">' '</span> + (it.RULES.all.$ref.code(it, <span class="hljs-string">'$ref'</span>)) + <span class="hljs-string">' '</span>;
    <span class="hljs-keyword">if</span> ($breakOnError) {
      out += <span class="hljs-string">' } if (errors === '</span>;
      <span class="hljs-keyword">if</span> ($top) {
        out += <span class="hljs-string">'0'</span>;
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">'errs_'</span> + ($lvl);
      }
      out += <span class="hljs-string">') { '</span>;
      $closingBraces2 += <span class="hljs-string">'}'</span>;
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">var</span> arr2 = it.RULES;
    <span class="hljs-keyword">if</span> (arr2) {
      <span class="hljs-keyword">var</span> $rulesGroup, i2 = <span class="hljs-number">-1</span>,
        l2 = arr2.length - <span class="hljs-number">1</span>;
      <span class="hljs-keyword">while</span> (i2 &lt; l2) {
        $rulesGroup = arr2[i2 += <span class="hljs-number">1</span>];
        <span class="hljs-keyword">if</span> ($shouldUseGroup($rulesGroup)) {
          <span class="hljs-keyword">if</span> ($rulesGroup.type) {
            out += <span class="hljs-string">' if ('</span> + (it.util.checkDataType($rulesGroup.type, $data)) + <span class="hljs-string">') { '</span>;
          }
          <span class="hljs-keyword">if</span> (it.opts.useDefaults &amp;&amp; !it.compositeRule) {
            <span class="hljs-keyword">if</span> ($rulesGroup.type == <span class="hljs-string">'object'</span> &amp;&amp; it.schema.properties) {
              <span class="hljs-keyword">var</span> $schema = it.schema.properties,
                $schemaKeys = <span class="hljs-built_in">Object</span>.keys($schema);
              <span class="hljs-keyword">var</span> arr3 = $schemaKeys;
              <span class="hljs-keyword">if</span> (arr3) {
                <span class="hljs-keyword">var</span> $propertyKey, i3 = <span class="hljs-number">-1</span>,
                  l3 = arr3.length - <span class="hljs-number">1</span>;
                <span class="hljs-keyword">while</span> (i3 &lt; l3) {
                  $propertyKey = arr3[i3 += <span class="hljs-number">1</span>];
                  <span class="hljs-keyword">var</span> $sch = $schema[$propertyKey];
                  <span class="hljs-keyword">if</span> ($sch.default !== <span class="hljs-literal">undefined</span>) {
                    <span class="hljs-keyword">var</span> $passData = $data + it.util.getProperty($propertyKey);
                    out += <span class="hljs-string">'  if ('</span> + ($passData) + <span class="hljs-string">' === undefined) '</span> + ($passData) + <span class="hljs-string">' = '</span>;
                    <span class="hljs-keyword">if</span> (it.opts.useDefaults == <span class="hljs-string">'shared'</span>) {
                      out += <span class="hljs-string">' '</span> + (it.useDefault($sch.default)) + <span class="hljs-string">' '</span>;
                    } <span class="hljs-keyword">else</span> {
                      out += <span class="hljs-string">' '</span> + (<span class="hljs-built_in">JSON</span>.stringify($sch.default)) + <span class="hljs-string">' '</span>;
                    }
                    out += <span class="hljs-string">'; '</span>;
                  }
                }
              }
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ($rulesGroup.type == <span class="hljs-string">'array'</span> &amp;&amp; <span class="hljs-built_in">Array</span>.isArray(it.schema.items)) {
              <span class="hljs-keyword">var</span> arr4 = it.schema.items;
              <span class="hljs-keyword">if</span> (arr4) {
                <span class="hljs-keyword">var</span> $sch, $i = <span class="hljs-number">-1</span>,
                  l4 = arr4.length - <span class="hljs-number">1</span>;
                <span class="hljs-keyword">while</span> ($i &lt; l4) {
                  $sch = arr4[$i += <span class="hljs-number">1</span>];
                  <span class="hljs-keyword">if</span> ($sch.default !== <span class="hljs-literal">undefined</span>) {
                    <span class="hljs-keyword">var</span> $passData = $data + <span class="hljs-string">'['</span> + $i + <span class="hljs-string">']'</span>;
                    out += <span class="hljs-string">'  if ('</span> + ($passData) + <span class="hljs-string">' === undefined) '</span> + ($passData) + <span class="hljs-string">' = '</span>;
                    <span class="hljs-keyword">if</span> (it.opts.useDefaults == <span class="hljs-string">'shared'</span>) {
                      out += <span class="hljs-string">' '</span> + (it.useDefault($sch.default)) + <span class="hljs-string">' '</span>;
                    } <span class="hljs-keyword">else</span> {
                      out += <span class="hljs-string">' '</span> + (<span class="hljs-built_in">JSON</span>.stringify($sch.default)) + <span class="hljs-string">' '</span>;
                    }
                    out += <span class="hljs-string">'; '</span>;
                  }
                }
              }
            }
          }
          <span class="hljs-keyword">var</span> arr5 = $rulesGroup.rules;
          <span class="hljs-keyword">if</span> (arr5) {
            <span class="hljs-keyword">var</span> $rule, i5 = <span class="hljs-number">-1</span>,
              l5 = arr5.length - <span class="hljs-number">1</span>;
            <span class="hljs-keyword">while</span> (i5 &lt; l5) {
              $rule = arr5[i5 += <span class="hljs-number">1</span>];
              <span class="hljs-keyword">if</span> ($shouldUseRule($rule)) {
                out += <span class="hljs-string">' '</span> + ($rule.code(it, $rule.keyword)) + <span class="hljs-string">' '</span>;
                <span class="hljs-keyword">if</span> ($breakOnError) {
                  $closingBraces1 += <span class="hljs-string">'}'</span>;
                }
              }
            }
          }
          <span class="hljs-keyword">if</span> ($breakOnError) {
            out += <span class="hljs-string">' '</span> + ($closingBraces1) + <span class="hljs-string">' '</span>;
            $closingBraces1 = <span class="hljs-string">''</span>;
          }
          <span class="hljs-keyword">if</span> ($rulesGroup.type) {
            out += <span class="hljs-string">' } '</span>;
            <span class="hljs-keyword">if</span> ($typeSchema &amp;&amp; $typeSchema === $rulesGroup.type &amp;&amp; !$coerceToTypes) {
              <span class="hljs-keyword">var</span> $typeChecked = <span class="hljs-literal">true</span>;
              out += <span class="hljs-string">' else { '</span>;
              <span class="hljs-keyword">var</span> $schemaPath = it.schemaPath + <span class="hljs-string">'.type'</span>,
                $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/type'</span>;
              <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
              $$outStack.push(out);
              out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
              <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
                out += <span class="hljs-string">' { keyword: \''</span> + (<span class="hljs-string">'type'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { type: \''</span>;
                <span class="hljs-keyword">if</span> ($typeIsArray) {
                  out += <span class="hljs-string">''</span> + ($typeSchema.join(<span class="hljs-string">","</span>));
                } <span class="hljs-keyword">else</span> {
                  out += <span class="hljs-string">''</span> + ($typeSchema);
                }
                out += <span class="hljs-string">'\' } '</span>;
                <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
                  out += <span class="hljs-string">' , message: \'should be '</span>;
                  <span class="hljs-keyword">if</span> ($typeIsArray) {
                    out += <span class="hljs-string">''</span> + ($typeSchema.join(<span class="hljs-string">","</span>));
                  } <span class="hljs-keyword">else</span> {
                    out += <span class="hljs-string">''</span> + ($typeSchema);
                  }
                  out += <span class="hljs-string">'\' '</span>;
                }
                <span class="hljs-keyword">if</span> (it.opts.verbose) {
                  out += <span class="hljs-string">' , schema: validate.schema'</span> + ($schemaPath) + <span class="hljs-string">' , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
                }
                out += <span class="hljs-string">' } '</span>;
              } <span class="hljs-keyword">else</span> {
                out += <span class="hljs-string">' {} '</span>;
              }
              <span class="hljs-keyword">var</span> __err = out;
              out = $$outStack.pop();
              <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
                <span class="hljs-keyword">if</span> (it.async) {
                  out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
                } <span class="hljs-keyword">else</span> {
                  out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
                }
              } <span class="hljs-keyword">else</span> {
                out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
              }
              out += <span class="hljs-string">' } '</span>;
            }
          }
          <span class="hljs-keyword">if</span> ($breakOnError) {
            out += <span class="hljs-string">' if (errors === '</span>;
            <span class="hljs-keyword">if</span> ($top) {
              out += <span class="hljs-string">'0'</span>;
            } <span class="hljs-keyword">else</span> {
              out += <span class="hljs-string">'errs_'</span> + ($lvl);
            }
            out += <span class="hljs-string">') { '</span>;
            $closingBraces2 += <span class="hljs-string">'}'</span>;
          }
        }
      }
    }
  }
  <span class="hljs-keyword">if</span> ($typeSchema &amp;&amp; !$typeChecked &amp;&amp; !$coerceToTypes) {
    <span class="hljs-keyword">var</span> $schemaPath = it.schemaPath + <span class="hljs-string">'.type'</span>,
      $errSchemaPath = it.errSchemaPath + <span class="hljs-string">'/type'</span>,
      $method = $typeIsArray ? <span class="hljs-string">'checkDataTypes'</span> : <span class="hljs-string">'checkDataType'</span>;
    out += <span class="hljs-string">' if ('</span> + (it.util[$method]($typeSchema, $data, <span class="hljs-literal">true</span>)) + <span class="hljs-string">') {   '</span>;
    <span class="hljs-keyword">var</span> $$outStack = $$outStack || [];
    $$outStack.push(out);
    out = <span class="hljs-string">''</span>; <span class="hljs-comment">/* istanbul ignore else */</span>
    <span class="hljs-keyword">if</span> (it.createErrors !== <span class="hljs-literal">false</span>) {
      out += <span class="hljs-string">' { keyword: \''</span> + (<span class="hljs-string">'type'</span>) + <span class="hljs-string">'\' , dataPath: (dataPath || \'\') + '</span> + (it.errorPath) + <span class="hljs-string">' , schemaPath: '</span> + (it.util.toQuotedString($errSchemaPath)) + <span class="hljs-string">' , params: { type: \''</span>;
      <span class="hljs-keyword">if</span> ($typeIsArray) {
        out += <span class="hljs-string">''</span> + ($typeSchema.join(<span class="hljs-string">","</span>));
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">''</span> + ($typeSchema);
      }
      out += <span class="hljs-string">'\' } '</span>;
      <span class="hljs-keyword">if</span> (it.opts.messages !== <span class="hljs-literal">false</span>) {
        out += <span class="hljs-string">' , message: \'should be '</span>;
        <span class="hljs-keyword">if</span> ($typeIsArray) {
          out += <span class="hljs-string">''</span> + ($typeSchema.join(<span class="hljs-string">","</span>));
        } <span class="hljs-keyword">else</span> {
          out += <span class="hljs-string">''</span> + ($typeSchema);
        }
        out += <span class="hljs-string">'\' '</span>;
      }
      <span class="hljs-keyword">if</span> (it.opts.verbose) {
        out += <span class="hljs-string">' , schema: validate.schema'</span> + ($schemaPath) + <span class="hljs-string">' , parentSchema: validate.schema'</span> + (it.schemaPath) + <span class="hljs-string">' , data: '</span> + ($data) + <span class="hljs-string">' '</span>;
      }
      out += <span class="hljs-string">' } '</span>;
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' {} '</span>;
    }
    <span class="hljs-keyword">var</span> __err = out;
    out = $$outStack.pop();
    <span class="hljs-keyword">if</span> (!it.compositeRule &amp;&amp; $breakOnError) { <span class="hljs-comment">/* istanbul ignore if */</span>
      <span class="hljs-keyword">if</span> (it.async) {
        out += <span class="hljs-string">' throw new ValidationError(['</span> + (__err) + <span class="hljs-string">']); '</span>;
      } <span class="hljs-keyword">else</span> {
        out += <span class="hljs-string">' validate.errors = ['</span> + (__err) + <span class="hljs-string">']; return false; '</span>;
      }
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' var err = '</span> + (__err) + <span class="hljs-string">';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; '</span>;
    }
    out += <span class="hljs-string">' }'</span>;
  }
  <span class="hljs-keyword">if</span> ($breakOnError) {
    out += <span class="hljs-string">' '</span> + ($closingBraces2) + <span class="hljs-string">' '</span>;
  }
  <span class="hljs-keyword">if</span> ($top) {
    <span class="hljs-keyword">if</span> ($<span class="hljs-keyword">async</span>) {
      out += <span class="hljs-string">' if (errors === 0) return true;           '</span>;
      out += <span class="hljs-string">' else throw new ValidationError(vErrors); '</span>;
    } <span class="hljs-keyword">else</span> {
      out += <span class="hljs-string">' validate.errors = vErrors; '</span>;
      out += <span class="hljs-string">' return errors === 0;       '</span>;
    }
    out += <span class="hljs-string">' }); return validate;'</span>;
  } <span class="hljs-keyword">else</span> {
    out += <span class="hljs-string">' var '</span> + ($valid) + <span class="hljs-string">' = errors === errs_'</span> + ($lvl) + <span class="hljs-string">';'</span>;
  }
  out = it.util.cleanUpCode(out);
  <span class="hljs-keyword">if</span> ($top &amp;&amp; $breakOnError) {
    out = it.util.cleanUpVarErrors(out, $<span class="hljs-keyword">async</span>);
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$shouldUseGroup</span>(<span class="hljs-params">$rulesGroup</span>) </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; $rulesGroup.rules.length; i++)
      <span class="hljs-keyword">if</span> ($shouldUseRule($rulesGroup.rules[i])) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$shouldUseRule</span>(<span class="hljs-params">$rule</span>) </span>{
    <span class="hljs-keyword">return</span> it.schema[$rule.keyword] !== <span class="hljs-literal">undefined</span> || ($rule.keyword == <span class="hljs-string">'properties'</span> &amp;&amp; (it.schema.additionalProperties === <span class="hljs-literal">false</span> || <span class="hljs-keyword">typeof</span> it.schema.additionalProperties == <span class="hljs-string">'object'</span> || (it.schema.patternProperties &amp;&amp; <span class="hljs-built_in">Object</span>.keys(it.schema.patternProperties).length) || (it.opts.v5 &amp;&amp; it.schema.patternGroups &amp;&amp; <span class="hljs-built_in">Object</span>.keys(it.schema.patternGroups).length)));
  }
  <span class="hljs-keyword">return</span> out;
}

},{}],<span class="hljs-number">37</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">var</span> IDENTIFIER = <span class="hljs-regexp">/^[a-z_$][a-z0-9_$\-]*$/i</span>;
<span class="hljs-keyword">var</span> customRuleCode = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./dotjs/custom'</span>);

<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">add</span>: addKeyword,
  <span class="hljs-attr">get</span>: getKeyword,
  <span class="hljs-attr">remove</span>: removeKeyword
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-28" id="section-28"></a>
</div>
<div class="dox">
<div class="summary">
<p>Define custom keyword</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">keyword</span>
<span class="dox_type">String</span>
<span>custom keyword, should be unique (including different from all standard, custom and macro keywords).
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">definition</span>
<span class="dox_type">Object</span>
<span>keyword definition object with properties <code>type</code> (type(s) which the keyword applies to), <code>validate</code> or <code>compile</code>.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addKeyword</span>(<span class="hljs-params">keyword, definition</span>) </span>{
  <span class="hljs-comment">/* jshint validthis: true */</span>
  <span class="hljs-comment">/* eslint no-shadow: 0 */</span>
  <span class="hljs-keyword">var</span> RULES = <span class="hljs-keyword">this</span>.RULES;

  <span class="hljs-keyword">if</span> (RULES.keywords[keyword])
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Keyword '</span> + keyword + <span class="hljs-string">' is already defined'</span>);

  <span class="hljs-keyword">if</span> (!IDENTIFIER.test(keyword))
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Keyword '</span> + keyword + <span class="hljs-string">' is not a valid identifier'</span>);

  <span class="hljs-keyword">if</span> (definition) {
    <span class="hljs-keyword">if</span> (definition.macro &amp;&amp; definition.valid !== <span class="hljs-literal">undefined</span>)
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'"valid" option cannot be used with macro keywords'</span>);

    <span class="hljs-keyword">var</span> dataType = definition.type;
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(dataType)) {
      <span class="hljs-keyword">var</span> i, len = dataType.length;
      <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;len; i++) checkDataType(dataType[i]);
      <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;len; i++) _addRule(keyword, dataType[i], definition);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">if</span> (dataType) checkDataType(dataType);
      _addRule(keyword, dataType, definition);
    }

    <span class="hljs-keyword">var</span> $data = definition.$data === <span class="hljs-literal">true</span> &amp;&amp; <span class="hljs-keyword">this</span>._opts.v5;
    <span class="hljs-keyword">if</span> ($data &amp;&amp; !definition.validate)
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'$data support: "validate" function is not defined'</span>);

    <span class="hljs-keyword">var</span> metaSchema = definition.metaSchema;
    <span class="hljs-keyword">if</span> (metaSchema) {
      <span class="hljs-keyword">if</span> ($data) {
        metaSchema = {
          <span class="hljs-attr">anyOf</span>: [
            metaSchema,
            { <span class="hljs-string">'$ref'</span>: <span class="hljs-string">'https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/json-schema-v5.json#/definitions/$data'</span> }
          ]
        };
      }
      definition.validateSchema = <span class="hljs-keyword">this</span>.compile(metaSchema, <span class="hljs-literal">true</span>);
    }
  }

  RULES.keywords[keyword] = RULES.all[keyword] = <span class="hljs-literal">true</span>;


  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_addRule</span>(<span class="hljs-params">keyword, dataType, definition</span>) </span>{
    <span class="hljs-keyword">var</span> ruleGroup;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;RULES.length; i++) {
      <span class="hljs-keyword">var</span> rg = RULES[i];
      <span class="hljs-keyword">if</span> (rg.type == dataType) {
        ruleGroup = rg;
        <span class="hljs-keyword">break</span>;
      }
    }

    <span class="hljs-keyword">if</span> (!ruleGroup) {
      ruleGroup = { <span class="hljs-attr">type</span>: dataType, <span class="hljs-attr">rules</span>: [] };
      RULES.push(ruleGroup);
    }

    <span class="hljs-keyword">var</span> rule = {
      <span class="hljs-attr">keyword</span>: keyword,
      <span class="hljs-attr">definition</span>: definition,
      <span class="hljs-attr">custom</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">code</span>: customRuleCode
    };
    ruleGroup.rules.push(rule);
    RULES.custom[keyword] = rule;
  }


  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkDataType</span>(<span class="hljs-params">dataType</span>) </span>{
    <span class="hljs-keyword">if</span> (!RULES.types[dataType]) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Unknown type '</span> + dataType);
  }
}


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-29" id="section-29"></a>
</div>
<div class="dox">
<div class="summary">
<p>Get keyword</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">keyword</span>
<span class="dox_type">String</span>
<span>pre-defined or custom keyword.
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Object</span>
<span class="dox_type">Boolean</span>
<span>custom keyword definition, <code>true</code> if it is a predefined keyword, <code>false</code> otherwise.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getKeyword</span>(<span class="hljs-params">keyword</span>) </span>{
  <span class="hljs-comment">/* jshint validthis: true */</span>
  <span class="hljs-keyword">var</span> rule = <span class="hljs-keyword">this</span>.RULES.custom[keyword];
  <span class="hljs-keyword">return</span> rule ? rule.definition : <span class="hljs-keyword">this</span>.RULES.keywords[keyword] || <span class="hljs-literal">false</span>;
}


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-30" id="section-30"></a>
</div>
<div class="dox">
<div class="summary">
<p>Remove keyword</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">keyword</span>
<span class="dox_type">String</span>
<span>pre-defined or custom keyword.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeKeyword</span>(<span class="hljs-params">keyword</span>) </span>{
  <span class="hljs-comment">/* jshint validthis: true */</span>
  <span class="hljs-keyword">var</span> RULES = <span class="hljs-keyword">this</span>.RULES;
  <span class="hljs-keyword">delete</span> RULES.keywords[keyword];
  <span class="hljs-keyword">delete</span> RULES.all[keyword];
  <span class="hljs-keyword">delete</span> RULES.custom[keyword];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;RULES.length; i++) {
    <span class="hljs-keyword">var</span> rules = RULES[i].rules;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j=<span class="hljs-number">0</span>; j&lt;rules.length; j++) {
      <span class="hljs-keyword">if</span> (rules[j].keyword == keyword) {
        rules.splice(j, <span class="hljs-number">1</span>);
        <span class="hljs-keyword">break</span>;
      }
    }
  }
}

},{<span class="hljs-string">"./dotjs/custom"</span>:<span class="hljs-number">21</span>}],<span class="hljs-number">38</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-built_in">module</span>.exports={
    <span class="hljs-string">"id"</span>: <span class="hljs-string">"http://json-schema.org/draft-04/schema#"</span>,
    <span class="hljs-string">"$schema"</span>: <span class="hljs-string">"http://json-schema.org/draft-04/schema#"</span>,
    <span class="hljs-string">"description"</span>: <span class="hljs-string">"Core schema meta-schema"</span>,
    <span class="hljs-string">"definitions"</span>: {
        <span class="hljs-string">"schemaArray"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"array"</span>,
            <span class="hljs-string">"minItems"</span>: <span class="hljs-number">1</span>,
            <span class="hljs-string">"items"</span>: { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#"</span> }
        },
        <span class="hljs-string">"positiveInteger"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"integer"</span>,
            <span class="hljs-string">"minimum"</span>: <span class="hljs-number">0</span>
        },
        <span class="hljs-string">"positiveIntegerDefault0"</span>: {
            <span class="hljs-string">"allOf"</span>: [ { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/positiveInteger"</span> }, { <span class="hljs-string">"default"</span>: <span class="hljs-number">0</span> } ]
        },
        <span class="hljs-string">"simpleTypes"</span>: {
            <span class="hljs-string">"enum"</span>: [ <span class="hljs-string">"array"</span>, <span class="hljs-string">"boolean"</span>, <span class="hljs-string">"integer"</span>, <span class="hljs-string">"null"</span>, <span class="hljs-string">"number"</span>, <span class="hljs-string">"object"</span>, <span class="hljs-string">"string"</span> ]
        },
        <span class="hljs-string">"stringArray"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"array"</span>,
            <span class="hljs-string">"items"</span>: { <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span> },
            <span class="hljs-string">"minItems"</span>: <span class="hljs-number">1</span>,
            <span class="hljs-string">"uniqueItems"</span>: <span class="hljs-literal">true</span>
        }
    },
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
    <span class="hljs-string">"properties"</span>: {
        <span class="hljs-string">"id"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>,
            <span class="hljs-string">"format"</span>: <span class="hljs-string">"uri"</span>
        },
        <span class="hljs-string">"$schema"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>,
            <span class="hljs-string">"format"</span>: <span class="hljs-string">"uri"</span>
        },
        <span class="hljs-string">"title"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>
        },
        <span class="hljs-string">"description"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>
        },
        <span class="hljs-string">"default"</span>: {},
        <span class="hljs-string">"multipleOf"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"number"</span>,
            <span class="hljs-string">"minimum"</span>: <span class="hljs-number">0</span>,
            <span class="hljs-string">"exclusiveMinimum"</span>: <span class="hljs-literal">true</span>
        },
        <span class="hljs-string">"maximum"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"number"</span>
        },
        <span class="hljs-string">"exclusiveMaximum"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"boolean"</span>,
            <span class="hljs-string">"default"</span>: <span class="hljs-literal">false</span>
        },
        <span class="hljs-string">"minimum"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"number"</span>
        },
        <span class="hljs-string">"exclusiveMinimum"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"boolean"</span>,
            <span class="hljs-string">"default"</span>: <span class="hljs-literal">false</span>
        },
        <span class="hljs-string">"maxLength"</span>: { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/positiveInteger"</span> },
        <span class="hljs-string">"minLength"</span>: { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/positiveIntegerDefault0"</span> },
        <span class="hljs-string">"pattern"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>,
            <span class="hljs-string">"format"</span>: <span class="hljs-string">"regex"</span>
        },
        <span class="hljs-string">"additionalItems"</span>: {
            <span class="hljs-string">"anyOf"</span>: [
                { <span class="hljs-string">"type"</span>: <span class="hljs-string">"boolean"</span> },
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#"</span> }
            ],
            <span class="hljs-string">"default"</span>: {}
        },
        <span class="hljs-string">"items"</span>: {
            <span class="hljs-string">"anyOf"</span>: [
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#"</span> },
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/schemaArray"</span> }
            ],
            <span class="hljs-string">"default"</span>: {}
        },
        <span class="hljs-string">"maxItems"</span>: { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/positiveInteger"</span> },
        <span class="hljs-string">"minItems"</span>: { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/positiveIntegerDefault0"</span> },
        <span class="hljs-string">"uniqueItems"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"boolean"</span>,
            <span class="hljs-string">"default"</span>: <span class="hljs-literal">false</span>
        },
        <span class="hljs-string">"maxProperties"</span>: { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/positiveInteger"</span> },
        <span class="hljs-string">"minProperties"</span>: { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/positiveIntegerDefault0"</span> },
        <span class="hljs-string">"required"</span>: { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/stringArray"</span> },
        <span class="hljs-string">"additionalProperties"</span>: {
            <span class="hljs-string">"anyOf"</span>: [
                { <span class="hljs-string">"type"</span>: <span class="hljs-string">"boolean"</span> },
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#"</span> }
            ],
            <span class="hljs-string">"default"</span>: {}
        },
        <span class="hljs-string">"definitions"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
            <span class="hljs-string">"additionalProperties"</span>: { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#"</span> },
            <span class="hljs-string">"default"</span>: {}
        },
        <span class="hljs-string">"properties"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
            <span class="hljs-string">"additionalProperties"</span>: { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#"</span> },
            <span class="hljs-string">"default"</span>: {}
        },
        <span class="hljs-string">"patternProperties"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
            <span class="hljs-string">"additionalProperties"</span>: { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#"</span> },
            <span class="hljs-string">"default"</span>: {}
        },
        <span class="hljs-string">"dependencies"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
            <span class="hljs-string">"additionalProperties"</span>: {
                <span class="hljs-string">"anyOf"</span>: [
                    { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#"</span> },
                    { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/stringArray"</span> }
                ]
            }
        },
        <span class="hljs-string">"enum"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"array"</span>,
            <span class="hljs-string">"minItems"</span>: <span class="hljs-number">1</span>,
            <span class="hljs-string">"uniqueItems"</span>: <span class="hljs-literal">true</span>
        },
        <span class="hljs-string">"type"</span>: {
            <span class="hljs-string">"anyOf"</span>: [
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/simpleTypes"</span> },
                {
                    <span class="hljs-string">"type"</span>: <span class="hljs-string">"array"</span>,
                    <span class="hljs-string">"items"</span>: { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/simpleTypes"</span> },
                    <span class="hljs-string">"minItems"</span>: <span class="hljs-number">1</span>,
                    <span class="hljs-string">"uniqueItems"</span>: <span class="hljs-literal">true</span>
                }
            ]
        },
        <span class="hljs-string">"allOf"</span>: { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/schemaArray"</span> },
        <span class="hljs-string">"anyOf"</span>: { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/schemaArray"</span> },
        <span class="hljs-string">"oneOf"</span>: { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/schemaArray"</span> },
        <span class="hljs-string">"not"</span>: { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#"</span> }
    },
    <span class="hljs-string">"dependencies"</span>: {
        <span class="hljs-string">"exclusiveMaximum"</span>: [ <span class="hljs-string">"maximum"</span> ],
        <span class="hljs-string">"exclusiveMinimum"</span>: [ <span class="hljs-string">"minimum"</span> ]
    },
    <span class="hljs-string">"default"</span>: {}
}

},{}],<span class="hljs-number">39</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-built_in">module</span>.exports={
    <span class="hljs-string">"id"</span>: <span class="hljs-string">"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/json-schema-v5.json#"</span>,
    <span class="hljs-string">"$schema"</span>: <span class="hljs-string">"http://json-schema.org/draft-04/schema#"</span>,
    <span class="hljs-string">"description"</span>: <span class="hljs-string">"Core schema meta-schema (v5 proposals)"</span>,
    <span class="hljs-string">"definitions"</span>: {
        <span class="hljs-string">"schemaArray"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"array"</span>,
            <span class="hljs-string">"minItems"</span>: <span class="hljs-number">1</span>,
            <span class="hljs-string">"items"</span>: { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#"</span> }
        },
        <span class="hljs-string">"positiveInteger"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"integer"</span>,
            <span class="hljs-string">"minimum"</span>: <span class="hljs-number">0</span>
        },
        <span class="hljs-string">"positiveIntegerDefault0"</span>: {
            <span class="hljs-string">"allOf"</span>: [ { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/positiveInteger"</span> }, { <span class="hljs-string">"default"</span>: <span class="hljs-number">0</span> } ]
        },
        <span class="hljs-string">"simpleTypes"</span>: {
            <span class="hljs-string">"enum"</span>: [ <span class="hljs-string">"array"</span>, <span class="hljs-string">"boolean"</span>, <span class="hljs-string">"integer"</span>, <span class="hljs-string">"null"</span>, <span class="hljs-string">"number"</span>, <span class="hljs-string">"object"</span>, <span class="hljs-string">"string"</span> ]
        },
        <span class="hljs-string">"stringArray"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"array"</span>,
            <span class="hljs-string">"items"</span>: { <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span> },
            <span class="hljs-string">"minItems"</span>: <span class="hljs-number">1</span>,
            <span class="hljs-string">"uniqueItems"</span>: <span class="hljs-literal">true</span>
        },
        <span class="hljs-string">"$data"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
            <span class="hljs-string">"required"</span>: [ <span class="hljs-string">"$data"</span> ],
            <span class="hljs-string">"properties"</span>: {
                <span class="hljs-string">"$data"</span>: {
                    <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>,
                    <span class="hljs-string">"anyOf"</span>: [
                        { <span class="hljs-string">"format"</span>: <span class="hljs-string">"relative-json-pointer"</span> }, 
                        { <span class="hljs-string">"format"</span>: <span class="hljs-string">"json-pointer"</span> }
                    ]
                }
            },
            <span class="hljs-string">"additionalProperties"</span>: <span class="hljs-literal">false</span>
        }
    },
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
    <span class="hljs-string">"properties"</span>: {
        <span class="hljs-string">"id"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>,
            <span class="hljs-string">"format"</span>: <span class="hljs-string">"uri"</span>
        },
        <span class="hljs-string">"$schema"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>,
            <span class="hljs-string">"format"</span>: <span class="hljs-string">"uri"</span>
        },
        <span class="hljs-string">"title"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>
        },
        <span class="hljs-string">"description"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>
        },
        <span class="hljs-string">"default"</span>: {},
        <span class="hljs-string">"multipleOf"</span>: {
            <span class="hljs-string">"anyOf"</span>: [
                {
                    <span class="hljs-string">"type"</span>: <span class="hljs-string">"number"</span>,
                    <span class="hljs-string">"minimum"</span>: <span class="hljs-number">0</span>,
                    <span class="hljs-string">"exclusiveMinimum"</span>: <span class="hljs-literal">true</span>
                },
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/$data"</span> }
            ]
        },
        <span class="hljs-string">"maximum"</span>: {
            <span class="hljs-string">"anyOf"</span>: [
                { <span class="hljs-string">"type"</span>: <span class="hljs-string">"number"</span> },
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/$data"</span> }
            ]
        },
        <span class="hljs-string">"exclusiveMaximum"</span>: {
            <span class="hljs-string">"anyOf"</span>: [
                {
                    <span class="hljs-string">"type"</span>: <span class="hljs-string">"boolean"</span>,
                    <span class="hljs-string">"default"</span>: <span class="hljs-literal">false</span>
                },
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/$data"</span> }
            ]
        },
        <span class="hljs-string">"minimum"</span>: {
            <span class="hljs-string">"anyOf"</span>: [
                { <span class="hljs-string">"type"</span>: <span class="hljs-string">"number"</span> },
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/$data"</span> }
            ]
        },
        <span class="hljs-string">"exclusiveMinimum"</span>: {
            <span class="hljs-string">"anyOf"</span>: [
                {
                    <span class="hljs-string">"type"</span>: <span class="hljs-string">"boolean"</span>,
                    <span class="hljs-string">"default"</span>: <span class="hljs-literal">false</span>
                },
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/$data"</span> }
            ]
        },
        <span class="hljs-string">"maxLength"</span>: {
            <span class="hljs-string">"anyOf"</span>: [
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/positiveInteger"</span> },
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/$data"</span> }
            ]
        },
        <span class="hljs-string">"minLength"</span>: {
            <span class="hljs-string">"anyOf"</span>: [
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/positiveIntegerDefault0"</span> },
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/$data"</span> }
            ]
        },
        <span class="hljs-string">"pattern"</span>: {
            <span class="hljs-string">"anyOf"</span>: [
                {
                    <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>,
                    <span class="hljs-string">"format"</span>: <span class="hljs-string">"regex"</span>
                },
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/$data"</span> }
            ]
        },
        <span class="hljs-string">"additionalItems"</span>: {
            <span class="hljs-string">"anyOf"</span>: [
                { <span class="hljs-string">"type"</span>: <span class="hljs-string">"boolean"</span> },
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#"</span> },
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/$data"</span> }
            ],
            <span class="hljs-string">"default"</span>: {}
        },
        <span class="hljs-string">"items"</span>: {
            <span class="hljs-string">"anyOf"</span>: [
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#"</span> },
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/schemaArray"</span> }
            ],
            <span class="hljs-string">"default"</span>: {}
        },
        <span class="hljs-string">"maxItems"</span>: {
            <span class="hljs-string">"anyOf"</span>: [
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/positiveInteger"</span> },
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/$data"</span> }
            ]
        },
        <span class="hljs-string">"minItems"</span>: {
            <span class="hljs-string">"anyOf"</span>: [
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/positiveIntegerDefault0"</span> },
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/$data"</span> }
            ]
        },
        <span class="hljs-string">"uniqueItems"</span>: {
            <span class="hljs-string">"anyOf"</span>: [
                {
                    <span class="hljs-string">"type"</span>: <span class="hljs-string">"boolean"</span>,
                    <span class="hljs-string">"default"</span>: <span class="hljs-literal">false</span>
                },
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/$data"</span> }
            ]
        },
        <span class="hljs-string">"maxProperties"</span>: {
            <span class="hljs-string">"anyOf"</span>: [
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/positiveInteger"</span> },
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/$data"</span> }
            ]
        },
        <span class="hljs-string">"minProperties"</span>: {
            <span class="hljs-string">"anyOf"</span>: [
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/positiveIntegerDefault0"</span> },
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/$data"</span> }
            ]
        },
        <span class="hljs-string">"required"</span>: {
            <span class="hljs-string">"anyOf"</span>: [
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/stringArray"</span> },
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/$data"</span> }
            ]
        },
        <span class="hljs-string">"additionalProperties"</span>: {
            <span class="hljs-string">"anyOf"</span>: [
                { <span class="hljs-string">"type"</span>: <span class="hljs-string">"boolean"</span> },
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#"</span> },
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/$data"</span> }
            ],
            <span class="hljs-string">"default"</span>: {}
        },
        <span class="hljs-string">"definitions"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
            <span class="hljs-string">"additionalProperties"</span>: { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#"</span> },
            <span class="hljs-string">"default"</span>: {}
        },
        <span class="hljs-string">"properties"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
            <span class="hljs-string">"additionalProperties"</span>: { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#"</span> },
            <span class="hljs-string">"default"</span>: {}
        },
        <span class="hljs-string">"patternProperties"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
            <span class="hljs-string">"additionalProperties"</span>: { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#"</span> },
            <span class="hljs-string">"default"</span>: {}
        },
        <span class="hljs-string">"dependencies"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
            <span class="hljs-string">"additionalProperties"</span>: {
                <span class="hljs-string">"anyOf"</span>: [
                    { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#"</span> },
                    { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/stringArray"</span> }
                ]
            }
        },
        <span class="hljs-string">"enum"</span>: {
            <span class="hljs-string">"anyOf"</span>: [
                {
                    <span class="hljs-string">"type"</span>: <span class="hljs-string">"array"</span>,
                    <span class="hljs-string">"minItems"</span>: <span class="hljs-number">1</span>,
                    <span class="hljs-string">"uniqueItems"</span>: <span class="hljs-literal">true</span>
                },
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/$data"</span> }
            ]
        },
        <span class="hljs-string">"type"</span>: {
            <span class="hljs-string">"anyOf"</span>: [
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/simpleTypes"</span> },
                {
                    <span class="hljs-string">"type"</span>: <span class="hljs-string">"array"</span>,
                    <span class="hljs-string">"items"</span>: { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/simpleTypes"</span> },
                    <span class="hljs-string">"minItems"</span>: <span class="hljs-number">1</span>,
                    <span class="hljs-string">"uniqueItems"</span>: <span class="hljs-literal">true</span>
                }
            ]
        },
        <span class="hljs-string">"allOf"</span>: { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/schemaArray"</span> },
        <span class="hljs-string">"anyOf"</span>: { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/schemaArray"</span> },
        <span class="hljs-string">"oneOf"</span>: { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/schemaArray"</span> },
        <span class="hljs-string">"not"</span>: { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#"</span> },
        <span class="hljs-string">"format"</span>: {
            <span class="hljs-string">"anyOf"</span>: [
                { <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span> },
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/$data"</span> }
            ]
        },
        <span class="hljs-string">"formatMaximum"</span>: {
            <span class="hljs-string">"anyOf"</span>: [
                { <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span> },
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/$data"</span> }
            ]
        },
        <span class="hljs-string">"formatMinimum"</span>: {
            <span class="hljs-string">"anyOf"</span>: [
                { <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span> },
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/$data"</span> }
            ]
        },
        <span class="hljs-string">"formatExclusiveMaximum"</span>: {
            <span class="hljs-string">"anyOf"</span>: [
                {
                    <span class="hljs-string">"type"</span>: <span class="hljs-string">"boolean"</span>,
                    <span class="hljs-string">"default"</span>: <span class="hljs-literal">false</span>
                },
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/$data"</span> }
            ]
        },
        <span class="hljs-string">"formatExclusiveMinimum"</span>: {
            <span class="hljs-string">"anyOf"</span>: [
                {
                    <span class="hljs-string">"type"</span>: <span class="hljs-string">"boolean"</span>,
                    <span class="hljs-string">"default"</span>: <span class="hljs-literal">false</span>
                },
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/$data"</span> }
            ]
        },
        <span class="hljs-string">"constant"</span>: {
            <span class="hljs-string">"anyOf"</span>: [
                {},
                { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/$data"</span> }
            ]
        },
        <span class="hljs-string">"contains"</span>: { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#"</span> },
        <span class="hljs-string">"patternGroups"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
            <span class="hljs-string">"additionalProperties"</span>: {
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
                <span class="hljs-string">"required"</span>: [ <span class="hljs-string">"schema"</span> ],
                <span class="hljs-string">"properties"</span>: {
                    <span class="hljs-string">"maximum"</span>: {
                        <span class="hljs-string">"anyOf"</span>: [
                            { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/positiveInteger"</span> },
                            { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/$data"</span> }
                        ]
                    },
                    <span class="hljs-string">"minimum"</span>: {
                        <span class="hljs-string">"anyOf"</span>: [
                            { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/positiveIntegerDefault0"</span> },
                            { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#/definitions/$data"</span> }
                        ]
                    },
                    <span class="hljs-string">"schema"</span>: { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#"</span> }
                },
                <span class="hljs-string">"additionalProperties"</span>: <span class="hljs-literal">false</span>
            },
            <span class="hljs-string">"default"</span>: {}
        },
        <span class="hljs-string">"switch"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"array"</span>,
            <span class="hljs-string">"items"</span>: {
                <span class="hljs-string">"required"</span>: [ <span class="hljs-string">"then"</span> ],
                <span class="hljs-string">"properties"</span>: {
                    <span class="hljs-string">"if"</span>: { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#"</span> },
                    <span class="hljs-string">"then"</span>: {
                        <span class="hljs-string">"anyOf"</span>: [
                            { <span class="hljs-string">"type"</span>: <span class="hljs-string">"boolean"</span> },
                            { <span class="hljs-string">"$ref"</span>: <span class="hljs-string">"#"</span> }
                        ]
                    },
                    <span class="hljs-string">"continue"</span>: { <span class="hljs-string">"type"</span>: <span class="hljs-string">"boolean"</span> }
                },
                <span class="hljs-string">"additionalProperties"</span>: <span class="hljs-literal">false</span>,
                <span class="hljs-string">"dependencies"</span>: {
                    <span class="hljs-string">"continue"</span>: [ <span class="hljs-string">"if"</span> ]
                }
            }
        }
    },
    <span class="hljs-string">"dependencies"</span>: {
        <span class="hljs-string">"exclusiveMaximum"</span>: [ <span class="hljs-string">"maximum"</span> ],
        <span class="hljs-string">"exclusiveMinimum"</span>: [ <span class="hljs-string">"minimum"</span> ],
        <span class="hljs-string">"formatMaximum"</span>: [ <span class="hljs-string">"format"</span> ],
        <span class="hljs-string">"formatMinimum"</span>: [ <span class="hljs-string">"format"</span> ],
        <span class="hljs-string">"formatExclusiveMaximum"</span>: [ <span class="hljs-string">"formatMaximum"</span> ],
        <span class="hljs-string">"formatExclusiveMinimum"</span>: [ <span class="hljs-string">"formatMinimum"</span> ]
    },
    <span class="hljs-string">"default"</span>: {}
}

},{}],<span class="hljs-number">40</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">var</span> META_SCHEMA_ID = <span class="hljs-string">'https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/json-schema-v5.json'</span>;

<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">enable</span>: enableV5,
  <span class="hljs-attr">META_SCHEMA_ID</span>: META_SCHEMA_ID
};


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enableV5</span>(<span class="hljs-params">ajv</span>) </span>{
  <span class="hljs-keyword">var</span> inlineFunctions = {
    <span class="hljs-string">'switch'</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'./dotjs/switch'</span>),
    <span class="hljs-string">'constant'</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'./dotjs/constant'</span>),
    <span class="hljs-string">'_formatLimit'</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'./dotjs/_formatLimit'</span>),
    <span class="hljs-string">'patternRequired'</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'./dotjs/patternRequired'</span>)
  };

  <span class="hljs-keyword">if</span> (ajv._opts.meta !== <span class="hljs-literal">false</span>) {
    <span class="hljs-keyword">var</span> metaSchema = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./refs/json-schema-v5.json'</span>);
    ajv.addMetaSchema(metaSchema, META_SCHEMA_ID);
  }
  _addKeyword(<span class="hljs-string">'constant'</span>);
  ajv.addKeyword(<span class="hljs-string">'contains'</span>, { <span class="hljs-attr">type</span>: <span class="hljs-string">'array'</span>, <span class="hljs-attr">macro</span>: containsMacro });

  _addKeyword(<span class="hljs-string">'formatMaximum'</span>, <span class="hljs-string">'string'</span>, inlineFunctions._formatLimit);
  _addKeyword(<span class="hljs-string">'formatMinimum'</span>, <span class="hljs-string">'string'</span>, inlineFunctions._formatLimit);
  ajv.addKeyword(<span class="hljs-string">'formatExclusiveMaximum'</span>);
  ajv.addKeyword(<span class="hljs-string">'formatExclusiveMinimum'</span>);

  ajv.addKeyword(<span class="hljs-string">'patternGroups'</span>); <span class="hljs-comment">// implemented in properties.jst</span>
  _addKeyword(<span class="hljs-string">'patternRequired'</span>, <span class="hljs-string">'object'</span>);
  _addKeyword(<span class="hljs-string">'switch'</span>);


  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_addKeyword</span>(<span class="hljs-params">keyword, types, inlineFunc</span>) </span>{
    <span class="hljs-keyword">var</span> definition = {
      <span class="hljs-attr">inline</span>: inlineFunc || inlineFunctions[keyword],
      <span class="hljs-attr">statements</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">errors</span>: <span class="hljs-string">'full'</span>
    };
    <span class="hljs-keyword">if</span> (types) definition.type = types;
    ajv.addKeyword(keyword, definition);
  }
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">containsMacro</span>(<span class="hljs-params">schema</span>) </span>{
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">not</span>: { <span class="hljs-attr">items</span>: { <span class="hljs-attr">not</span>: schema } }
  };
}

},{<span class="hljs-string">"./dotjs/_formatLimit"</span>:<span class="hljs-number">13</span>,<span class="hljs-string">"./dotjs/constant"</span>:<span class="hljs-number">20</span>,<span class="hljs-string">"./dotjs/patternRequired"</span>:<span class="hljs-number">30</span>,<span class="hljs-string">"./dotjs/switch"</span>:<span class="hljs-number">34</span>,<span class="hljs-string">"./refs/json-schema-v5.json"</span>:<span class="hljs-number">39</span>}],<span class="hljs-number">41</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-31" id="section-31"></a>
</div>
<div class="dox">
<div class="summary">
<p>slice() reference.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> slice = <span class="hljs-built_in">Array</span>.prototype.slice;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-32" id="section-32"></a>
</div>
<div class="dox">
<div class="summary">
<p>Expose <code>co</code>.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-built_in">module</span>.exports = co[<span class="hljs-string">'default'</span>] = co.co = co;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-33" id="section-33"></a>
</div>
<div class="dox">
<div class="summary">
<p>Wrap the given generator <code>fn</code> into a
function that returns a promise.
This is a separate function so that
every <code>co()</code> call doesn't create a new,
unnecessary closure.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">fn</span>
<span class="dox_type">GeneratorFunction</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Function</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
co.wrap = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">fn</span>) </span>{
  createPromise.__generatorFunction__ = fn;
  <span class="hljs-keyword">return</span> createPromise;
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createPromise</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> co.call(<span class="hljs-keyword">this</span>, fn.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>));
  }
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-34" id="section-34"></a>
</div>
<div class="dox">
<div class="summary">
<p>Execute the generator function or a generator
and return a promise.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">fn</span>
<span class="dox_type">Function</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Promise</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">co</span>(<span class="hljs-params">gen</span>) </span>{
  <span class="hljs-keyword">var</span> ctx = <span class="hljs-keyword">this</span>;
  <span class="hljs-keyword">var</span> args = slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">1</span>)

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-35" id="section-35"></a>
</div>
<p>we wrap everything in a promise to avoid promise chaining,
which leads to memory leak errors.
see https://github.com/tj/co/issues/180</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolve, reject</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> gen === <span class="hljs-string">'function'</span>) gen = gen.apply(ctx, args);
    <span class="hljs-keyword">if</span> (!gen || <span class="hljs-keyword">typeof</span> gen.next !== <span class="hljs-string">'function'</span>) <span class="hljs-keyword">return</span> resolve(gen);

    onFulfilled();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-36" id="section-36"></a>
</div>
<div class="dox">
<div class="summary">
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">res</span>
<span class="dox_type">Mixed</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Promise</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onFulfilled</span>(<span class="hljs-params">res</span>) </span>{
      <span class="hljs-keyword">var</span> ret;
      <span class="hljs-keyword">try</span> {
        ret = gen.next(res);
      } <span class="hljs-keyword">catch</span> (e) {
        <span class="hljs-keyword">return</span> reject(e);
      }
      next(ret);
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-37" id="section-37"></a>
</div>
<div class="dox">
<div class="summary">
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">err</span>
<span class="dox_type">Error</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Promise</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onRejected</span>(<span class="hljs-params">err</span>) </span>{
      <span class="hljs-keyword">var</span> ret;
      <span class="hljs-keyword">try</span> {
        ret = gen.throw(err);
      } <span class="hljs-keyword">catch</span> (e) {
        <span class="hljs-keyword">return</span> reject(e);
      }
      next(ret);
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-38" id="section-38"></a>
</div>
<div class="dox">
<div class="summary">
<p>Get the next value in the generator,
return a promise.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">ret</span>
<span class="dox_type">Object</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Promise</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">next</span>(<span class="hljs-params">ret</span>) </span>{
      <span class="hljs-keyword">if</span> (ret.done) <span class="hljs-keyword">return</span> resolve(ret.value);
      <span class="hljs-keyword">var</span> value = toPromise.call(ctx, ret.value);
      <span class="hljs-keyword">if</span> (value &amp;&amp; isPromise(value)) <span class="hljs-keyword">return</span> value.then(onFulfilled, onRejected);
      <span class="hljs-keyword">return</span> onRejected(<span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'You may only yield a function, promise, generator, array, or object, '</span>
        + <span class="hljs-string">'but the following object was passed: "'</span> + <span class="hljs-built_in">String</span>(ret.value) + <span class="hljs-string">'"'</span>));
    }
  });
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-39" id="section-39"></a>
</div>
<div class="dox">
<div class="summary">
<p>Convert a <code>yield</code>ed value into a promise.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">obj</span>
<span class="dox_type">Mixed</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Promise</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toPromise</span>(<span class="hljs-params">obj</span>) </span>{
  <span class="hljs-keyword">if</span> (!obj) <span class="hljs-keyword">return</span> obj;
  <span class="hljs-keyword">if</span> (isPromise(obj)) <span class="hljs-keyword">return</span> obj;
  <span class="hljs-keyword">if</span> (isGeneratorFunction(obj) || isGenerator(obj)) <span class="hljs-keyword">return</span> co.call(<span class="hljs-keyword">this</span>, obj);
  <span class="hljs-keyword">if</span> (<span class="hljs-string">'function'</span> == <span class="hljs-keyword">typeof</span> obj) <span class="hljs-keyword">return</span> thunkToPromise.call(<span class="hljs-keyword">this</span>, obj);
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(obj)) <span class="hljs-keyword">return</span> arrayToPromise.call(<span class="hljs-keyword">this</span>, obj);
  <span class="hljs-keyword">if</span> (isObject(obj)) <span class="hljs-keyword">return</span> objectToPromise.call(<span class="hljs-keyword">this</span>, obj);
  <span class="hljs-keyword">return</span> obj;
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-40" id="section-40"></a>
</div>
<div class="dox">
<div class="summary">
<p>Convert a thunk to a promise.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Function</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Promise</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">thunkToPromise</span>(<span class="hljs-params">fn</span>) </span>{
  <span class="hljs-keyword">var</span> ctx = <span class="hljs-keyword">this</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) </span>{
    fn.call(ctx, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err, res</span>) </span>{
      <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">return</span> reject(err);
      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">2</span>) res = slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">1</span>);
      resolve(res);
    });
  });
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-41" id="section-41"></a>
</div>
<div class="dox">
<div class="summary">
<p>Convert an array of &quot;yieldables&quot; to a promise.
Uses <code>Promise.all()</code> internally.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">obj</span>
<span class="dox_type">Array</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Promise</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">arrayToPromise</span>(<span class="hljs-params">obj</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.all(obj.map(toPromise, <span class="hljs-keyword">this</span>));
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-42" id="section-42"></a>
</div>
<div class="dox">
<div class="summary">
<p>Convert an object of &quot;yieldables&quot; to a promise.
Uses <code>Promise.all()</code> internally.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">obj</span>
<span class="dox_type">Object</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Promise</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">objectToPromise</span>(<span class="hljs-params">obj</span>)</span>{
  <span class="hljs-keyword">var</span> results = <span class="hljs-keyword">new</span> obj.constructor();
  <span class="hljs-keyword">var</span> keys = <span class="hljs-built_in">Object</span>.keys(obj);
  <span class="hljs-keyword">var</span> promises = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; keys.length; i++) {
    <span class="hljs-keyword">var</span> key = keys[i];
    <span class="hljs-keyword">var</span> promise = toPromise.call(<span class="hljs-keyword">this</span>, obj[key]);
    <span class="hljs-keyword">if</span> (promise &amp;&amp; isPromise(promise)) defer(promise, key);
    <span class="hljs-keyword">else</span> results[key] = obj[key];
  }
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.all(promises).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> results;
  });

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">defer</span>(<span class="hljs-params">promise, key</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-43" id="section-43"></a>
</div>
<p>predefine the key in the result</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    results[key] = <span class="hljs-literal">undefined</span>;
    promises.push(promise.then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) </span>{
      results[key] = res;
    }));
  }
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-44" id="section-44"></a>
</div>
<div class="dox">
<div class="summary">
<p>Check if <code>obj</code> is a promise.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">obj</span>
<span class="dox_type">Object</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Boolean</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isPromise</span>(<span class="hljs-params">obj</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">'function'</span> == <span class="hljs-keyword">typeof</span> obj.then;
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-45" id="section-45"></a>
</div>
<div class="dox">
<div class="summary">
<p>Check if <code>obj</code> is a generator.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">obj</span>
<span class="dox_type">Mixed</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Boolean</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isGenerator</span>(<span class="hljs-params">obj</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">'function'</span> == <span class="hljs-keyword">typeof</span> obj.next &amp;&amp; <span class="hljs-string">'function'</span> == <span class="hljs-keyword">typeof</span> obj.throw;
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-46" id="section-46"></a>
</div>
<div class="dox">
<div class="summary">
<p>Check if <code>obj</code> is a generator function.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">obj</span>
<span class="dox_type">Mixed</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Boolean</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isGeneratorFunction</span>(<span class="hljs-params">obj</span>) </span>{
  <span class="hljs-keyword">var</span> <span class="hljs-keyword">constructor</span> = obj.<span class="hljs-keyword">constructor</span>;
  if (!<span class="hljs-keyword">constructor</span>) return false;
  if ('GeneratorFunction' === <span class="hljs-keyword">constructor</span>.name || 'GeneratorFunction' === <span class="hljs-keyword">constructor</span>.displayName) return true;
  return isGenerator(<span class="hljs-keyword">constructor</span>.prototype);
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-47" id="section-47"></a>
</div>
<div class="dox">
<div class="summary">
<p>Check for plain object.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">val</span>
<span class="dox_type">Mixed</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Boolean</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isObject</span>(<span class="hljs-params">val</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span> == val.constructor;
}

},{}],<span class="hljs-number">42</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-keyword">var</span> json = <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">JSON</span> !== <span class="hljs-string">'undefined'</span> ? <span class="hljs-built_in">JSON</span> : <span class="hljs-built_in">require</span>(<span class="hljs-string">'jsonify'</span>);

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">obj, opts</span>) </span>{
    <span class="hljs-keyword">if</span> (!opts) opts = {};
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> opts === <span class="hljs-string">'function'</span>) opts = { <span class="hljs-attr">cmp</span>: opts };
    <span class="hljs-keyword">var</span> space = opts.space || <span class="hljs-string">''</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> space === <span class="hljs-string">'number'</span>) space = <span class="hljs-built_in">Array</span>(space+<span class="hljs-number">1</span>).join(<span class="hljs-string">' '</span>);
    <span class="hljs-keyword">var</span> cycles = (<span class="hljs-keyword">typeof</span> opts.cycles === <span class="hljs-string">'boolean'</span>) ? opts.cycles : <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">var</span> replacer = opts.replacer || <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key, value</span>) </span>{ <span class="hljs-keyword">return</span> value; };

    <span class="hljs-keyword">var</span> cmp = opts.cmp &amp;&amp; (<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">f</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">node</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) </span>{
                <span class="hljs-keyword">var</span> aobj = { <span class="hljs-attr">key</span>: a, <span class="hljs-attr">value</span>: node[a] };
                <span class="hljs-keyword">var</span> bobj = { <span class="hljs-attr">key</span>: b, <span class="hljs-attr">value</span>: node[b] };
                <span class="hljs-keyword">return</span> f(aobj, bobj);
            };
        };
    })(opts.cmp);

    <span class="hljs-keyword">var</span> seen = [];
    <span class="hljs-keyword">return</span> (<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stringify</span> (<span class="hljs-params">parent, key, node, level</span>) </span>{
        <span class="hljs-keyword">var</span> indent = space ? (<span class="hljs-string">'\n'</span> + <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(level + <span class="hljs-number">1</span>).join(space)) : <span class="hljs-string">''</span>;
        <span class="hljs-keyword">var</span> colonSeparator = space ? <span class="hljs-string">': '</span> : <span class="hljs-string">':'</span>;

        <span class="hljs-keyword">if</span> (node &amp;&amp; node.toJSON &amp;&amp; <span class="hljs-keyword">typeof</span> node.toJSON === <span class="hljs-string">'function'</span>) {
            node = node.toJSON();
        }

        node = replacer.call(parent, key, node);

        <span class="hljs-keyword">if</span> (node === <span class="hljs-literal">undefined</span>) {
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> node !== <span class="hljs-string">'object'</span> || node === <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> json.stringify(node);
        }
        <span class="hljs-keyword">if</span> (isArray(node)) {
            <span class="hljs-keyword">var</span> out = [];
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; node.length; i++) {
                <span class="hljs-keyword">var</span> item = stringify(node, i, node[i], level+<span class="hljs-number">1</span>) || json.stringify(<span class="hljs-literal">null</span>);
                out.push(indent + space + item);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-string">'['</span> + out.join(<span class="hljs-string">','</span>) + indent + <span class="hljs-string">']'</span>;
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> (seen.indexOf(node) !== <span class="hljs-number">-1</span>) {
                <span class="hljs-keyword">if</span> (cycles) <span class="hljs-keyword">return</span> json.stringify(<span class="hljs-string">'__cycle__'</span>);
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Converting circular structure to JSON'</span>);
            }
            <span class="hljs-keyword">else</span> seen.push(node);

            <span class="hljs-keyword">var</span> keys = objectKeys(node).sort(cmp &amp;&amp; cmp(node));
            <span class="hljs-keyword">var</span> out = [];
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; keys.length; i++) {
                <span class="hljs-keyword">var</span> key = keys[i];
                <span class="hljs-keyword">var</span> value = stringify(node, key, node[key], level+<span class="hljs-number">1</span>);

                <span class="hljs-keyword">if</span>(!value) <span class="hljs-keyword">continue</span>;

                <span class="hljs-keyword">var</span> keyValue = json.stringify(key)
                    + colonSeparator
                    + value;
                ;
                out.push(indent + space + keyValue);
            }
            seen.splice(seen.indexOf(node), <span class="hljs-number">1</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-string">'{'</span> + out.join(<span class="hljs-string">','</span>) + indent + <span class="hljs-string">'}'</span>;
        }
    })({ <span class="hljs-string">''</span>: obj }, <span class="hljs-string">''</span>, obj, <span class="hljs-number">0</span>);
};

<span class="hljs-keyword">var</span> isArray = <span class="hljs-built_in">Array</span>.isArray || <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) </span>{
    <span class="hljs-keyword">return</span> {}.toString.call(x) === <span class="hljs-string">'[object Array]'</span>;
};

<span class="hljs-keyword">var</span> objectKeys = <span class="hljs-built_in">Object</span>.keys || <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">obj</span>) </span>{
    <span class="hljs-keyword">var</span> has = <span class="hljs-built_in">Object</span>.prototype.hasOwnProperty || <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span> };
    <span class="hljs-keyword">var</span> keys = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> obj) {
        <span class="hljs-keyword">if</span> (has.call(obj, key)) keys.push(key);
    }
    <span class="hljs-keyword">return</span> keys;
};

},{<span class="hljs-string">"jsonify"</span>:<span class="hljs-number">43</span>}],<span class="hljs-number">43</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
exports.parse = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./lib/parse'</span>);
exports.stringify = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./lib/stringify'</span>);

},{<span class="hljs-string">"./lib/parse"</span>:<span class="hljs-number">44</span>,<span class="hljs-string">"./lib/stringify"</span>:<span class="hljs-number">45</span>}],<span class="hljs-number">44</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-keyword">var</span> at, <span class="hljs-comment">// The index of the current character</span>
    ch, <span class="hljs-comment">// The current character</span>
    escapee = {
        <span class="hljs-string">'"'</span>:  <span class="hljs-string">'"'</span>,
        <span class="hljs-string">'\\'</span>: <span class="hljs-string">'\\'</span>,
        <span class="hljs-string">'/'</span>:  <span class="hljs-string">'/'</span>,
        <span class="hljs-attr">b</span>:    <span class="hljs-string">'\b'</span>,
        <span class="hljs-attr">f</span>:    <span class="hljs-string">'\f'</span>,
        <span class="hljs-attr">n</span>:    <span class="hljs-string">'\n'</span>,
        <span class="hljs-attr">r</span>:    <span class="hljs-string">'\r'</span>,
        <span class="hljs-attr">t</span>:    <span class="hljs-string">'\t'</span>
    },
    text,

    error = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">m</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-48" id="section-48"></a>
</div>
<p>Call error when something is wrong.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">throw</span> {
            <span class="hljs-attr">name</span>:    <span class="hljs-string">'SyntaxError'</span>,
            <span class="hljs-attr">message</span>: m,
            <span class="hljs-attr">at</span>:      at,
            <span class="hljs-attr">text</span>:    text
        };
    },
    
    next = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">c</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-49" id="section-49"></a>
</div>
<p>If a c parameter is provided, verify that it matches the current character.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (c &amp;&amp; c !== ch) {
            error(<span class="hljs-string">"Expected '"</span> + c + <span class="hljs-string">"' instead of '"</span> + ch + <span class="hljs-string">"'"</span>);
        }
        
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-50" id="section-50"></a>
</div>
<p>Get the next character. When there are no more characters,
return the empty string.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        
        ch = text.charAt(at);
        at += <span class="hljs-number">1</span>;
        <span class="hljs-keyword">return</span> ch;
    },
    
    number = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-51" id="section-51"></a>
</div>
<p>Parse a number value.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">var</span> number,
            string = <span class="hljs-string">''</span>;
        
        <span class="hljs-keyword">if</span> (ch === <span class="hljs-string">'-'</span>) {
            string = <span class="hljs-string">'-'</span>;
            next(<span class="hljs-string">'-'</span>);
        }
        <span class="hljs-keyword">while</span> (ch &gt;= <span class="hljs-string">'0'</span> &amp;&amp; ch &lt;= <span class="hljs-string">'9'</span>) {
            string += ch;
            next();
        }
        <span class="hljs-keyword">if</span> (ch === <span class="hljs-string">'.'</span>) {
            string += <span class="hljs-string">'.'</span>;
            <span class="hljs-keyword">while</span> (next() &amp;&amp; ch &gt;= <span class="hljs-string">'0'</span> &amp;&amp; ch &lt;= <span class="hljs-string">'9'</span>) {
                string += ch;
            }
        }
        <span class="hljs-keyword">if</span> (ch === <span class="hljs-string">'e'</span> || ch === <span class="hljs-string">'E'</span>) {
            string += ch;
            next();
            <span class="hljs-keyword">if</span> (ch === <span class="hljs-string">'-'</span> || ch === <span class="hljs-string">'+'</span>) {
                string += ch;
                next();
            }
            <span class="hljs-keyword">while</span> (ch &gt;= <span class="hljs-string">'0'</span> &amp;&amp; ch &lt;= <span class="hljs-string">'9'</span>) {
                string += ch;
                next();
            }
        }
        number = +string;
        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">isFinite</span>(number)) {
            error(<span class="hljs-string">"Bad number"</span>);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> number;
        }
    },
    
    string = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-52" id="section-52"></a>
</div>
<p>Parse a string value.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">var</span> hex,
            i,
            string = <span class="hljs-string">''</span>,
            uffff;
        
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-53" id="section-53"></a>
</div>
<p>When parsing for string values, we must look for &quot; and \ characters.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (ch === <span class="hljs-string">'"'</span>) {
            <span class="hljs-keyword">while</span> (next()) {
                <span class="hljs-keyword">if</span> (ch === <span class="hljs-string">'"'</span>) {
                    next();
                    <span class="hljs-keyword">return</span> string;
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ch === <span class="hljs-string">'\\'</span>) {
                    next();
                    <span class="hljs-keyword">if</span> (ch === <span class="hljs-string">'u'</span>) {
                        uffff = <span class="hljs-number">0</span>;
                        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">4</span>; i += <span class="hljs-number">1</span>) {
                            hex = <span class="hljs-built_in">parseInt</span>(next(), <span class="hljs-number">16</span>);
                            <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">isFinite</span>(hex)) {
                                <span class="hljs-keyword">break</span>;
                            }
                            uffff = uffff * <span class="hljs-number">16</span> + hex;
                        }
                        string += <span class="hljs-built_in">String</span>.fromCharCode(uffff);
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> escapee[ch] === <span class="hljs-string">'string'</span>) {
                        string += escapee[ch];
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-keyword">break</span>;
                    }
                } <span class="hljs-keyword">else</span> {
                    string += ch;
                }
            }
        }
        error(<span class="hljs-string">"Bad string"</span>);
    },

    white = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-54" id="section-54"></a>
</div>
<p>Skip whitespace.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
        <span class="hljs-keyword">while</span> (ch &amp;&amp; ch &lt;= <span class="hljs-string">' '</span>) {
            next();
        }
    },

    word = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-55" id="section-55"></a>
</div>
<p>true, false, or null.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
        <span class="hljs-keyword">switch</span> (ch) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">'t'</span>:
            next(<span class="hljs-string">'t'</span>);
            next(<span class="hljs-string">'r'</span>);
            next(<span class="hljs-string">'u'</span>);
            next(<span class="hljs-string">'e'</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'f'</span>:
            next(<span class="hljs-string">'f'</span>);
            next(<span class="hljs-string">'a'</span>);
            next(<span class="hljs-string">'l'</span>);
            next(<span class="hljs-string">'s'</span>);
            next(<span class="hljs-string">'e'</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'n'</span>:
            next(<span class="hljs-string">'n'</span>);
            next(<span class="hljs-string">'u'</span>);
            next(<span class="hljs-string">'l'</span>);
            next(<span class="hljs-string">'l'</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        error(<span class="hljs-string">"Unexpected '"</span> + ch + <span class="hljs-string">"'"</span>);
    },

    value,  <span class="hljs-comment">// Place holder for the value function.</span>

    array = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-56" id="section-56"></a>
</div>
<p>Parse an array value.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
        <span class="hljs-keyword">var</span> array = [];

        <span class="hljs-keyword">if</span> (ch === <span class="hljs-string">'['</span>) {
            next(<span class="hljs-string">'['</span>);
            white();
            <span class="hljs-keyword">if</span> (ch === <span class="hljs-string">']'</span>) {
                next(<span class="hljs-string">']'</span>);
                <span class="hljs-keyword">return</span> array;   <span class="hljs-comment">// empty array</span>
            }
            <span class="hljs-keyword">while</span> (ch) {
                array.push(value());
                white();
                <span class="hljs-keyword">if</span> (ch === <span class="hljs-string">']'</span>) {
                    next(<span class="hljs-string">']'</span>);
                    <span class="hljs-keyword">return</span> array;
                }
                next(<span class="hljs-string">','</span>);
                white();
            }
        }
        error(<span class="hljs-string">"Bad array"</span>);
    },

    object = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-57" id="section-57"></a>
</div>
<p>Parse an object value.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
        <span class="hljs-keyword">var</span> key,
            object = {};

        <span class="hljs-keyword">if</span> (ch === <span class="hljs-string">'{'</span>) {
            next(<span class="hljs-string">'{'</span>);
            white();
            <span class="hljs-keyword">if</span> (ch === <span class="hljs-string">'}'</span>) {
                next(<span class="hljs-string">'}'</span>);
                <span class="hljs-keyword">return</span> object;   <span class="hljs-comment">// empty object</span>
            }
            <span class="hljs-keyword">while</span> (ch) {
                key = string();
                white();
                next(<span class="hljs-string">':'</span>);
                <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.hasOwnProperty.call(object, key)) {
                    error(<span class="hljs-string">'Duplicate key "'</span> + key + <span class="hljs-string">'"'</span>);
                }
                object[key] = value();
                white();
                <span class="hljs-keyword">if</span> (ch === <span class="hljs-string">'}'</span>) {
                    next(<span class="hljs-string">'}'</span>);
                    <span class="hljs-keyword">return</span> object;
                }
                next(<span class="hljs-string">','</span>);
                white();
            }
        }
        error(<span class="hljs-string">"Bad object"</span>);
    };

value = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-58" id="section-58"></a>
</div>
<p>Parse a JSON value. It could be an object, an array, a string, a number,
or a word.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
    white();
    <span class="hljs-keyword">switch</span> (ch) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'{'</span>:
        <span class="hljs-keyword">return</span> object();
    <span class="hljs-keyword">case</span> <span class="hljs-string">'['</span>:
        <span class="hljs-keyword">return</span> array();
    <span class="hljs-keyword">case</span> <span class="hljs-string">'"'</span>:
        <span class="hljs-keyword">return</span> string();
    <span class="hljs-keyword">case</span> <span class="hljs-string">'-'</span>:
        <span class="hljs-keyword">return</span> number();
    <span class="hljs-keyword">default</span>:
        <span class="hljs-keyword">return</span> ch &gt;= <span class="hljs-string">'0'</span> &amp;&amp; ch &lt;= <span class="hljs-string">'9'</span> ? number() : word();
    }
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-59" id="section-59"></a>
</div>
<p>Return the json_parse function. It will have access to all of the above
functions and variables.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">source, reviver</span>) </span>{
    <span class="hljs-keyword">var</span> result;
    
    text = source;
    at = <span class="hljs-number">0</span>;
    ch = <span class="hljs-string">' '</span>;
    result = value();
    white();
    <span class="hljs-keyword">if</span> (ch) {
        error(<span class="hljs-string">"Syntax error"</span>);
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-60" id="section-60"></a>
</div>
<p>If there is a reviver function, we recursively walk the new structure,
passing each name/value pair to the reviver function for possible
transformation, starting with a temporary root object that holds the result
in an empty key. If there is not a reviver function, we simply return the
result.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> reviver === <span class="hljs-string">'function'</span> ? (<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">walk</span>(<span class="hljs-params">holder, key</span>) </span>{
        <span class="hljs-keyword">var</span> k, v, value = holder[key];
        <span class="hljs-keyword">if</span> (value &amp;&amp; <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'object'</span>) {
            <span class="hljs-keyword">for</span> (k <span class="hljs-keyword">in</span> value) {
                <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.prototype.hasOwnProperty.call(value, k)) {
                    v = walk(value, k);
                    <span class="hljs-keyword">if</span> (v !== <span class="hljs-literal">undefined</span>) {
                        value[k] = v;
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-keyword">delete</span> value[k];
                    }
                }
            }
        }
        <span class="hljs-keyword">return</span> reviver.call(holder, key, value);
    }({<span class="hljs-string">''</span>: result}, <span class="hljs-string">''</span>)) : result;
};

},{}],<span class="hljs-number">45</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-keyword">var</span> cx = <span class="hljs-regexp">/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g</span>,
    escapable = <span class="hljs-regexp">/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g</span>,
    gap,
    indent,
    meta = {    <span class="hljs-comment">// table of character substitutions</span>
        <span class="hljs-string">'\b'</span>: <span class="hljs-string">'\\b'</span>,
        <span class="hljs-string">'\t'</span>: <span class="hljs-string">'\\t'</span>,
        <span class="hljs-string">'\n'</span>: <span class="hljs-string">'\\n'</span>,
        <span class="hljs-string">'\f'</span>: <span class="hljs-string">'\\f'</span>,
        <span class="hljs-string">'\r'</span>: <span class="hljs-string">'\\r'</span>,
        <span class="hljs-string">'"'</span> : <span class="hljs-string">'\\"'</span>,
        <span class="hljs-string">'\\'</span>: <span class="hljs-string">'\\\\'</span>
    },
    rep;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">quote</span>(<span class="hljs-params">string</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-61" id="section-61"></a>
</div>
<p>If the string contains no control characters, no quote characters, and no
backslash characters, then we can safely slap some quotes around it.
Otherwise we must also replace the offending characters with safe escape
sequences.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    
    escapable.lastIndex = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span> escapable.test(string) ? <span class="hljs-string">'"'</span> + string.replace(escapable, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a</span>) </span>{
        <span class="hljs-keyword">var</span> c = meta[a];
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> c === <span class="hljs-string">'string'</span> ? c :
            <span class="hljs-string">'\\u'</span> + (<span class="hljs-string">'0000'</span> + a.charCodeAt(<span class="hljs-number">0</span>).toString(<span class="hljs-number">16</span>)).slice(<span class="hljs-number">-4</span>);
    }) + <span class="hljs-string">'"'</span> : <span class="hljs-string">'"'</span> + string + <span class="hljs-string">'"'</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">str</span>(<span class="hljs-params">key, holder</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-62" id="section-62"></a>
</div>
<p>Produce a string from holder[key].</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">var</span> i,          <span class="hljs-comment">// The loop counter.</span>
        k,          <span class="hljs-comment">// The member key.</span>
        v,          <span class="hljs-comment">// The member value.</span>
        length,
        mind = gap,
        partial,
        value = holder[key];
    
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-63" id="section-63"></a>
</div>
<p>If the value has a toJSON method, call it to obtain a replacement value.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (value &amp;&amp; <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'object'</span> &amp;&amp;
            <span class="hljs-keyword">typeof</span> value.toJSON === <span class="hljs-string">'function'</span>) {
        value = value.toJSON(key);
    }
    
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-64" id="section-64"></a>
</div>
<p>If we were called with a replacer function, then call the replacer to
obtain a replacement value.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> rep === <span class="hljs-string">'function'</span>) {
        value = rep.call(holder, key, value);
    }
    
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-65" id="section-65"></a>
</div>
<p>What happens next depends on the value's type.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">typeof</span> value) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">'string'</span>:
            <span class="hljs-keyword">return</span> quote(value);
        
        <span class="hljs-keyword">case</span> <span class="hljs-string">'number'</span>:
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-66" id="section-66"></a>
</div>
<p>JSON numbers must be finite. Encode non-finite numbers as null.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">return</span> <span class="hljs-built_in">isFinite</span>(value) ? <span class="hljs-built_in">String</span>(value) : <span class="hljs-string">'null'</span>;
        
        <span class="hljs-keyword">case</span> <span class="hljs-string">'boolean'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'null'</span>:
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-67" id="section-67"></a>
</div>
<p>If the value is a boolean or null, convert it to a string. Note:
typeof null does not produce 'null'. The case is included here in
the remote chance that this gets fixed someday.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">return</span> <span class="hljs-built_in">String</span>(value);
            
        <span class="hljs-keyword">case</span> <span class="hljs-string">'object'</span>:
            <span class="hljs-keyword">if</span> (!value) <span class="hljs-keyword">return</span> <span class="hljs-string">'null'</span>;
            gap += indent;
            partial = [];
            
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-68" id="section-68"></a>
</div>
<p>Array.isArray</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.prototype.toString.apply(value) === <span class="hljs-string">'[object Array]'</span>) {
                length = value.length;
                <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; length; i += <span class="hljs-number">1</span>) {
                    partial[i] = str(i, value) || <span class="hljs-string">'null'</span>;
                }
                
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-69" id="section-69"></a>
</div>
<p>Join all of the elements together, separated with commas, and
wrap them in brackets.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                v = partial.length === <span class="hljs-number">0</span> ? <span class="hljs-string">'[]'</span> : gap ?
                    <span class="hljs-string">'[\n'</span> + gap + partial.join(<span class="hljs-string">',\n'</span> + gap) + <span class="hljs-string">'\n'</span> + mind + <span class="hljs-string">']'</span> :
                    <span class="hljs-string">'['</span> + partial.join(<span class="hljs-string">','</span>) + <span class="hljs-string">']'</span>;
                gap = mind;
                <span class="hljs-keyword">return</span> v;
            }
            
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-70" id="section-70"></a>
</div>
<p>If the replacer is an array, use it to select the members to be
stringified.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (rep &amp;&amp; <span class="hljs-keyword">typeof</span> rep === <span class="hljs-string">'object'</span>) {
                length = rep.length;
                <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; length; i += <span class="hljs-number">1</span>) {
                    k = rep[i];
                    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> k === <span class="hljs-string">'string'</span>) {
                        v = str(k, value);
                        <span class="hljs-keyword">if</span> (v) {
                            partial.push(quote(k) + (gap ? <span class="hljs-string">': '</span> : <span class="hljs-string">':'</span>) + v);
                        }
                    }
                }
            }
            <span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-71" id="section-71"></a>
</div>
<p>Otherwise, iterate through all of the keys in the object.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                <span class="hljs-keyword">for</span> (k <span class="hljs-keyword">in</span> value) {
                    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.prototype.hasOwnProperty.call(value, k)) {
                        v = str(k, value);
                        <span class="hljs-keyword">if</span> (v) {
                            partial.push(quote(k) + (gap ? <span class="hljs-string">': '</span> : <span class="hljs-string">':'</span>) + v);
                        }
                    }
                }
            }
            
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-72" id="section-72"></a>
</div>
<p>Join all of the member texts together, separated with commas,
and wrap them in braces.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
        v = partial.length === <span class="hljs-number">0</span> ? <span class="hljs-string">'{}'</span> : gap ?
            <span class="hljs-string">'{\n'</span> + gap + partial.join(<span class="hljs-string">',\n'</span> + gap) + <span class="hljs-string">'\n'</span> + mind + <span class="hljs-string">'}'</span> :
            <span class="hljs-string">'{'</span> + partial.join(<span class="hljs-string">','</span>) + <span class="hljs-string">'}'</span>;
        gap = mind;
        <span class="hljs-keyword">return</span> v;
    }
}

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">value, replacer, space</span>) </span>{
    <span class="hljs-keyword">var</span> i;
    gap = <span class="hljs-string">''</span>;
    indent = <span class="hljs-string">''</span>;
    
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-73" id="section-73"></a>
</div>
<p>If the space parameter is a number, make an indent string containing that
many spaces.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> space === <span class="hljs-string">'number'</span>) {
        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; space; i += <span class="hljs-number">1</span>) {
            indent += <span class="hljs-string">' '</span>;
        }
    }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-74" id="section-74"></a>
</div>
<p>If the space parameter is a string, it will be used as the indent string.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> space === <span class="hljs-string">'string'</span>) {
        indent = space;
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-75" id="section-75"></a>
</div>
<p>If there is a replacer, it must be a function or an array.
Otherwise, throw an error.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    rep = replacer;
    <span class="hljs-keyword">if</span> (replacer &amp;&amp; <span class="hljs-keyword">typeof</span> replacer !== <span class="hljs-string">'function'</span>
    &amp;&amp; (<span class="hljs-keyword">typeof</span> replacer !== <span class="hljs-string">'object'</span> || <span class="hljs-keyword">typeof</span> replacer.length !== <span class="hljs-string">'number'</span>)) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'JSON.stringify'</span>);
    }
    
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-76" id="section-76"></a>
</div>
<p>Make a fake root object containing our value under the key of ''.
Return the result of stringifying the value.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">return</span> str(<span class="hljs-string">''</span>, {<span class="hljs-string">''</span>: value});
};

},{}],<span class="hljs-number">46</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">global</span>)</span>{
<span class="hljs-comment">/*! https://mths.be/punycode v1.4.1 by @mathias */</span>
;(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">root</span>) </span>{

	<span class="hljs-comment">/** Detect free variables */</span>
	<span class="hljs-keyword">var</span> freeExports = <span class="hljs-keyword">typeof</span> exports == <span class="hljs-string">'object'</span> &amp;&amp; exports &amp;&amp;
		!exports.nodeType &amp;&amp; exports;
	<span class="hljs-keyword">var</span> freeModule = <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">module</span> == <span class="hljs-string">'object'</span> &amp;&amp; <span class="hljs-built_in">module</span> &amp;&amp;
		!<span class="hljs-built_in">module</span>.nodeType &amp;&amp; <span class="hljs-built_in">module</span>;
	<span class="hljs-keyword">var</span> freeGlobal = <span class="hljs-keyword">typeof</span> global == <span class="hljs-string">'object'</span> &amp;&amp; global;
	<span class="hljs-keyword">if</span> (
		freeGlobal.global === freeGlobal ||
		freeGlobal.window === freeGlobal ||
		freeGlobal.self === freeGlobal
	) {
		root = freeGlobal;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-77" id="section-77"></a>
</div>
<div class="dox">
<div class="summary">
<p>The <code>punycode</code> object.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Type</div>
<div class="dox_tag_detail">
<span class="dox_type">bjec</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">	<span class="hljs-keyword">var</span> punycode,

	<span class="hljs-comment">/** Highest positive signed 32-bit float value */</span>
	maxInt = <span class="hljs-number">2147483647</span>, <span class="hljs-comment">// aka. 0x7FFFFFFF or 2^31-1</span>

	<span class="hljs-comment">/** Bootstring parameters */</span>
	base = <span class="hljs-number">36</span>,
	tMin = <span class="hljs-number">1</span>,
	tMax = <span class="hljs-number">26</span>,
	skew = <span class="hljs-number">38</span>,
	damp = <span class="hljs-number">700</span>,
	initialBias = <span class="hljs-number">72</span>,
	initialN = <span class="hljs-number">128</span>, <span class="hljs-comment">// 0x80</span>
	delimiter = <span class="hljs-string">'-'</span>, <span class="hljs-comment">// '\x2D'</span>

	<span class="hljs-comment">/** Regular expressions */</span>
	regexPunycode = <span class="hljs-regexp">/^xn--/</span>,
	regexNonASCII = <span class="hljs-regexp">/[^\x20-\x7E]/</span>, <span class="hljs-comment">// unprintable ASCII chars + non-ASCII chars</span>
	regexSeparators = <span class="hljs-regexp">/[\x2E\u3002\uFF0E\uFF61]/g</span>, <span class="hljs-comment">// RFC 3490 separators</span>

	<span class="hljs-comment">/** Error messages */</span>
	errors = {
		<span class="hljs-string">'overflow'</span>: <span class="hljs-string">'Overflow: input needs wider integers to process'</span>,
		<span class="hljs-string">'not-basic'</span>: <span class="hljs-string">'Illegal input &gt;= 0x80 (not a basic code point)'</span>,
		<span class="hljs-string">'invalid-input'</span>: <span class="hljs-string">'Invalid input'</span>
	},

	<span class="hljs-comment">/** Convenience shortcuts */</span>
	baseMinusTMin = base - tMin,
	floor = <span class="hljs-built_in">Math</span>.floor,
	stringFromCharCode = <span class="hljs-built_in">String</span>.fromCharCode,

	<span class="hljs-comment">/** Temporary variable */</span>
	key;

	<span class="hljs-comment">/*--------------------------------------------------------------------------*/</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-78" id="section-78"></a>
</div>
<div class="dox">
<div class="summary">
<p>A generic error utility function.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">type</span>
<span class="dox_type">String</span>
<span>The error type.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">error</span>(<span class="hljs-params">type</span>) </span>{
		<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RangeError</span>(errors[type]);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-79" id="section-79"></a>
</div>
<div class="dox">
<div class="summary">
<p>A generic <code>Array#map</code> utility function.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span class="dox_type">Array</span>
<span>The array to iterate over.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>The function that gets called for every array item.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map</span>(<span class="hljs-params">array, fn</span>) </span>{
		<span class="hljs-keyword">var</span> length = array.length;
		<span class="hljs-keyword">var</span> result = [];
		<span class="hljs-keyword">while</span> (length--) {
			result[length] = fn(array[length]);
		}
		<span class="hljs-keyword">return</span> result;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-80" id="section-80"></a>
</div>
<div class="dox">
<div class="summary">
<p>A simple <code>Array#map</code>-like wrapper to work with domain name strings or email
addresses.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">domain</span>
<span class="dox_type">String</span>
<span>The domain name or email address.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>The function that gets called for every character.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mapDomain</span>(<span class="hljs-params">string, fn</span>) </span>{
		<span class="hljs-keyword">var</span> parts = string.split(<span class="hljs-string">'@'</span>);
		<span class="hljs-keyword">var</span> result = <span class="hljs-string">''</span>;
		<span class="hljs-keyword">if</span> (parts.length &gt; <span class="hljs-number">1</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-81" id="section-81"></a>
</div>
<p>In email addresses, only the domain name should be punycoded. Leave
the local part (i.e. everything up to <code>@</code>) intact.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">			result = parts[<span class="hljs-number">0</span>] + <span class="hljs-string">'@'</span>;
			string = parts[<span class="hljs-number">1</span>];
		}
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-82" id="section-82"></a>
</div>
<p>Avoid <code>split(regex)</code> for IE8 compatibility. See #17.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">		string = string.replace(regexSeparators, <span class="hljs-string">'\x2E'</span>);
		<span class="hljs-keyword">var</span> labels = string.split(<span class="hljs-string">'.'</span>);
		<span class="hljs-keyword">var</span> encoded = map(labels, fn).join(<span class="hljs-string">'.'</span>);
		<span class="hljs-keyword">return</span> result + encoded;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-83" id="section-83"></a>
</div>
<div class="dox">
<div class="summary">
<p>Creates an array containing the numeric code points of each Unicode
character in the string. While JavaScript uses UCS-2 internally,
this function will convert a pair of surrogate halves (each of which
UCS-2 exposes as separate characters) into a single code point,
matching UTF-16.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">`punycode.ucs2.encode`</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<a href="&lt;https://mathiasbynens.be/notes/javascript-encoding&gt;">&lt;https://mathiasbynens.be/notes/javascript-encoding&gt;</a>
</div>
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span class="dox_type">String</span>
<span>The Unicode input string (UCS-2).
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ucs2decode</span>(<span class="hljs-params">string</span>) </span>{
		<span class="hljs-keyword">var</span> output = [],
		    counter = <span class="hljs-number">0</span>,
		    length = string.length,
		    value,
		    extra;
		<span class="hljs-keyword">while</span> (counter &lt; length) {
			value = string.charCodeAt(counter++);
			<span class="hljs-keyword">if</span> (value &gt;= <span class="hljs-number">0xD800</span> &amp;&amp; value &lt;= <span class="hljs-number">0xDBFF</span> &amp;&amp; counter &lt; length) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-84" id="section-84"></a>
</div>
<p>high surrogate, and there is a next character</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">				extra = string.charCodeAt(counter++);
				<span class="hljs-keyword">if</span> ((extra &amp; <span class="hljs-number">0xFC00</span>) == <span class="hljs-number">0xDC00</span>) { <span class="hljs-comment">// low surrogate</span>
					output.push(((value &amp; <span class="hljs-number">0x3FF</span>) &lt;&lt; <span class="hljs-number">10</span>) + (extra &amp; <span class="hljs-number">0x3FF</span>) + <span class="hljs-number">0x10000</span>);
				} <span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-85" id="section-85"></a>
</div>
<p>unmatched surrogate; only append this code unit, in case the next
code unit is the high surrogate of a surrogate pair</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">					output.push(value);
					counter--;
				}
			} <span class="hljs-keyword">else</span> {
				output.push(value);
			}
		}
		<span class="hljs-keyword">return</span> output;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-86" id="section-86"></a>
</div>
<div class="dox">
<div class="summary">
<p>Creates a string based on an array of numeric code points.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">`punycode.ucs2.decode`</span>
</div>
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">codePoints</span>
<span class="dox_type">Array</span>
<span>The array of numeric code points.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ucs2encode</span>(<span class="hljs-params">array</span>) </span>{
		<span class="hljs-keyword">return</span> map(array, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
			<span class="hljs-keyword">var</span> output = <span class="hljs-string">''</span>;
			<span class="hljs-keyword">if</span> (value &gt; <span class="hljs-number">0xFFFF</span>) {
				value -= <span class="hljs-number">0x10000</span>;
				output += stringFromCharCode(value &gt;&gt;&gt; <span class="hljs-number">10</span> &amp; <span class="hljs-number">0x3FF</span> | <span class="hljs-number">0xD800</span>);
				value = <span class="hljs-number">0xDC00</span> | value &amp; <span class="hljs-number">0x3FF</span>;
			}
			output += stringFromCharCode(value);
			<span class="hljs-keyword">return</span> output;
		}).join(<span class="hljs-string">''</span>);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-87" id="section-87"></a>
</div>
<div class="dox">
<div class="summary">
<p>Converts a basic code point into a digit/integer.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">`digitToBasic()`</span>
</div>
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">codePoint</span>
<span class="dox_type">Number</span>
<span>The basic numeric code point value.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">basicToDigit</span>(<span class="hljs-params">codePoint</span>) </span>{
		<span class="hljs-keyword">if</span> (codePoint - <span class="hljs-number">48</span> &lt; <span class="hljs-number">10</span>) {
			<span class="hljs-keyword">return</span> codePoint - <span class="hljs-number">22</span>;
		}
		<span class="hljs-keyword">if</span> (codePoint - <span class="hljs-number">65</span> &lt; <span class="hljs-number">26</span>) {
			<span class="hljs-keyword">return</span> codePoint - <span class="hljs-number">65</span>;
		}
		<span class="hljs-keyword">if</span> (codePoint - <span class="hljs-number">97</span> &lt; <span class="hljs-number">26</span>) {
			<span class="hljs-keyword">return</span> codePoint - <span class="hljs-number">97</span>;
		}
		<span class="hljs-keyword">return</span> base;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-88" id="section-88"></a>
</div>
<div class="dox">
<div class="summary">
<p>Converts a digit/integer into a basic code point.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">`basicToDigit()`</span>
</div>
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">digit</span>
<span class="dox_type">Number</span>
<span>The numeric value of a basic code point.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">digitToBasic</span>(<span class="hljs-params">digit, flag</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-89" id="section-89"></a>
</div>
<p>0..25 map to ASCII a..z or A..Z
26..35 map to ASCII 0..9</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">		<span class="hljs-keyword">return</span> digit + <span class="hljs-number">22</span> + <span class="hljs-number">75</span> * (digit &lt; <span class="hljs-number">26</span>) - ((flag != <span class="hljs-number">0</span>) &lt;&lt; <span class="hljs-number">5</span>);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-90" id="section-90"></a>
</div>
<div class="dox">
<div class="summary">
<p>Bias adaptation function as per section 3.4 of RFC 3492.
https://tools.ietf.org/html/rfc3492#section-3.4</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">adapt</span>(<span class="hljs-params">delta, numPoints, firstTime</span>) </span>{
		<span class="hljs-keyword">var</span> k = <span class="hljs-number">0</span>;
		delta = firstTime ? floor(delta / damp) : delta &gt;&gt; <span class="hljs-number">1</span>;
		delta += floor(delta / numPoints);
		<span class="hljs-keyword">for</span> (<span class="hljs-comment">/* no initialization */</span>; delta &gt; baseMinusTMin * tMax &gt;&gt; <span class="hljs-number">1</span>; k += base) {
			delta = floor(delta / baseMinusTMin);
		}
		<span class="hljs-keyword">return</span> floor(k + (baseMinusTMin + <span class="hljs-number">1</span>) * delta / (delta + skew));
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-91" id="section-91"></a>
</div>
<div class="dox">
<div class="summary">
<p>Converts a Punycode string of ASCII-only symbols to a string of Unicode
symbols.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">input</span>
<span class="dox_type">String</span>
<span>The Punycode string of ASCII-only symbols.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">decode</span>(<span class="hljs-params">input</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-92" id="section-92"></a>
</div>
<p>Don't use UCS-2</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">		<span class="hljs-keyword">var</span> output = [],
		    inputLength = input.length,
		    out,
		    i = <span class="hljs-number">0</span>,
		    n = initialN,
		    bias = initialBias,
		    basic,
		    j,
		    index,
		    oldi,
		    w,
		    k,
		    digit,
		    t,
		    <span class="hljs-comment">/** Cached calculation results */</span>
		    baseMinusT;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-93" id="section-93"></a>
</div>
<p>Handle the basic code points: let <code>basic</code> be the number of input code
points before the last delimiter, or <code>0</code> if there is none, then copy
the first basic code points to the output.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
		basic = input.lastIndexOf(delimiter);
		<span class="hljs-keyword">if</span> (basic &lt; <span class="hljs-number">0</span>) {
			basic = <span class="hljs-number">0</span>;
		}

		<span class="hljs-keyword">for</span> (j = <span class="hljs-number">0</span>; j &lt; basic; ++j) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-94" id="section-94"></a>
</div>
<p>if it's not a basic code point</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">			<span class="hljs-keyword">if</span> (input.charCodeAt(j) &gt;= <span class="hljs-number">0x80</span>) {
				error(<span class="hljs-string">'not-basic'</span>);
			}
			output.push(input.charCodeAt(j));
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-95" id="section-95"></a>
</div>
<p>Main decoding loop: start just after the last delimiter if any basic code
points were copied; start at the beginning otherwise.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
		<span class="hljs-keyword">for</span> (index = basic &gt; <span class="hljs-number">0</span> ? basic + <span class="hljs-number">1</span> : <span class="hljs-number">0</span>; index &lt; inputLength; <span class="hljs-comment">/* no final expression */</span>) {

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-96" id="section-96"></a>
</div>
<p><code>index</code> is the index of the next character to be consumed.
Decode a generalized variable-length integer into <code>delta</code>,
which gets added to <code>i</code>. The overflow checking is easier
if we increase <code>i</code> as we go, then subtract off its starting
value at the end to obtain <code>delta</code>.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">			<span class="hljs-keyword">for</span> (oldi = i, w = <span class="hljs-number">1</span>, k = base; <span class="hljs-comment">/* no condition */</span>; k += base) {

				<span class="hljs-keyword">if</span> (index &gt;= inputLength) {
					error(<span class="hljs-string">'invalid-input'</span>);
				}

				digit = basicToDigit(input.charCodeAt(index++));

				<span class="hljs-keyword">if</span> (digit &gt;= base || digit &gt; floor((maxInt - i) / w)) {
					error(<span class="hljs-string">'overflow'</span>);
				}

				i += digit * w;
				t = k &lt;= bias ? tMin : (k &gt;= bias + tMax ? tMax : k - bias);

				<span class="hljs-keyword">if</span> (digit &lt; t) {
					<span class="hljs-keyword">break</span>;
				}

				baseMinusT = base - t;
				<span class="hljs-keyword">if</span> (w &gt; floor(maxInt / baseMinusT)) {
					error(<span class="hljs-string">'overflow'</span>);
				}

				w *= baseMinusT;

			}

			out = output.length + <span class="hljs-number">1</span>;
			bias = adapt(i - oldi, out, oldi == <span class="hljs-number">0</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-97" id="section-97"></a>
</div>
<p><code>i</code> was supposed to wrap around from <code>out</code> to <code>0</code>,
incrementing <code>n</code> each time, so we'll fix that now:</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">			<span class="hljs-keyword">if</span> (floor(i / out) &gt; maxInt - n) {
				error(<span class="hljs-string">'overflow'</span>);
			}

			n += floor(i / out);
			i %= out;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-98" id="section-98"></a>
</div>
<p>Insert <code>n</code> at position <code>i</code> of the output</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">			output.splice(i++, <span class="hljs-number">0</span>, n);

		}

		<span class="hljs-keyword">return</span> ucs2encode(output);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-99" id="section-99"></a>
</div>
<div class="dox">
<div class="summary">
<p>Converts a string of Unicode symbols (e.g. a domain name label) to a
Punycode string of ASCII-only symbols.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">input</span>
<span class="dox_type">String</span>
<span>The string of Unicode symbols.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">encode</span>(<span class="hljs-params">input</span>) </span>{
		<span class="hljs-keyword">var</span> n,
		    delta,
		    handledCPCount,
		    basicLength,
		    bias,
		    j,
		    m,
		    q,
		    k,
		    t,
		    currentValue,
		    output = [],
		    <span class="hljs-comment">/** `inputLength` will hold the number of code points in `input`. */</span>
		    inputLength,
		    <span class="hljs-comment">/** Cached calculation results */</span>
		    handledCPCountPlusOne,
		    baseMinusT,
		    qMinusT;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-100" id="section-100"></a>
</div>
<p>Convert the input in UCS-2 to Unicode</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">		input = ucs2decode(input);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-101" id="section-101"></a>
</div>
<p>Cache the length</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">		inputLength = input.length;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-102" id="section-102"></a>
</div>
<p>Initialize the state</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">		n = initialN;
		delta = <span class="hljs-number">0</span>;
		bias = initialBias;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-103" id="section-103"></a>
</div>
<p>Handle the basic code points</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">		<span class="hljs-keyword">for</span> (j = <span class="hljs-number">0</span>; j &lt; inputLength; ++j) {
			currentValue = input[j];
			<span class="hljs-keyword">if</span> (currentValue &lt; <span class="hljs-number">0x80</span>) {
				output.push(stringFromCharCode(currentValue));
			}
		}

		handledCPCount = basicLength = output.length;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-104" id="section-104"></a>
</div>
<p><code>handledCPCount</code> is the number of code points that have been handled;
<code>basicLength</code> is the number of basic code points.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-105" id="section-105"></a>
</div>
<p>Finish the basic string - if it is not empty - with a delimiter</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">		<span class="hljs-keyword">if</span> (basicLength) {
			output.push(delimiter);
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-106" id="section-106"></a>
</div>
<p>Main encoding loop:</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">		<span class="hljs-keyword">while</span> (handledCPCount &lt; inputLength) {

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-107" id="section-107"></a>
</div>
<p>All non-basic code points &lt; n have been handled already. Find the next
larger one:</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">			<span class="hljs-keyword">for</span> (m = maxInt, j = <span class="hljs-number">0</span>; j &lt; inputLength; ++j) {
				currentValue = input[j];
				<span class="hljs-keyword">if</span> (currentValue &gt;= n &amp;&amp; currentValue &lt; m) {
					m = currentValue;
				}
			}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-108" id="section-108"></a>
</div>
<p>Increase <code>delta</code> enough to advance the decoder's &lt;n,i&gt; state to &lt;m,0&gt;,
but guard against overflow</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">			handledCPCountPlusOne = handledCPCount + <span class="hljs-number">1</span>;
			<span class="hljs-keyword">if</span> (m - n &gt; floor((maxInt - delta) / handledCPCountPlusOne)) {
				error(<span class="hljs-string">'overflow'</span>);
			}

			delta += (m - n) * handledCPCountPlusOne;
			n = m;

			<span class="hljs-keyword">for</span> (j = <span class="hljs-number">0</span>; j &lt; inputLength; ++j) {
				currentValue = input[j];

				<span class="hljs-keyword">if</span> (currentValue &lt; n &amp;&amp; ++delta &gt; maxInt) {
					error(<span class="hljs-string">'overflow'</span>);
				}

				<span class="hljs-keyword">if</span> (currentValue == n) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-109" id="section-109"></a>
</div>
<p>Represent delta as a generalized variable-length integer</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">					<span class="hljs-keyword">for</span> (q = delta, k = base; <span class="hljs-comment">/* no condition */</span>; k += base) {
						t = k &lt;= bias ? tMin : (k &gt;= bias + tMax ? tMax : k - bias);
						<span class="hljs-keyword">if</span> (q &lt; t) {
							<span class="hljs-keyword">break</span>;
						}
						qMinusT = q - t;
						baseMinusT = base - t;
						output.push(
							stringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, <span class="hljs-number">0</span>))
						);
						q = floor(qMinusT / baseMinusT);
					}

					output.push(stringFromCharCode(digitToBasic(q, <span class="hljs-number">0</span>)));
					bias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);
					delta = <span class="hljs-number">0</span>;
					++handledCPCount;
				}
			}

			++delta;
			++n;

		}
		<span class="hljs-keyword">return</span> output.join(<span class="hljs-string">''</span>);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-110" id="section-110"></a>
</div>
<div class="dox">
<div class="summary">
<p>Converts a Punycode string representing a domain name or an email address
to Unicode. Only the Punycoded parts of the input will be converted, i.e.
it doesn't matter if you call it on a string that has already been
converted to Unicode.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">input</span>
<span class="dox_type">String</span>
<span>The Punycoded domain name or email address to convert to Unicode.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toUnicode</span>(<span class="hljs-params">input</span>) </span>{
		<span class="hljs-keyword">return</span> mapDomain(input, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">string</span>) </span>{
			<span class="hljs-keyword">return</span> regexPunycode.test(string)
				? decode(string.slice(<span class="hljs-number">4</span>).toLowerCase())
				: string;
		});
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-111" id="section-111"></a>
</div>
<div class="dox">
<div class="summary">
<p>Converts a Unicode string representing a domain name or an email address to
Punycode. Only the non-ASCII parts of the domain name will be converted,
i.e. it doesn't matter if you call it with a domain that's already in
ASCII.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">input</span>
<span class="dox_type">String</span>
<span>The domain name or email address to convert, as a Unicode string.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toASCII</span>(<span class="hljs-params">input</span>) </span>{
		<span class="hljs-keyword">return</span> mapDomain(input, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">string</span>) </span>{
			<span class="hljs-keyword">return</span> regexNonASCII.test(string)
				? <span class="hljs-string">'xn--'</span> + encode(string)
				: string;
		});
	}

	<span class="hljs-comment">/*--------------------------------------------------------------------------*/</span>

	<span class="hljs-comment">/** Define the public API */</span>
	punycode = {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-112" id="section-112"></a>
</div>
<div class="dox">
<div class="summary">
<p>A string representing the current Punycode.js version number.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Type</div>
<div class="dox_tag_detail">
<span class="dox_type">trin</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">		<span class="hljs-string">'version'</span>: <span class="hljs-string">'1.4.1'</span>,
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-113" id="section-113"></a>
</div>
<div class="dox">
<div class="summary">
<p>An object of methods to convert from JavaScript's internal character
representation (UCS-2) to Unicode code points, and back.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<a href="&lt;https://mathiasbynens.be/notes/javascript-encoding&gt;">&lt;https://mathiasbynens.be/notes/javascript-encoding&gt;</a>
</div>
<div class="dox_tag_title">Type</div>
<div class="dox_tag_detail">
<span class="dox_type">bjec</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">		<span class="hljs-string">'ucs2'</span>: {
			<span class="hljs-string">'decode'</span>: ucs2decode,
			<span class="hljs-string">'encode'</span>: ucs2encode
		},
		<span class="hljs-string">'decode'</span>: decode,
		<span class="hljs-string">'encode'</span>: encode,
		<span class="hljs-string">'toASCII'</span>: toASCII,
		<span class="hljs-string">'toUnicode'</span>: toUnicode
	};

	<span class="hljs-comment">/** Expose `punycode` */</span>
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-114" id="section-114"></a>
</div>
<p>Some AMD build optimizers, like r.js, check for specific condition patterns
like the following:</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	<span class="hljs-keyword">if</span> (
		<span class="hljs-keyword">typeof</span> define == <span class="hljs-string">'function'</span> &amp;&amp;
		<span class="hljs-keyword">typeof</span> define.amd == <span class="hljs-string">'object'</span> &amp;&amp;
		define.amd
	) {
		define(<span class="hljs-string">'punycode'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">return</span> punycode;
		});
	} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (freeExports &amp;&amp; freeModule) {
		<span class="hljs-keyword">if</span> (<span class="hljs-built_in">module</span>.exports == freeExports) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-115" id="section-115"></a>
</div>
<p>in Node.js, io.js, or RingoJS v0.8.0+</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">			freeModule.exports = punycode;
		} <span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-116" id="section-116"></a>
</div>
<p>in Narwhal or RingoJS v0.7.0-</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">			<span class="hljs-keyword">for</span> (key <span class="hljs-keyword">in</span> punycode) {
				punycode.hasOwnProperty(key) &amp;&amp; (freeExports[key] = punycode[key]);
			}
		}
	} <span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-117" id="section-117"></a>
</div>
<p>in Rhino or a web browser</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">		root.punycode = punycode;
	}

}(<span class="hljs-keyword">this</span>));

}).call(<span class="hljs-keyword">this</span>,<span class="hljs-keyword">typeof</span> global !== <span class="hljs-string">"undefined"</span> ? global : <span class="hljs-keyword">typeof</span> self !== <span class="hljs-string">"undefined"</span> ? self : <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">window</span> !== <span class="hljs-string">"undefined"</span> ? <span class="hljs-built_in">window</span> : {})
},{}],<span class="hljs-number">47</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-118" id="section-118"></a>
</div>
<p>Copyright Joyent, Inc. and other Node contributors.</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the
&quot;Software&quot;), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the
following conditions:</p>
<p>The above copyright notice and this permission notice shall be included
in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS
OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
USE OR OTHER DEALINGS IN THE SOFTWARE.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-meta">
'use strict'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-119" id="section-119"></a>
</div>
<p>If obj.hasOwnProperty has been overridden, then calling
obj.hasOwnProperty(prop) will break.
See: https://github.com/joyent/node/issues/1707</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasOwnProperty</span>(<span class="hljs-params">obj, prop</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.prototype.hasOwnProperty.call(obj, prop);
}

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">qs, sep, eq, options</span>) </span>{
  sep = sep || <span class="hljs-string">'&amp;'</span>;
  eq = eq || <span class="hljs-string">'='</span>;
  <span class="hljs-keyword">var</span> obj = {};

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> qs !== <span class="hljs-string">'string'</span> || qs.length === <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> obj;
  }

  <span class="hljs-keyword">var</span> regexp = <span class="hljs-regexp">/\+/g</span>;
  qs = qs.split(sep);

  <span class="hljs-keyword">var</span> maxKeys = <span class="hljs-number">1000</span>;
  <span class="hljs-keyword">if</span> (options &amp;&amp; <span class="hljs-keyword">typeof</span> options.maxKeys === <span class="hljs-string">'number'</span>) {
    maxKeys = options.maxKeys;
  }

  <span class="hljs-keyword">var</span> len = qs.length;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-120" id="section-120"></a>
</div>
<p>maxKeys &lt;= 0 means that we should not limit keys count</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (maxKeys &gt; <span class="hljs-number">0</span> &amp;&amp; len &gt; maxKeys) {
    len = maxKeys;
  }

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; len; ++i) {
    <span class="hljs-keyword">var</span> x = qs[i].replace(regexp, <span class="hljs-string">'%20'</span>),
        idx = x.indexOf(eq),
        kstr, vstr, k, v;

    <span class="hljs-keyword">if</span> (idx &gt;= <span class="hljs-number">0</span>) {
      kstr = x.substr(<span class="hljs-number">0</span>, idx);
      vstr = x.substr(idx + <span class="hljs-number">1</span>);
    } <span class="hljs-keyword">else</span> {
      kstr = x;
      vstr = <span class="hljs-string">''</span>;
    }

    k = <span class="hljs-built_in">decodeURIComponent</span>(kstr);
    v = <span class="hljs-built_in">decodeURIComponent</span>(vstr);

    <span class="hljs-keyword">if</span> (!hasOwnProperty(obj, k)) {
      obj[k] = v;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isArray(obj[k])) {
      obj[k].push(v);
    } <span class="hljs-keyword">else</span> {
      obj[k] = [obj[k], v];
    }
  }

  <span class="hljs-keyword">return</span> obj;
};

<span class="hljs-keyword">var</span> isArray = <span class="hljs-built_in">Array</span>.isArray || <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">xs</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.prototype.toString.call(xs) === <span class="hljs-string">'[object Array]'</span>;
};

},{}],<span class="hljs-number">48</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-121" id="section-121"></a>
</div>
<p>Copyright Joyent, Inc. and other Node contributors.</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the
&quot;Software&quot;), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the
following conditions:</p>
<p>The above copyright notice and this permission notice shall be included
in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS
OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
USE OR OTHER DEALINGS IN THE SOFTWARE.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-meta">
'use strict'</span>;

<span class="hljs-keyword">var</span> stringifyPrimitive = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">v</span>) </span>{
  <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">typeof</span> v) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'string'</span>:
      <span class="hljs-keyword">return</span> v;

    <span class="hljs-keyword">case</span> <span class="hljs-string">'boolean'</span>:
      <span class="hljs-keyword">return</span> v ? <span class="hljs-string">'true'</span> : <span class="hljs-string">'false'</span>;

    <span class="hljs-keyword">case</span> <span class="hljs-string">'number'</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">isFinite</span>(v) ? v : <span class="hljs-string">''</span>;

    <span class="hljs-keyword">default</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
  }
};

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">obj, sep, eq, name</span>) </span>{
  sep = sep || <span class="hljs-string">'&amp;'</span>;
  eq = eq || <span class="hljs-string">'='</span>;
  <span class="hljs-keyword">if</span> (obj === <span class="hljs-literal">null</span>) {
    obj = <span class="hljs-literal">undefined</span>;
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> obj === <span class="hljs-string">'object'</span>) {
    <span class="hljs-keyword">return</span> map(objectKeys(obj), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">k</span>) </span>{
      <span class="hljs-keyword">var</span> ks = <span class="hljs-built_in">encodeURIComponent</span>(stringifyPrimitive(k)) + eq;
      <span class="hljs-keyword">if</span> (isArray(obj[k])) {
        <span class="hljs-keyword">return</span> map(obj[k], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">v</span>) </span>{
          <span class="hljs-keyword">return</span> ks + <span class="hljs-built_in">encodeURIComponent</span>(stringifyPrimitive(v));
        }).join(sep);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> ks + <span class="hljs-built_in">encodeURIComponent</span>(stringifyPrimitive(obj[k]));
      }
    }).join(sep);

  }

  <span class="hljs-keyword">if</span> (!name) <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">encodeURIComponent</span>(stringifyPrimitive(name)) + eq +
         <span class="hljs-built_in">encodeURIComponent</span>(stringifyPrimitive(obj));
};

<span class="hljs-keyword">var</span> isArray = <span class="hljs-built_in">Array</span>.isArray || <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">xs</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.prototype.toString.call(xs) === <span class="hljs-string">'[object Array]'</span>;
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map</span> (<span class="hljs-params">xs, f</span>) </span>{
  <span class="hljs-keyword">if</span> (xs.map) <span class="hljs-keyword">return</span> xs.map(f);
  <span class="hljs-keyword">var</span> res = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; xs.length; i++) {
    res.push(f(xs[i], i));
  }
  <span class="hljs-keyword">return</span> res;
}

<span class="hljs-keyword">var</span> objectKeys = <span class="hljs-built_in">Object</span>.keys || <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">obj</span>) </span>{
  <span class="hljs-keyword">var</span> res = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> obj) {
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.prototype.hasOwnProperty.call(obj, key)) res.push(key);
  }
  <span class="hljs-keyword">return</span> res;
};

},{}],<span class="hljs-number">49</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;

exports.decode = exports.parse = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./decode'</span>);
exports.encode = exports.stringify = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./encode'</span>);

},{<span class="hljs-string">"./decode"</span>:<span class="hljs-number">47</span>,<span class="hljs-string">"./encode"</span>:<span class="hljs-number">48</span>}],<span class="hljs-number">50</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-122" id="section-122"></a>
</div>
<p>Copyright Joyent, Inc. and other Node contributors.</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the
&quot;Software&quot;), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the
following conditions:</p>
<p>The above copyright notice and this permission notice shall be included
in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS
OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
USE OR OTHER DEALINGS IN THE SOFTWARE.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-meta">
'use strict'</span>;

<span class="hljs-keyword">var</span> punycode = <span class="hljs-built_in">require</span>(<span class="hljs-string">'punycode'</span>);
<span class="hljs-keyword">var</span> util = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./util'</span>);

exports.parse = urlParse;
exports.resolve = urlResolve;
exports.resolveObject = urlResolveObject;
exports.format = urlFormat;

exports.Url = Url;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Url</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">this</span>.protocol = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">this</span>.slashes = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">this</span>.auth = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">this</span>.host = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">this</span>.port = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">this</span>.hostname = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">this</span>.hash = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">this</span>.search = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">this</span>.query = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">this</span>.pathname = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">this</span>.path = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">this</span>.href = <span class="hljs-literal">null</span>;
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-123" id="section-123"></a>
</div>
<p>Reference: RFC 3986, RFC 1808, RFC 2396</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-124" id="section-124"></a>
</div>
<p>define these here so at least they only have to be
compiled once on the first module load.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">var</span> protocolPattern = <span class="hljs-regexp">/^([a-z0-9.+-]+:)/i</span>,
    portPattern = <span class="hljs-regexp">/:[0-9]*$/</span>,

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-125" id="section-125"></a>
</div>
<p>Special case for a simple path URL</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    simplePathPattern = <span class="hljs-regexp">/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/</span>,

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-126" id="section-126"></a>
</div>
<p>RFC 2396: characters reserved for delimiting URLs.
We actually just auto-escape these.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    delims = [<span class="hljs-string">'&lt;'</span>, <span class="hljs-string">'&gt;'</span>, <span class="hljs-string">'"'</span>, <span class="hljs-string">'`'</span>, <span class="hljs-string">' '</span>, <span class="hljs-string">'\r'</span>, <span class="hljs-string">'\n'</span>, <span class="hljs-string">'\t'</span>],

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-127" id="section-127"></a>
</div>
<p>RFC 2396: characters not allowed for various reasons.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    unwise = [<span class="hljs-string">'{'</span>, <span class="hljs-string">'}'</span>, <span class="hljs-string">'|'</span>, <span class="hljs-string">'\\'</span>, <span class="hljs-string">'^'</span>, <span class="hljs-string">'`'</span>].concat(delims),

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-128" id="section-128"></a>
</div>
<p>Allowed by RFCs, but cause of XSS attacks.  Always escape these.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    autoEscape = [<span class="hljs-string">'\''</span>].concat(unwise),
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-129" id="section-129"></a>
</div>
<p>Characters that are never ever allowed in a hostname.
Note that any invalid chars are also handled, but these
are the ones that are <em>expected</em> to be seen, so we fast-path
them.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    nonHostChars = [<span class="hljs-string">'%'</span>, <span class="hljs-string">'/'</span>, <span class="hljs-string">'?'</span>, <span class="hljs-string">';'</span>, <span class="hljs-string">'#'</span>].concat(autoEscape),
    hostEndingChars = [<span class="hljs-string">'/'</span>, <span class="hljs-string">'?'</span>, <span class="hljs-string">'#'</span>],
    hostnameMaxLen = <span class="hljs-number">255</span>,
    hostnamePartPattern = <span class="hljs-regexp">/^[+a-z0-9A-Z_-]{0,63}$/</span>,
    hostnamePartStart = <span class="hljs-regexp">/^([+a-z0-9A-Z_-]{0,63})(.*)$/</span>,
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-130" id="section-130"></a>
</div>
<p>protocols that can allow &quot;unsafe&quot; and &quot;unwise&quot; chars.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    unsafeProtocol = {
      <span class="hljs-string">'javascript'</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-string">'javascript:'</span>: <span class="hljs-literal">true</span>
    },
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-131" id="section-131"></a>
</div>
<p>protocols that never have a hostname.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    hostlessProtocol = {
      <span class="hljs-string">'javascript'</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-string">'javascript:'</span>: <span class="hljs-literal">true</span>
    },
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-132" id="section-132"></a>
</div>
<p>protocols that always contain a // bit.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    slashedProtocol = {
      <span class="hljs-string">'http'</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-string">'https'</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-string">'ftp'</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-string">'gopher'</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-string">'file'</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-string">'http:'</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-string">'https:'</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-string">'ftp:'</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-string">'gopher:'</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-string">'file:'</span>: <span class="hljs-literal">true</span>
    },
    querystring = <span class="hljs-built_in">require</span>(<span class="hljs-string">'querystring'</span>);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">urlParse</span>(<span class="hljs-params">url, parseQueryString, slashesDenoteHost</span>) </span>{
  <span class="hljs-keyword">if</span> (url &amp;&amp; util.isObject(url) &amp;&amp; url <span class="hljs-keyword">instanceof</span> Url) <span class="hljs-keyword">return</span> url;

  <span class="hljs-keyword">var</span> u = <span class="hljs-keyword">new</span> Url;
  u.parse(url, parseQueryString, slashesDenoteHost);
  <span class="hljs-keyword">return</span> u;
}

Url.prototype.parse = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">url, parseQueryString, slashesDenoteHost</span>) </span>{
  <span class="hljs-keyword">if</span> (!util.isString(url)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">"Parameter 'url' must be a string, not "</span> + <span class="hljs-keyword">typeof</span> url);
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-133" id="section-133"></a>
</div>
<p>Copy chrome, IE, opera backslash-handling behavior.
Back slashes before the query string get converted to forward slashes
See: https://code.google.com/p/chromium/issues/detail?id=25916</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> queryIndex = url.indexOf(<span class="hljs-string">'?'</span>),
      splitter =
          (queryIndex !== <span class="hljs-number">-1</span> &amp;&amp; queryIndex &lt; url.indexOf(<span class="hljs-string">'#'</span>)) ? <span class="hljs-string">'?'</span> : <span class="hljs-string">'#'</span>,
      uSplit = url.split(splitter),
      slashRegex = <span class="hljs-regexp">/\\/g</span>;
  uSplit[<span class="hljs-number">0</span>] = uSplit[<span class="hljs-number">0</span>].replace(slashRegex, <span class="hljs-string">'/'</span>);
  url = uSplit.join(splitter);

  <span class="hljs-keyword">var</span> rest = url;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-134" id="section-134"></a>
</div>
<p>trim before proceeding.
This is to support parse stuff like &quot;  http://foo.com  \n&quot;</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  rest = rest.trim();

  <span class="hljs-keyword">if</span> (!slashesDenoteHost &amp;&amp; url.split(<span class="hljs-string">'#'</span>).length === <span class="hljs-number">1</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-135" id="section-135"></a>
</div>
<p>Try fast path regexp</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">var</span> simplePath = simplePathPattern.exec(rest);
    <span class="hljs-keyword">if</span> (simplePath) {
      <span class="hljs-keyword">this</span>.path = rest;
      <span class="hljs-keyword">this</span>.href = rest;
      <span class="hljs-keyword">this</span>.pathname = simplePath[<span class="hljs-number">1</span>];
      <span class="hljs-keyword">if</span> (simplePath[<span class="hljs-number">2</span>]) {
        <span class="hljs-keyword">this</span>.search = simplePath[<span class="hljs-number">2</span>];
        <span class="hljs-keyword">if</span> (parseQueryString) {
          <span class="hljs-keyword">this</span>.query = querystring.parse(<span class="hljs-keyword">this</span>.search.substr(<span class="hljs-number">1</span>));
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">this</span>.query = <span class="hljs-keyword">this</span>.search.substr(<span class="hljs-number">1</span>);
        }
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (parseQueryString) {
        <span class="hljs-keyword">this</span>.search = <span class="hljs-string">''</span>;
        <span class="hljs-keyword">this</span>.query = {};
      }
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }
  }

  <span class="hljs-keyword">var</span> proto = protocolPattern.exec(rest);
  <span class="hljs-keyword">if</span> (proto) {
    proto = proto[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">var</span> lowerProto = proto.toLowerCase();
    <span class="hljs-keyword">this</span>.protocol = lowerProto;
    rest = rest.substr(proto.length);
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-136" id="section-136"></a>
</div>
<p>figure out if it's got a host
user@server is <em>always</em> interpreted as a hostname, and url
resolution will treat //foo/bar as host=foo,path=bar because that's
how the browser resolves relative URLs.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (slashesDenoteHost || proto || rest.match(<span class="hljs-regexp">/^\/\/[^@\/]+@[^@\/]+/</span>)) {
    <span class="hljs-keyword">var</span> slashes = rest.substr(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>) === <span class="hljs-string">'//'</span>;
    <span class="hljs-keyword">if</span> (slashes &amp;&amp; !(proto &amp;&amp; hostlessProtocol[proto])) {
      rest = rest.substr(<span class="hljs-number">2</span>);
      <span class="hljs-keyword">this</span>.slashes = <span class="hljs-literal">true</span>;
    }
  }

  <span class="hljs-keyword">if</span> (!hostlessProtocol[proto] &amp;&amp;
      (slashes || (proto &amp;&amp; !slashedProtocol[proto]))) {

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-137" id="section-137"></a>
</div>
<p>there's a hostname.
the first instance of /, ?, ;, or # ends the host.</p>
<p>If there is an @ in the hostname, then non-host chars <em>are</em> allowed
to the left of the last @ sign, unless some host-ending character
comes <em>before</em> the @-sign.
URLs are obnoxious.</p>
<p>ex:
http://a@b@c/ =&gt; user:a@b host:c
http://a@b?@c =&gt; user:a host:c path:/?@c</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-138" id="section-138"></a>
</div>
<p>v0.12 TODO(isaacs): This is not quite how Chrome does things.
Review our test case against browsers more comprehensively.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-139" id="section-139"></a>
</div>
<p>find the first instance of any hostEndingChars</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">var</span> hostEnd = <span class="hljs-number">-1</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; hostEndingChars.length; i++) {
      <span class="hljs-keyword">var</span> hec = rest.indexOf(hostEndingChars[i]);
      <span class="hljs-keyword">if</span> (hec !== <span class="hljs-number">-1</span> &amp;&amp; (hostEnd === <span class="hljs-number">-1</span> || hec &lt; hostEnd))
        hostEnd = hec;
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-140" id="section-140"></a>
</div>
<p>at this point, either we have an explicit point where the
auth portion cannot go past, or the last @ char is the decider.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">var</span> auth, atSign;
    <span class="hljs-keyword">if</span> (hostEnd === <span class="hljs-number">-1</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-141" id="section-141"></a>
</div>
<p>atSign can be anywhere.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      atSign = rest.lastIndexOf(<span class="hljs-string">'@'</span>);
    } <span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-142" id="section-142"></a>
</div>
<p>atSign must be in auth portion.
http://a@b/c@d =&gt; host:b auth:a path:/c@d</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      atSign = rest.lastIndexOf(<span class="hljs-string">'@'</span>, hostEnd);
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-143" id="section-143"></a>
</div>
<p>Now we have a portion which is definitely the auth.
Pull that off.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (atSign !== <span class="hljs-number">-1</span>) {
      auth = rest.slice(<span class="hljs-number">0</span>, atSign);
      rest = rest.slice(atSign + <span class="hljs-number">1</span>);
      <span class="hljs-keyword">this</span>.auth = <span class="hljs-built_in">decodeURIComponent</span>(auth);
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-144" id="section-144"></a>
</div>
<p>the host is the remaining to the left of the first non-host char</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    hostEnd = <span class="hljs-number">-1</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; nonHostChars.length; i++) {
      <span class="hljs-keyword">var</span> hec = rest.indexOf(nonHostChars[i]);
      <span class="hljs-keyword">if</span> (hec !== <span class="hljs-number">-1</span> &amp;&amp; (hostEnd === <span class="hljs-number">-1</span> || hec &lt; hostEnd))
        hostEnd = hec;
    }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-145" id="section-145"></a>
</div>
<p>if we still have not hit it, then the entire thing is a host.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (hostEnd === <span class="hljs-number">-1</span>)
      hostEnd = rest.length;

    <span class="hljs-keyword">this</span>.host = rest.slice(<span class="hljs-number">0</span>, hostEnd);
    rest = rest.slice(hostEnd);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-146" id="section-146"></a>
</div>
<p>pull out port.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">this</span>.parseHost();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-147" id="section-147"></a>
</div>
<p>we've indicated that there is a hostname,
so even if it's empty, it has to be present.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">this</span>.hostname = <span class="hljs-keyword">this</span>.hostname || <span class="hljs-string">''</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-148" id="section-148"></a>
</div>
<p>if hostname begins with [ and ends with ]
assume that it's an IPv6 address.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">var</span> ipv6Hostname = <span class="hljs-keyword">this</span>.hostname[<span class="hljs-number">0</span>] === <span class="hljs-string">'['</span> &amp;&amp;
        <span class="hljs-keyword">this</span>.hostname[<span class="hljs-keyword">this</span>.hostname.length - <span class="hljs-number">1</span>] === <span class="hljs-string">']'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-149" id="section-149"></a>
</div>
<p>validate a little.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (!ipv6Hostname) {
      <span class="hljs-keyword">var</span> hostparts = <span class="hljs-keyword">this</span>.hostname.split(<span class="hljs-regexp">/\./</span>);
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, l = hostparts.length; i &lt; l; i++) {
        <span class="hljs-keyword">var</span> part = hostparts[i];
        <span class="hljs-keyword">if</span> (!part) <span class="hljs-keyword">continue</span>;
        <span class="hljs-keyword">if</span> (!part.match(hostnamePartPattern)) {
          <span class="hljs-keyword">var</span> newpart = <span class="hljs-string">''</span>;
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>, k = part.length; j &lt; k; j++) {
            <span class="hljs-keyword">if</span> (part.charCodeAt(j) &gt; <span class="hljs-number">127</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-150" id="section-150"></a>
</div>
<p>we replace non-ASCII char with a temporary placeholder
we need this to make sure size of hostname is not
broken by replacing non-ASCII by nothing</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">              newpart += <span class="hljs-string">'x'</span>;
            } <span class="hljs-keyword">else</span> {
              newpart += part[j];
            }
          }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-151" id="section-151"></a>
</div>
<p>we test again with ASCII char only</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">          <span class="hljs-keyword">if</span> (!newpart.match(hostnamePartPattern)) {
            <span class="hljs-keyword">var</span> validParts = hostparts.slice(<span class="hljs-number">0</span>, i);
            <span class="hljs-keyword">var</span> notHost = hostparts.slice(i + <span class="hljs-number">1</span>);
            <span class="hljs-keyword">var</span> bit = part.match(hostnamePartStart);
            <span class="hljs-keyword">if</span> (bit) {
              validParts.push(bit[<span class="hljs-number">1</span>]);
              notHost.unshift(bit[<span class="hljs-number">2</span>]);
            }
            <span class="hljs-keyword">if</span> (notHost.length) {
              rest = <span class="hljs-string">'/'</span> + notHost.join(<span class="hljs-string">'.'</span>) + rest;
            }
            <span class="hljs-keyword">this</span>.hostname = validParts.join(<span class="hljs-string">'.'</span>);
            <span class="hljs-keyword">break</span>;
          }
        }
      }
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.hostname.length &gt; hostnameMaxLen) {
      <span class="hljs-keyword">this</span>.hostname = <span class="hljs-string">''</span>;
    } <span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-152" id="section-152"></a>
</div>
<p>hostnames are always lower case.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">this</span>.hostname = <span class="hljs-keyword">this</span>.hostname.toLowerCase();
    }

    <span class="hljs-keyword">if</span> (!ipv6Hostname) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-153" id="section-153"></a>
</div>
<p>IDNA Support: Returns a punycoded representation of &quot;domain&quot;.
It only converts parts of the domain name that
have non-ASCII characters, i.e. it doesn't matter if
you call it with a domain that already is ASCII-only.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">this</span>.hostname = punycode.toASCII(<span class="hljs-keyword">this</span>.hostname);
    }

    <span class="hljs-keyword">var</span> p = <span class="hljs-keyword">this</span>.port ? <span class="hljs-string">':'</span> + <span class="hljs-keyword">this</span>.port : <span class="hljs-string">''</span>;
    <span class="hljs-keyword">var</span> h = <span class="hljs-keyword">this</span>.hostname || <span class="hljs-string">''</span>;
    <span class="hljs-keyword">this</span>.host = h + p;
    <span class="hljs-keyword">this</span>.href += <span class="hljs-keyword">this</span>.host;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-154" id="section-154"></a>
</div>
<p>strip [ and ] from the hostname
the host field still retains them, though</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (ipv6Hostname) {
      <span class="hljs-keyword">this</span>.hostname = <span class="hljs-keyword">this</span>.hostname.substr(<span class="hljs-number">1</span>, <span class="hljs-keyword">this</span>.hostname.length - <span class="hljs-number">2</span>);
      <span class="hljs-keyword">if</span> (rest[<span class="hljs-number">0</span>] !== <span class="hljs-string">'/'</span>) {
        rest = <span class="hljs-string">'/'</span> + rest;
      }
    }
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-155" id="section-155"></a>
</div>
<p>now rest is set to the post-host stuff.
chop off any delim chars.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (!unsafeProtocol[lowerProto]) {

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-156" id="section-156"></a>
</div>
<p>First, make 100% sure that any &quot;autoEscape&quot; chars get
escaped, even if encodeURIComponent doesn't think they
need to be.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, l = autoEscape.length; i &lt; l; i++) {
      <span class="hljs-keyword">var</span> ae = autoEscape[i];
      <span class="hljs-keyword">if</span> (rest.indexOf(ae) === <span class="hljs-number">-1</span>)
        <span class="hljs-keyword">continue</span>;
      <span class="hljs-keyword">var</span> esc = <span class="hljs-built_in">encodeURIComponent</span>(ae);
      <span class="hljs-keyword">if</span> (esc === ae) {
        esc = <span class="hljs-built_in">escape</span>(ae);
      }
      rest = rest.split(ae).join(esc);
    }
  }


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-157" id="section-157"></a>
</div>
<p>chop off from the tail first.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> hash = rest.indexOf(<span class="hljs-string">'#'</span>);
  <span class="hljs-keyword">if</span> (hash !== <span class="hljs-number">-1</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-158" id="section-158"></a>
</div>
<p>got a fragment string.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">this</span>.hash = rest.substr(hash);
    rest = rest.slice(<span class="hljs-number">0</span>, hash);
  }
  <span class="hljs-keyword">var</span> qm = rest.indexOf(<span class="hljs-string">'?'</span>);
  <span class="hljs-keyword">if</span> (qm !== <span class="hljs-number">-1</span>) {
    <span class="hljs-keyword">this</span>.search = rest.substr(qm);
    <span class="hljs-keyword">this</span>.query = rest.substr(qm + <span class="hljs-number">1</span>);
    <span class="hljs-keyword">if</span> (parseQueryString) {
      <span class="hljs-keyword">this</span>.query = querystring.parse(<span class="hljs-keyword">this</span>.query);
    }
    rest = rest.slice(<span class="hljs-number">0</span>, qm);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (parseQueryString) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-159" id="section-159"></a>
</div>
<p>no query string, but parseQueryString still requested</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">this</span>.search = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">this</span>.query = {};
  }
  <span class="hljs-keyword">if</span> (rest) <span class="hljs-keyword">this</span>.pathname = rest;
  <span class="hljs-keyword">if</span> (slashedProtocol[lowerProto] &amp;&amp;
      <span class="hljs-keyword">this</span>.hostname &amp;&amp; !<span class="hljs-keyword">this</span>.pathname) {
    <span class="hljs-keyword">this</span>.pathname = <span class="hljs-string">'/'</span>;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-160" id="section-160"></a>
</div>
<p>to support http.request</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.pathname || <span class="hljs-keyword">this</span>.search) {
    <span class="hljs-keyword">var</span> p = <span class="hljs-keyword">this</span>.pathname || <span class="hljs-string">''</span>;
    <span class="hljs-keyword">var</span> s = <span class="hljs-keyword">this</span>.search || <span class="hljs-string">''</span>;
    <span class="hljs-keyword">this</span>.path = p + s;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-161" id="section-161"></a>
</div>
<p>finally, reconstruct the href based on what has been validated.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">this</span>.href = <span class="hljs-keyword">this</span>.format();
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-162" id="section-162"></a>
</div>
<p>format a parsed object into a url string</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">urlFormat</span>(<span class="hljs-params">obj</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-163" id="section-163"></a>
</div>
<p>ensure it's an object, and not a string url.
If it's an obj, this is a no-op.
this way, you can call url_format() on strings
to clean up potentially wonky urls.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (util.isString(obj)) obj = urlParse(obj);
  <span class="hljs-keyword">if</span> (!(obj <span class="hljs-keyword">instanceof</span> Url)) <span class="hljs-keyword">return</span> Url.prototype.format.call(obj);
  <span class="hljs-keyword">return</span> obj.format();
}

Url.prototype.format = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> auth = <span class="hljs-keyword">this</span>.auth || <span class="hljs-string">''</span>;
  <span class="hljs-keyword">if</span> (auth) {
    auth = <span class="hljs-built_in">encodeURIComponent</span>(auth);
    auth = auth.replace(<span class="hljs-regexp">/%3A/i</span>, <span class="hljs-string">':'</span>);
    auth += <span class="hljs-string">'@'</span>;
  }

  <span class="hljs-keyword">var</span> protocol = <span class="hljs-keyword">this</span>.protocol || <span class="hljs-string">''</span>,
      pathname = <span class="hljs-keyword">this</span>.pathname || <span class="hljs-string">''</span>,
      hash = <span class="hljs-keyword">this</span>.hash || <span class="hljs-string">''</span>,
      host = <span class="hljs-literal">false</span>,
      query = <span class="hljs-string">''</span>;

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.host) {
    host = auth + <span class="hljs-keyword">this</span>.host;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.hostname) {
    host = auth + (<span class="hljs-keyword">this</span>.hostname.indexOf(<span class="hljs-string">':'</span>) === <span class="hljs-number">-1</span> ?
        <span class="hljs-keyword">this</span>.hostname :
        <span class="hljs-string">'['</span> + <span class="hljs-keyword">this</span>.hostname + <span class="hljs-string">']'</span>);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.port) {
      host += <span class="hljs-string">':'</span> + <span class="hljs-keyword">this</span>.port;
    }
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.query &amp;&amp;
      util.isObject(<span class="hljs-keyword">this</span>.query) &amp;&amp;
      <span class="hljs-built_in">Object</span>.keys(<span class="hljs-keyword">this</span>.query).length) {
    query = querystring.stringify(<span class="hljs-keyword">this</span>.query);
  }

  <span class="hljs-keyword">var</span> search = <span class="hljs-keyword">this</span>.search || (query &amp;&amp; (<span class="hljs-string">'?'</span> + query)) || <span class="hljs-string">''</span>;

  <span class="hljs-keyword">if</span> (protocol &amp;&amp; protocol.substr(<span class="hljs-number">-1</span>) !== <span class="hljs-string">':'</span>) protocol += <span class="hljs-string">':'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-164" id="section-164"></a>
</div>
<p>only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.
unless they had them to begin with.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.slashes ||
      (!protocol || slashedProtocol[protocol]) &amp;&amp; host !== <span class="hljs-literal">false</span>) {
    host = <span class="hljs-string">'//'</span> + (host || <span class="hljs-string">''</span>);
    <span class="hljs-keyword">if</span> (pathname &amp;&amp; pathname.charAt(<span class="hljs-number">0</span>) !== <span class="hljs-string">'/'</span>) pathname = <span class="hljs-string">'/'</span> + pathname;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!host) {
    host = <span class="hljs-string">''</span>;
  }

  <span class="hljs-keyword">if</span> (hash &amp;&amp; hash.charAt(<span class="hljs-number">0</span>) !== <span class="hljs-string">'#'</span>) hash = <span class="hljs-string">'#'</span> + hash;
  <span class="hljs-keyword">if</span> (search &amp;&amp; search.charAt(<span class="hljs-number">0</span>) !== <span class="hljs-string">'?'</span>) search = <span class="hljs-string">'?'</span> + search;

  pathname = pathname.replace(<span class="hljs-regexp">/[?#]/g</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">match</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">encodeURIComponent</span>(match);
  });
  search = search.replace(<span class="hljs-string">'#'</span>, <span class="hljs-string">'%23'</span>);

  <span class="hljs-keyword">return</span> protocol + host + pathname + search + hash;
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">urlResolve</span>(<span class="hljs-params">source, relative</span>) </span>{
  <span class="hljs-keyword">return</span> urlParse(source, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>).resolve(relative);
}

Url.prototype.resolve = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">relative</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.resolveObject(urlParse(relative, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>)).format();
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">urlResolveObject</span>(<span class="hljs-params">source, relative</span>) </span>{
  <span class="hljs-keyword">if</span> (!source) <span class="hljs-keyword">return</span> relative;
  <span class="hljs-keyword">return</span> urlParse(source, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>).resolveObject(relative);
}

Url.prototype.resolveObject = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">relative</span>) </span>{
  <span class="hljs-keyword">if</span> (util.isString(relative)) {
    <span class="hljs-keyword">var</span> rel = <span class="hljs-keyword">new</span> Url();
    rel.parse(relative, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>);
    relative = rel;
  }

  <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">new</span> Url();
  <span class="hljs-keyword">var</span> tkeys = <span class="hljs-built_in">Object</span>.keys(<span class="hljs-keyword">this</span>);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> tk = <span class="hljs-number">0</span>; tk &lt; tkeys.length; tk++) {
    <span class="hljs-keyword">var</span> tkey = tkeys[tk];
    result[tkey] = <span class="hljs-keyword">this</span>[tkey];
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-165" id="section-165"></a>
</div>
<p>hash is always overridden, no matter what.
even href=&quot;&quot; will remove it.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  result.hash = relative.hash;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-166" id="section-166"></a>
</div>
<p>if the relative url is empty, then there's nothing left to do here.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (relative.href === <span class="hljs-string">''</span>) {
    result.href = result.format();
    <span class="hljs-keyword">return</span> result;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-167" id="section-167"></a>
</div>
<p>hrefs like //foo/bar always cut to the protocol.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (relative.slashes &amp;&amp; !relative.protocol) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-168" id="section-168"></a>
</div>
<p>take everything except the protocol from relative</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">var</span> rkeys = <span class="hljs-built_in">Object</span>.keys(relative);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> rk = <span class="hljs-number">0</span>; rk &lt; rkeys.length; rk++) {
      <span class="hljs-keyword">var</span> rkey = rkeys[rk];
      <span class="hljs-keyword">if</span> (rkey !== <span class="hljs-string">'protocol'</span>)
        result[rkey] = relative[rkey];
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-169" id="section-169"></a>
</div>
<p>urlParse appends trailing / to urls like http://www.example.com</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (slashedProtocol[result.protocol] &amp;&amp;
        result.hostname &amp;&amp; !result.pathname) {
      result.path = result.pathname = <span class="hljs-string">'/'</span>;
    }

    result.href = result.format();
    <span class="hljs-keyword">return</span> result;
  }

  <span class="hljs-keyword">if</span> (relative.protocol &amp;&amp; relative.protocol !== result.protocol) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-170" id="section-170"></a>
</div>
<p>if it's a known url protocol, then changing
the protocol does weird things
first, if it's not file:, then we MUST have a host,
and if there was a path
to begin with, then we MUST have a path.
if it is file:, then the host is dropped,
because that's known to be hostless.
anything else is assumed to be absolute.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (!slashedProtocol[relative.protocol]) {
      <span class="hljs-keyword">var</span> keys = <span class="hljs-built_in">Object</span>.keys(relative);
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> v = <span class="hljs-number">0</span>; v &lt; keys.length; v++) {
        <span class="hljs-keyword">var</span> k = keys[v];
        result[k] = relative[k];
      }
      result.href = result.format();
      <span class="hljs-keyword">return</span> result;
    }

    result.protocol = relative.protocol;
    <span class="hljs-keyword">if</span> (!relative.host &amp;&amp; !hostlessProtocol[relative.protocol]) {
      <span class="hljs-keyword">var</span> relPath = (relative.pathname || <span class="hljs-string">''</span>).split(<span class="hljs-string">'/'</span>);
      <span class="hljs-keyword">while</span> (relPath.length &amp;&amp; !(relative.host = relPath.shift()));
      <span class="hljs-keyword">if</span> (!relative.host) relative.host = <span class="hljs-string">''</span>;
      <span class="hljs-keyword">if</span> (!relative.hostname) relative.hostname = <span class="hljs-string">''</span>;
      <span class="hljs-keyword">if</span> (relPath[<span class="hljs-number">0</span>] !== <span class="hljs-string">''</span>) relPath.unshift(<span class="hljs-string">''</span>);
      <span class="hljs-keyword">if</span> (relPath.length &lt; <span class="hljs-number">2</span>) relPath.unshift(<span class="hljs-string">''</span>);
      result.pathname = relPath.join(<span class="hljs-string">'/'</span>);
    } <span class="hljs-keyword">else</span> {
      result.pathname = relative.pathname;
    }
    result.search = relative.search;
    result.query = relative.query;
    result.host = relative.host || <span class="hljs-string">''</span>;
    result.auth = relative.auth;
    result.hostname = relative.hostname || relative.host;
    result.port = relative.port;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-171" id="section-171"></a>
</div>
<p>to support http.request</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (result.pathname || result.search) {
      <span class="hljs-keyword">var</span> p = result.pathname || <span class="hljs-string">''</span>;
      <span class="hljs-keyword">var</span> s = result.search || <span class="hljs-string">''</span>;
      result.path = p + s;
    }
    result.slashes = result.slashes || relative.slashes;
    result.href = result.format();
    <span class="hljs-keyword">return</span> result;
  }

  <span class="hljs-keyword">var</span> isSourceAbs = (result.pathname &amp;&amp; result.pathname.charAt(<span class="hljs-number">0</span>) === <span class="hljs-string">'/'</span>),
      isRelAbs = (
          relative.host ||
          relative.pathname &amp;&amp; relative.pathname.charAt(<span class="hljs-number">0</span>) === <span class="hljs-string">'/'</span>
      ),
      mustEndAbs = (isRelAbs || isSourceAbs ||
                    (result.host &amp;&amp; relative.pathname)),
      removeAllDots = mustEndAbs,
      srcPath = result.pathname &amp;&amp; result.pathname.split(<span class="hljs-string">'/'</span>) || [],
      relPath = relative.pathname &amp;&amp; relative.pathname.split(<span class="hljs-string">'/'</span>) || [],
      psychotic = result.protocol &amp;&amp; !slashedProtocol[result.protocol];

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-172" id="section-172"></a>
</div>
<p>if the url is a non-slashed url, then relative
links like ../.. should be able
to crawl up to the hostname, as well.  This is strange.
result.protocol has already been set by now.
Later on, put the first path part into the host field.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (psychotic) {
    result.hostname = <span class="hljs-string">''</span>;
    result.port = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">if</span> (result.host) {
      <span class="hljs-keyword">if</span> (srcPath[<span class="hljs-number">0</span>] === <span class="hljs-string">''</span>) srcPath[<span class="hljs-number">0</span>] = result.host;
      <span class="hljs-keyword">else</span> srcPath.unshift(result.host);
    }
    result.host = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">if</span> (relative.protocol) {
      relative.hostname = <span class="hljs-literal">null</span>;
      relative.port = <span class="hljs-literal">null</span>;
      <span class="hljs-keyword">if</span> (relative.host) {
        <span class="hljs-keyword">if</span> (relPath[<span class="hljs-number">0</span>] === <span class="hljs-string">''</span>) relPath[<span class="hljs-number">0</span>] = relative.host;
        <span class="hljs-keyword">else</span> relPath.unshift(relative.host);
      }
      relative.host = <span class="hljs-literal">null</span>;
    }
    mustEndAbs = mustEndAbs &amp;&amp; (relPath[<span class="hljs-number">0</span>] === <span class="hljs-string">''</span> || srcPath[<span class="hljs-number">0</span>] === <span class="hljs-string">''</span>);
  }

  <span class="hljs-keyword">if</span> (isRelAbs) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-173" id="section-173"></a>
</div>
<p>it's absolute.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    result.host = (relative.host || relative.host === <span class="hljs-string">''</span>) ?
                  relative.host : result.host;
    result.hostname = (relative.hostname || relative.hostname === <span class="hljs-string">''</span>) ?
                      relative.hostname : result.hostname;
    result.search = relative.search;
    result.query = relative.query;
    srcPath = relPath;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-174" id="section-174"></a>
</div>
<p>fall through to the dot-handling below.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (relPath.length) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-175" id="section-175"></a>
</div>
<p>it's relative
throw away the existing file, and take the new path instead.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (!srcPath) srcPath = [];
    srcPath.pop();
    srcPath = srcPath.concat(relPath);
    result.search = relative.search;
    result.query = relative.query;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!util.isNullOrUndefined(relative.search)) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-176" id="section-176"></a>
</div>
<p>just pull out the search.
like href='?foo'.
Put this after the other two cases because it simplifies the booleans</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (psychotic) {
      result.hostname = result.host = srcPath.shift();
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-177" id="section-177"></a>
</div>
<p>occationaly the auth can get stuck only in host
this especially happens in cases like
url.resolveObject('mailto:local1@domain1', 'local2@domain2')</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">var</span> authInHost = result.host &amp;&amp; result.host.indexOf(<span class="hljs-string">'@'</span>) &gt; <span class="hljs-number">0</span> ?
                       result.host.split(<span class="hljs-string">'@'</span>) : <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">if</span> (authInHost) {
        result.auth = authInHost.shift();
        result.host = result.hostname = authInHost.shift();
      }
    }
    result.search = relative.search;
    result.query = relative.query;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-178" id="section-178"></a>
</div>
<p>to support http.request</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (!util.isNull(result.pathname) || !util.isNull(result.search)) {
      result.path = (result.pathname ? result.pathname : <span class="hljs-string">''</span>) +
                    (result.search ? result.search : <span class="hljs-string">''</span>);
    }
    result.href = result.format();
    <span class="hljs-keyword">return</span> result;
  }

  <span class="hljs-keyword">if</span> (!srcPath.length) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-179" id="section-179"></a>
</div>
<p>no path at all.  easy.
we've already handled the other stuff above.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    result.pathname = <span class="hljs-literal">null</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-180" id="section-180"></a>
</div>
<p>to support http.request</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (result.search) {
      result.path = <span class="hljs-string">'/'</span> + result.search;
    } <span class="hljs-keyword">else</span> {
      result.path = <span class="hljs-literal">null</span>;
    }
    result.href = result.format();
    <span class="hljs-keyword">return</span> result;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-181" id="section-181"></a>
</div>
<p>if a url ENDs in . or .., then it must get a trailing slash.
however, if it ends in anything else non-slashy,
then it must NOT get a trailing slash.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> last = srcPath.slice(<span class="hljs-number">-1</span>)[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">var</span> hasTrailingSlash = (
      (result.host || relative.host || srcPath.length &gt; <span class="hljs-number">1</span>) &amp;&amp;
      (last === <span class="hljs-string">'.'</span> || last === <span class="hljs-string">'..'</span>) || last === <span class="hljs-string">''</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-182" id="section-182"></a>
</div>
<p>strip single dots, resolve double dots to parent dir
if the path tries to go above the root, <code>up</code> ends up &gt; 0</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> up = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = srcPath.length; i &gt;= <span class="hljs-number">0</span>; i--) {
    last = srcPath[i];
    <span class="hljs-keyword">if</span> (last === <span class="hljs-string">'.'</span>) {
      srcPath.splice(i, <span class="hljs-number">1</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (last === <span class="hljs-string">'..'</span>) {
      srcPath.splice(i, <span class="hljs-number">1</span>);
      up++;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (up) {
      srcPath.splice(i, <span class="hljs-number">1</span>);
      up--;
    }
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-183" id="section-183"></a>
</div>
<p>if the path is allowed to go above the root, restore leading ..s</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (!mustEndAbs &amp;&amp; !removeAllDots) {
    <span class="hljs-keyword">for</span> (; up--; up) {
      srcPath.unshift(<span class="hljs-string">'..'</span>);
    }
  }

  <span class="hljs-keyword">if</span> (mustEndAbs &amp;&amp; srcPath[<span class="hljs-number">0</span>] !== <span class="hljs-string">''</span> &amp;&amp;
      (!srcPath[<span class="hljs-number">0</span>] || srcPath[<span class="hljs-number">0</span>].charAt(<span class="hljs-number">0</span>) !== <span class="hljs-string">'/'</span>)) {
    srcPath.unshift(<span class="hljs-string">''</span>);
  }

  <span class="hljs-keyword">if</span> (hasTrailingSlash &amp;&amp; (srcPath.join(<span class="hljs-string">'/'</span>).substr(<span class="hljs-number">-1</span>) !== <span class="hljs-string">'/'</span>)) {
    srcPath.push(<span class="hljs-string">''</span>);
  }

  <span class="hljs-keyword">var</span> isAbsolute = srcPath[<span class="hljs-number">0</span>] === <span class="hljs-string">''</span> ||
      (srcPath[<span class="hljs-number">0</span>] &amp;&amp; srcPath[<span class="hljs-number">0</span>].charAt(<span class="hljs-number">0</span>) === <span class="hljs-string">'/'</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-184" id="section-184"></a>
</div>
<p>put the host back</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (psychotic) {
    result.hostname = result.host = isAbsolute ? <span class="hljs-string">''</span> :
                                    srcPath.length ? srcPath.shift() : <span class="hljs-string">''</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-185" id="section-185"></a>
</div>
<p>occationaly the auth can get stuck only in host
this especially happens in cases like
url.resolveObject('mailto:local1@domain1', 'local2@domain2')</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">var</span> authInHost = result.host &amp;&amp; result.host.indexOf(<span class="hljs-string">'@'</span>) &gt; <span class="hljs-number">0</span> ?
                     result.host.split(<span class="hljs-string">'@'</span>) : <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (authInHost) {
      result.auth = authInHost.shift();
      result.host = result.hostname = authInHost.shift();
    }
  }

  mustEndAbs = mustEndAbs || (result.host &amp;&amp; srcPath.length);

  <span class="hljs-keyword">if</span> (mustEndAbs &amp;&amp; !isAbsolute) {
    srcPath.unshift(<span class="hljs-string">''</span>);
  }

  <span class="hljs-keyword">if</span> (!srcPath.length) {
    result.pathname = <span class="hljs-literal">null</span>;
    result.path = <span class="hljs-literal">null</span>;
  } <span class="hljs-keyword">else</span> {
    result.pathname = srcPath.join(<span class="hljs-string">'/'</span>);
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-186" id="section-186"></a>
</div>
<p>to support request.http</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (!util.isNull(result.pathname) || !util.isNull(result.search)) {
    result.path = (result.pathname ? result.pathname : <span class="hljs-string">''</span>) +
                  (result.search ? result.search : <span class="hljs-string">''</span>);
  }
  result.auth = relative.auth || result.auth;
  result.slashes = result.slashes || relative.slashes;
  result.href = result.format();
  <span class="hljs-keyword">return</span> result;
};

Url.prototype.parseHost = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> host = <span class="hljs-keyword">this</span>.host;
  <span class="hljs-keyword">var</span> port = portPattern.exec(host);
  <span class="hljs-keyword">if</span> (port) {
    port = port[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">if</span> (port !== <span class="hljs-string">':'</span>) {
      <span class="hljs-keyword">this</span>.port = port.substr(<span class="hljs-number">1</span>);
    }
    host = host.substr(<span class="hljs-number">0</span>, host.length - port.length);
  }
  <span class="hljs-keyword">if</span> (host) <span class="hljs-keyword">this</span>.hostname = host;
};

},{<span class="hljs-string">"./util"</span>:<span class="hljs-number">51</span>,<span class="hljs-string">"punycode"</span>:<span class="hljs-number">46</span>,<span class="hljs-string">"querystring"</span>:<span class="hljs-number">49</span>}],<span class="hljs-number">51</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;

<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">isString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">arg</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span>(arg) === <span class="hljs-string">'string'</span>;
  },
  <span class="hljs-attr">isObject</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">arg</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span>(arg) === <span class="hljs-string">'object'</span> &amp;&amp; arg !== <span class="hljs-literal">null</span>;
  },
  <span class="hljs-attr">isNull</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">arg</span>) </span>{
    <span class="hljs-keyword">return</span> arg === <span class="hljs-literal">null</span>;
  },
  <span class="hljs-attr">isNullOrUndefined</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">arg</span>) </span>{
    <span class="hljs-keyword">return</span> arg == <span class="hljs-literal">null</span>;
  }
};

},{}],<span class="hljs-string">"ajv"</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">require,module,exports</span>)</span>{
<span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">var</span> compileSchema = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./compile'</span>)
  , resolve = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./compile/resolve'</span>)
  , Cache = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./cache'</span>)
  , SchemaObject = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./compile/schema_obj'</span>)
  , stableStringify = <span class="hljs-built_in">require</span>(<span class="hljs-string">'json-stable-stringify'</span>)
  , formats = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./compile/formats'</span>)
  , rules = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./compile/rules'</span>)
  , v5 = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./v5'</span>)
  , util = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./compile/util'</span>)
  , <span class="hljs-keyword">async</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./async'</span>)
  , co = <span class="hljs-built_in">require</span>(<span class="hljs-string">'co'</span>);

<span class="hljs-built_in">module</span>.exports = Ajv;

Ajv.prototype.compileAsync = <span class="hljs-keyword">async</span>.compile;

<span class="hljs-keyword">var</span> customKeyword = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./keyword'</span>);
Ajv.prototype.addKeyword = customKeyword.add;
Ajv.prototype.getKeyword = customKeyword.get;
Ajv.prototype.removeKeyword = customKeyword.remove;
Ajv.ValidationError = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./compile/validation_error'</span>);

<span class="hljs-keyword">var</span> META_SCHEMA_ID = <span class="hljs-string">'http://json-schema.org/draft-04/schema'</span>;
<span class="hljs-keyword">var</span> SCHEMA_URI_FORMAT = <span class="hljs-regexp">/^(?:(?:[a-z][a-z0-9+-.]*:)?\/\/)?[^\s]*$/i</span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">SCHEMA_URI_FORMAT_FUNC</span>(<span class="hljs-params">str</span>) </span>{
  <span class="hljs-keyword">return</span> SCHEMA_URI_FORMAT.test(str);
}

<span class="hljs-keyword">var</span> META_IGNORE_OPTIONS = [ <span class="hljs-string">'removeAdditional'</span>, <span class="hljs-string">'useDefaults'</span>, <span class="hljs-string">'coerceTypes'</span> ];

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-187" id="section-187"></a>
</div>
<div class="dox">
<div class="summary">
<p>Creates validator instance.
Usage: <code>Ajv(opts)</code></p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">opts</span>
<span class="dox_type">Object</span>
<span>optional options
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Object</span>
<span>ajv instance
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Ajv</span>(<span class="hljs-params">opts</span>) </span>{
  <span class="hljs-keyword">if</span> (!(<span class="hljs-keyword">this</span> <span class="hljs-keyword">instanceof</span> Ajv)) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Ajv(opts);
  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

  opts = <span class="hljs-keyword">this</span>._opts = util.copy(opts) || {};
  <span class="hljs-keyword">this</span>._schemas = {};
  <span class="hljs-keyword">this</span>._refs = {};
  <span class="hljs-keyword">this</span>._fragments = {};
  <span class="hljs-keyword">this</span>._formats = formats(opts.format);
  <span class="hljs-keyword">this</span>._cache = opts.cache || <span class="hljs-keyword">new</span> Cache;
  <span class="hljs-keyword">this</span>._loadingSchemas = {};
  <span class="hljs-keyword">this</span>._compilations = [];
  <span class="hljs-keyword">this</span>.RULES = rules();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-188" id="section-188"></a>
</div>
<p>this is done on purpose, so that methods are bound to the instance
(without using bind) so that they can be used without the instance</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">this</span>.validate = validate;
  <span class="hljs-keyword">this</span>.compile = compile;
  <span class="hljs-keyword">this</span>.addSchema = addSchema;
  <span class="hljs-keyword">this</span>.addMetaSchema = addMetaSchema;
  <span class="hljs-keyword">this</span>.validateSchema = validateSchema;
  <span class="hljs-keyword">this</span>.getSchema = getSchema;
  <span class="hljs-keyword">this</span>.removeSchema = removeSchema;
  <span class="hljs-keyword">this</span>.addFormat = addFormat;
  <span class="hljs-keyword">this</span>.errorsText = errorsText;

  <span class="hljs-keyword">this</span>._addSchema = _addSchema;
  <span class="hljs-keyword">this</span>._compile = _compile;

  opts.loopRequired = opts.loopRequired || <span class="hljs-literal">Infinity</span>;
  <span class="hljs-keyword">if</span> (opts.async || opts.transpile) <span class="hljs-keyword">async</span>.setup(opts);
  <span class="hljs-keyword">if</span> (opts.beautify === <span class="hljs-literal">true</span>) opts.beautify = { <span class="hljs-attr">indent_size</span>: <span class="hljs-number">2</span> };
  <span class="hljs-keyword">if</span> (opts.errorDataPath == <span class="hljs-string">'property'</span>) opts._errorDataPathProperty = <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">this</span>._metaOpts = getMetaSchemaOptions();

  <span class="hljs-keyword">if</span> (opts.formats) addInitialFormats();
  addDraft4MetaSchema();
  <span class="hljs-keyword">if</span> (opts.v5) v5.enable(<span class="hljs-keyword">this</span>);
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> opts.meta == <span class="hljs-string">'object'</span>) addMetaSchema(opts.meta);
  addInitialSchemas();


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-189" id="section-189"></a>
</div>
<div class="dox">
<div class="summary">
<p>Validate data using schema
Schema will be compiled and cached (using serialized JSON as key. <a href="https://github.com/substack/json-stable-stringify">json-stable-stringify</a> is used to serialize.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">schemaKeyRef</span>
<span class="dox_type">String</span>
<span class="dox_type">Object</span>
<span>key, ref or schema object
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">data</span>
<span class="dox_type">Any</span>
<span>to be validated
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Boolean</span>
<span>validation result. Errors from the last validation will be available in <code>ajv.errors</code> (and also in compiled schema: <code>schema.errors</code>).
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validate</span>(<span class="hljs-params">schemaKeyRef, data</span>) </span>{
    <span class="hljs-keyword">var</span> v;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> schemaKeyRef == <span class="hljs-string">'string'</span>) {
      v = getSchema(schemaKeyRef);
      <span class="hljs-keyword">if</span> (!v) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'no schema with key or ref "'</span> + schemaKeyRef + <span class="hljs-string">'"'</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">var</span> schemaObj = _addSchema(schemaKeyRef);
      v = schemaObj.validate || _compile(schemaObj);
    }

    <span class="hljs-keyword">var</span> valid = v(data);
    <span class="hljs-keyword">if</span> (v.$<span class="hljs-keyword">async</span> === <span class="hljs-literal">true</span>)
      <span class="hljs-keyword">return</span> self._opts.async == <span class="hljs-string">'*'</span> ? co(valid) : valid;
    self.errors = v.errors;
    <span class="hljs-keyword">return</span> valid;
  }


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-190" id="section-190"></a>
</div>
<div class="dox">
<div class="summary">
<p>Create validating function for passed schema.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">schema</span>
<span class="dox_type">Object</span>
<span>schema object
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">_meta</span>
<span class="dox_type">Boolean</span>
<span>true if schema is a meta-schema. Used internally to compile meta schemas of custom keywords.
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Function</span>
<span>validating function
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compile</span>(<span class="hljs-params">schema, _meta</span>) </span>{
    <span class="hljs-keyword">var</span> schemaObj = _addSchema(schema, <span class="hljs-literal">undefined</span>, _meta);
    <span class="hljs-keyword">return</span> schemaObj.validate || _compile(schemaObj);
  }


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-191" id="section-191"></a>
</div>
<div class="dox">
<div class="summary">
<p>Adds schema to the instance.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">schema</span>
<span class="dox_type">Object</span>
<span class="dox_type">Array</span>
<span>schema or array of schemas. If array is passed, <code>key</code> and other parameters will be ignored.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">key</span>
<span class="dox_type">String</span>
<span>Optional schema key. Can be passed to <code>validate</code> method instead of schema object or id/ref. One schema per instance can have empty <code>id</code> and <code>key</code>.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">_skipValidation</span>
<span class="dox_type">Boolean</span>
<span>true to skip schema validation. Used internally, option validateSchema should be used instead.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">_meta</span>
<span class="dox_type">Boolean</span>
<span>true if schema is a meta-schema. Used internally, addMetaSchema should be used instead.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addSchema</span>(<span class="hljs-params">schema, key, _skipValidation, _meta</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(schema)){
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;schema.length; i++) addSchema(schema[i], <span class="hljs-literal">undefined</span>, _skipValidation, _meta);
      <span class="hljs-keyword">return</span>;
    }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-192" id="section-192"></a>
</div>
<p>can key/id have # inside?</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    key = resolve.normalizeId(key || schema.id);
    checkUnique(key);
    self._schemas[key] = _addSchema(schema, _skipValidation, _meta, <span class="hljs-literal">true</span>);
  }


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-193" id="section-193"></a>
</div>
<div class="dox">
<div class="summary">
<p>Add schema that will be used to validate other schemas
options in META_IGNORE_OPTIONS are alway set to false</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">schema</span>
<span class="dox_type">Object</span>
<span>schema object
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">key</span>
<span class="dox_type">String</span>
<span>optional schema key
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">skipValidation</span>
<span class="dox_type">Boolean</span>
<span>true to skip schema validation, can be used to override validateSchema option for meta-schema
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addMetaSchema</span>(<span class="hljs-params">schema, key, skipValidation</span>) </span>{
    addSchema(schema, key, skipValidation, <span class="hljs-literal">true</span>);
  }


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-194" id="section-194"></a>
</div>
<div class="dox">
<div class="summary">
<p>Validate schema</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">schema</span>
<span class="dox_type">Object</span>
<span>schema to validate
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">throwOrLogError</span>
<span class="dox_type">Boolean</span>
<span>pass true to throw (or log) an error if invalid
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Boolean</span>
<span>true if schema is valid
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validateSchema</span>(<span class="hljs-params">schema, throwOrLogError</span>) </span>{
    <span class="hljs-keyword">var</span> $schema = schema.$schema || self._opts.defaultMeta || defaultMeta();
    <span class="hljs-keyword">var</span> currentUriFormat = self._formats.uri;
    self._formats.uri = <span class="hljs-keyword">typeof</span> currentUriFormat == <span class="hljs-string">'function'</span>
                        ? SCHEMA_URI_FORMAT_FUNC
                        : SCHEMA_URI_FORMAT;
    <span class="hljs-keyword">var</span> valid;
    <span class="hljs-keyword">try</span> { valid = validate($schema, schema); }
    <span class="hljs-keyword">finally</span> { self._formats.uri = currentUriFormat; }
    <span class="hljs-keyword">if</span> (!valid &amp;&amp; throwOrLogError) {
      <span class="hljs-keyword">var</span> message = <span class="hljs-string">'schema is invalid: '</span> + errorsText();
      <span class="hljs-keyword">if</span> (self._opts.validateSchema == <span class="hljs-string">'log'</span>) <span class="hljs-built_in">console</span>.error(message);
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(message);
    }
    <span class="hljs-keyword">return</span> valid;
  }


  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">defaultMeta</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> meta = self._opts.meta;
    self._opts.defaultMeta = <span class="hljs-keyword">typeof</span> meta == <span class="hljs-string">'object'</span>
                              ? meta.id || meta
                              : self._opts.v5
                                ? v5.META_SCHEMA_ID
                                : META_SCHEMA_ID;
    <span class="hljs-keyword">return</span> self._opts.defaultMeta;
  }


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-195" id="section-195"></a>
</div>
<div class="dox">
<div class="summary">
<p>Get compiled schema from the instance by <code>key</code> or <code>ref</code>.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">keyRef</span>
<span class="dox_type">String</span>
<span><code>key</code> that was passed to <code>addSchema</code> or full schema reference (<code>schema.id</code> or resolved id).
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Function</span>
<span>schema validating function (with property <code>schema</code>).
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getSchema</span>(<span class="hljs-params">keyRef</span>) </span>{
    <span class="hljs-keyword">var</span> schemaObj = _getSchemaObj(keyRef);
    <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">typeof</span> schemaObj) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'object'</span>: <span class="hljs-keyword">return</span> schemaObj.validate || _compile(schemaObj);
      <span class="hljs-keyword">case</span> <span class="hljs-string">'string'</span>: <span class="hljs-keyword">return</span> getSchema(schemaObj);
      <span class="hljs-keyword">case</span> <span class="hljs-string">'undefined'</span>: <span class="hljs-keyword">return</span> _getSchemaFragment(keyRef);
    }
  }


  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getSchemaFragment</span>(<span class="hljs-params">ref</span>) </span>{
    <span class="hljs-keyword">var</span> res = resolve.schema.call(self, { <span class="hljs-attr">schema</span>: {} }, ref);
    <span class="hljs-keyword">if</span> (res) {
      <span class="hljs-keyword">var</span> schema = res.schema
        , root = res.root
        , baseId = res.baseId;
      <span class="hljs-keyword">var</span> v = compileSchema.call(self, schema, root, <span class="hljs-literal">undefined</span>, baseId);
      self._fragments[ref] = <span class="hljs-keyword">new</span> SchemaObject({
        <span class="hljs-attr">ref</span>: ref,
        <span class="hljs-attr">fragment</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">schema</span>: schema,
        <span class="hljs-attr">root</span>: root,
        <span class="hljs-attr">baseId</span>: baseId,
        <span class="hljs-attr">validate</span>: v
      });
      <span class="hljs-keyword">return</span> v;
    }
  }


  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getSchemaObj</span>(<span class="hljs-params">keyRef</span>) </span>{
    keyRef = resolve.normalizeId(keyRef);
    <span class="hljs-keyword">return</span> self._schemas[keyRef] || self._refs[keyRef] || self._fragments[keyRef];
  }


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-196" id="section-196"></a>
</div>
<div class="dox">
<div class="summary">
<p>Remove cached schema(s).
If no parameter is passed all schemas but meta-schemas are removed.
If RegExp is passed all schemas with key/id matching pattern but meta-schemas are removed.
Even if schema is referenced by other schemas it still can be removed as other schemas have local references.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">schemaKeyRef</span>
<span class="dox_type">String</span>
<span class="dox_type">Object</span>
<span class="dox_type">RegExp</span>
<span>key, ref, pattern to match key/ref or schema object
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeSchema</span>(<span class="hljs-params">schemaKeyRef</span>) </span>{
    <span class="hljs-keyword">if</span> (schemaKeyRef <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">RegExp</span>) {
      _removeAllSchemas(self._schemas, schemaKeyRef);
      _removeAllSchemas(self._refs, schemaKeyRef);
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">typeof</span> schemaKeyRef) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'undefined'</span>:
        _removeAllSchemas(self._schemas);
        _removeAllSchemas(self._refs);
        self._cache.clear();
        <span class="hljs-keyword">return</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">'string'</span>:
        <span class="hljs-keyword">var</span> schemaObj = _getSchemaObj(schemaKeyRef);
        <span class="hljs-keyword">if</span> (schemaObj) self._cache.del(schemaObj.jsonStr);
        <span class="hljs-keyword">delete</span> self._schemas[schemaKeyRef];
        <span class="hljs-keyword">delete</span> self._refs[schemaKeyRef];
        <span class="hljs-keyword">return</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">'object'</span>:
        <span class="hljs-keyword">var</span> jsonStr = stableStringify(schemaKeyRef);
        self._cache.del(jsonStr);
        <span class="hljs-keyword">var</span> id = schemaKeyRef.id;
        <span class="hljs-keyword">if</span> (id) {
          id = resolve.normalizeId(id);
          <span class="hljs-keyword">delete</span> self._schemas[id];
          <span class="hljs-keyword">delete</span> self._refs[id];
        }
    }
  }


  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeAllSchemas</span>(<span class="hljs-params">schemas, regex</span>) </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> keyRef <span class="hljs-keyword">in</span> schemas) {
      <span class="hljs-keyword">var</span> schemaObj = schemas[keyRef];
      <span class="hljs-keyword">if</span> (!schemaObj.meta &amp;&amp; (!regex || regex.test(keyRef))) {
        self._cache.del(schemaObj.jsonStr);
        <span class="hljs-keyword">delete</span> schemas[keyRef];
      }
    }
  }


  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_addSchema</span>(<span class="hljs-params">schema, skipValidation, meta, shouldAddSchema</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> schema != <span class="hljs-string">'object'</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'schema should be object'</span>);
    <span class="hljs-keyword">var</span> jsonStr = stableStringify(schema);
    <span class="hljs-keyword">var</span> cached = self._cache.get(jsonStr);
    <span class="hljs-keyword">if</span> (cached) <span class="hljs-keyword">return</span> cached;

    shouldAddSchema = shouldAddSchema || self._opts.addUsedSchema !== <span class="hljs-literal">false</span>;

    <span class="hljs-keyword">var</span> id = resolve.normalizeId(schema.id);
    <span class="hljs-keyword">if</span> (id &amp;&amp; shouldAddSchema) checkUnique(id);

    <span class="hljs-keyword">var</span> willValidate = self._opts.validateSchema !== <span class="hljs-literal">false</span> &amp;&amp; !skipValidation;
    <span class="hljs-keyword">var</span> recursiveMeta;
    <span class="hljs-keyword">if</span> (willValidate &amp;&amp; !(recursiveMeta = schema.id &amp;&amp; schema.id == schema.$schema))
      validateSchema(schema, <span class="hljs-literal">true</span>);

    <span class="hljs-keyword">var</span> localRefs = resolve.ids.call(self, schema);

    <span class="hljs-keyword">var</span> schemaObj = <span class="hljs-keyword">new</span> SchemaObject({
      <span class="hljs-attr">id</span>: id,
      <span class="hljs-attr">schema</span>: schema,
      <span class="hljs-attr">localRefs</span>: localRefs,
      <span class="hljs-attr">jsonStr</span>: jsonStr,
      <span class="hljs-attr">meta</span>: meta
    });

    <span class="hljs-keyword">if</span> (id[<span class="hljs-number">0</span>] != <span class="hljs-string">'#'</span> &amp;&amp; shouldAddSchema) self._refs[id] = schemaObj;
    self._cache.put(jsonStr, schemaObj);

    <span class="hljs-keyword">if</span> (willValidate &amp;&amp; recursiveMeta) validateSchema(schema, <span class="hljs-literal">true</span>);

    <span class="hljs-keyword">return</span> schemaObj;
  }


  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_compile</span>(<span class="hljs-params">schemaObj, root</span>) </span>{
    <span class="hljs-keyword">if</span> (schemaObj.compiling) {
      schemaObj.validate = callValidate;
      callValidate.schema = schemaObj.schema;
      callValidate.errors = <span class="hljs-literal">null</span>;
      callValidate.root = root ? root : callValidate;
      <span class="hljs-keyword">if</span> (schemaObj.schema.$<span class="hljs-keyword">async</span> === <span class="hljs-literal">true</span>)
        callValidate.$<span class="hljs-keyword">async</span> = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">return</span> callValidate;
    }
    schemaObj.compiling = <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">var</span> currentOpts;
    <span class="hljs-keyword">if</span> (schemaObj.meta) {
      currentOpts = self._opts;
      self._opts = self._metaOpts;
    }

    <span class="hljs-keyword">var</span> v;
    <span class="hljs-keyword">try</span> { v = compileSchema.call(self, schemaObj.schema, root, schemaObj.localRefs); }
    <span class="hljs-keyword">finally</span> {
      schemaObj.compiling = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">if</span> (schemaObj.meta) self._opts = currentOpts;
    }

    schemaObj.validate = v;
    schemaObj.refs = v.refs;
    schemaObj.refVal = v.refVal;
    schemaObj.root = v.root;
    <span class="hljs-keyword">return</span> v;


    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">callValidate</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> _validate = schemaObj.validate;
      <span class="hljs-keyword">var</span> result = _validate.apply(<span class="hljs-literal">null</span>, <span class="hljs-built_in">arguments</span>);
      callValidate.errors = _validate.errors;
      <span class="hljs-keyword">return</span> result;
    }
  }


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-197" id="section-197"></a>
</div>
<div class="dox">
<div class="summary">
<p>Convert array of error message objects to string</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">errors</span>
<span class="dox_type">Array.&lt;Object&gt;</span>
<span>optional array of validation errors, if not passed errors from the instance are used.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options</span>
<span class="dox_type">Object</span>
<span>optional options with properties <code>separator</code> and <code>dataVar</code>.
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">String</span>
<span>human readable string with all errors descriptions
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">errorsText</span>(<span class="hljs-params">errors, options</span>) </span>{
    errors = errors || self.errors;
    <span class="hljs-keyword">if</span> (!errors) <span class="hljs-keyword">return</span> <span class="hljs-string">'No errors'</span>;
    options = options || {};
    <span class="hljs-keyword">var</span> separator = options.separator === <span class="hljs-literal">undefined</span> ? <span class="hljs-string">', '</span> : options.separator;
    <span class="hljs-keyword">var</span> dataVar = options.dataVar === <span class="hljs-literal">undefined</span> ? <span class="hljs-string">'data'</span> : options.dataVar;

    <span class="hljs-keyword">var</span> text = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;errors.length; i++) {
      <span class="hljs-keyword">var</span> e = errors[i];
      <span class="hljs-keyword">if</span> (e) text += dataVar + e.dataPath + <span class="hljs-string">' '</span> + e.message + separator;
    }
    <span class="hljs-keyword">return</span> text.slice(<span class="hljs-number">0</span>, -separator.length);
  }


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-198" id="section-198"></a>
</div>
<div class="dox">
<div class="summary">
<p>Add custom format</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">name</span>
<span class="dox_type">String</span>
<span>format name
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">format</span>
<span class="dox_type">String</span>
<span class="dox_type">RegExp</span>
<span class="dox_type">Function</span>
<span>string is converted to RegExp; function should return boolean (true when valid)
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addFormat</span>(<span class="hljs-params">name, format</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> format == <span class="hljs-string">'string'</span>) format = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(format);
    self._formats[name] = format;
  }


  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addDraft4MetaSchema</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (self._opts.meta !== <span class="hljs-literal">false</span>) {
      <span class="hljs-keyword">var</span> metaSchema = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./refs/json-schema-draft-04.json'</span>);
      addMetaSchema(metaSchema, META_SCHEMA_ID, <span class="hljs-literal">true</span>);
      self._refs[<span class="hljs-string">'http://json-schema.org/schema'</span>] = META_SCHEMA_ID;
    }
  }


  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addInitialSchemas</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> optsSchemas = self._opts.schemas;
    <span class="hljs-keyword">if</span> (!optsSchemas) <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(optsSchemas)) addSchema(optsSchemas);
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> optsSchemas) addSchema(optsSchemas[key], key);
  }


  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addInitialFormats</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> name <span class="hljs-keyword">in</span> self._opts.formats) {
      <span class="hljs-keyword">var</span> format = self._opts.formats[name];
      addFormat(name, format);
    }
  }


  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkUnique</span>(<span class="hljs-params">id</span>) </span>{
    <span class="hljs-keyword">if</span> (self._schemas[id] || self._refs[id])
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'schema with key or id "'</span> + id + <span class="hljs-string">'" already exists'</span>);
  }


  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getMetaSchemaOptions</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> metaOpts = util.copy(self._opts);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;META_IGNORE_OPTIONS.length; i++)
      <span class="hljs-keyword">delete</span> metaOpts[META_IGNORE_OPTIONS[i]];
    <span class="hljs-keyword">return</span> metaOpts;
  }
}

},{<span class="hljs-string">"./async"</span>:<span class="hljs-number">1</span>,<span class="hljs-string">"./cache"</span>:<span class="hljs-number">2</span>,<span class="hljs-string">"./compile"</span>:<span class="hljs-number">6</span>,<span class="hljs-string">"./compile/formats"</span>:<span class="hljs-number">5</span>,<span class="hljs-string">"./compile/resolve"</span>:<span class="hljs-number">7</span>,<span class="hljs-string">"./compile/rules"</span>:<span class="hljs-number">8</span>,<span class="hljs-string">"./compile/schema_obj"</span>:<span class="hljs-number">9</span>,<span class="hljs-string">"./compile/util"</span>:<span class="hljs-number">11</span>,<span class="hljs-string">"./compile/validation_error"</span>:<span class="hljs-number">12</span>,<span class="hljs-string">"./keyword"</span>:<span class="hljs-number">37</span>,<span class="hljs-string">"./refs/json-schema-draft-04.json"</span>:<span class="hljs-number">38</span>,<span class="hljs-string">"./v5"</span>:<span class="hljs-number">40</span>,<span class="hljs-string">"co"</span>:<span class="hljs-number">41</span>,<span class="hljs-string">"json-stable-stringify"</span>:<span class="hljs-number">42</span>}]},{},[])(<span class="hljs-string">"ajv"</span>)
});
</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
